{"ast":null,"code":"/*! grapesjs-template-manager - 1.0.7 */\n!function (e, t) {\n  'object' == typeof exports && 'object' == typeof module ? module.exports = t() : 'function' == typeof define && define.amd ? define([], t) : 'object' == typeof exports ? exports[\"grapesjs-template-manager\"] = t() : e[\"grapesjs-template-manager\"] = t();\n}(window, function () {\n  return function (e) {\n    var t = {};\n\n    function n(r) {\n      if (t[r]) return t[r].exports;\n      var o = t[r] = {\n        i: r,\n        l: !1,\n        exports: {}\n      };\n      return e[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports;\n    }\n\n    return n.m = e, n.c = t, n.d = function (e, t, r) {\n      n.o(e, t) || Object.defineProperty(e, t, {\n        enumerable: !0,\n        get: r\n      });\n    }, n.r = function (e) {\n      'undefined' != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n        value: 'Module'\n      }), Object.defineProperty(e, '__esModule', {\n        value: !0\n      });\n    }, n.t = function (e, t) {\n      if (1 & t && (e = n(e)), 8 & t) return e;\n      if (4 & t && 'object' == typeof e && e && e.__esModule) return e;\n      var r = Object.create(null);\n      if (n.r(r), Object.defineProperty(r, 'default', {\n        enumerable: !0,\n        value: e\n      }), 2 & t && 'string' != typeof e) for (var o in e) n.d(r, o, function (t) {\n        return e[t];\n      }.bind(null, o));\n      return r;\n    }, n.n = function (e) {\n      var t = e && e.__esModule ? function () {\n        return e['default'];\n      } : function () {\n        return e;\n      };\n      return n.d(t, 'a', t), t;\n    }, n.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    }, n.p = \"\", n(n.s = 6);\n  }([function (e, t) {\n    e.exports = function (e, t, n) {\n      return t in e ? Object.defineProperty(e, t, {\n        value: n,\n        enumerable: !0,\n        configurable: !0,\n        writable: !0\n      }) : e[t] = n, e;\n    }, e.exports[\"default\"] = e.exports, e.exports.__esModule = !0;\n  }, function (e, t, n) {\n    var r = n(5);\n    e.exports = function (e, t) {\n      if (null == e) return {};\n      var n,\n          o,\n          i = r(e, t);\n\n      if (Object.getOwnPropertySymbols) {\n        var a = Object.getOwnPropertySymbols(e);\n\n        for (o = 0; o < a.length; o++) n = a[o], t.indexOf(n) >= 0 || Object.prototype.propertyIsEnumerable.call(e, n) && (i[n] = e[n]);\n      }\n\n      return i;\n    }, e.exports[\"default\"] = e.exports, e.exports.__esModule = !0;\n  }, function (e, t, n) {\n    !function (t) {\n      'use strict';\n\n      var n = function () {\n        return {\n          escape: function (e) {\n            return e.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n          },\n          parseExtension: t,\n          mimeType: function (e) {\n            var n = t(e).toLowerCase();\n            return (r = 'application/font-woff', o = 'image/jpeg', {\n              woff: r,\n              woff2: r,\n              ttf: 'application/font-truetype',\n              eot: 'application/vnd.ms-fontobject',\n              png: 'image/png',\n              jpg: o,\n              jpeg: o,\n              gif: 'image/gif',\n              tiff: 'image/tiff',\n              svg: 'image/svg+xml'\n            })[n] || '';\n            var r, o;\n          },\n          dataAsUrl: function (e, t) {\n            return 'data:' + t + ';base64,' + e;\n          },\n          isDataUrl: function (e) {\n            return -1 !== e.search(/^(data:)/);\n          },\n          canvasToBlob: function (e) {\n            return e.toBlob ? new Promise(function (t) {\n              e.toBlob(t);\n            }) : function (e) {\n              return new Promise(function (t) {\n                for (var n = window.atob(e.toDataURL().split(',')[1]), r = n.length, o = new Uint8Array(r), i = 0; i < r; i++) o[i] = n.charCodeAt(i);\n\n                t(new Blob([o], {\n                  type: 'image/png'\n                }));\n              });\n            }(e);\n          },\n          resolveUrl: function (e, t) {\n            var n = document.implementation.createHTMLDocument(),\n                r = n.createElement('base');\n            n.head.appendChild(r);\n            var o = n.createElement('a');\n            return n.body.appendChild(o), r.href = t, o.href = e, o.href;\n          },\n          getAndEncode: function (e) {\n            var t = 3e4;\n            c.impl.options.cacheBust && (e += (/\\?/.test(e) ? \"&\" : \"?\") + new Date().getTime());\n            return new Promise(function (n) {\n              var r,\n                  o = new XMLHttpRequest();\n\n              if (o.onreadystatechange = function () {\n                if (4 !== o.readyState) return;\n                if (200 !== o.status) return void (r ? n(r) : a('cannot fetch resource: ' + e + ', status: ' + o.status));\n                var t = new FileReader();\n                t.onloadend = function () {\n                  var e = t.result.split(/,/)[1];\n                  n(e);\n                }, t.readAsDataURL(o.response);\n              }, o.ontimeout = function () {\n                r ? n(r) : a('timeout of ' + t + 'ms occured while fetching resource: ' + e);\n              }, o.responseType = 'blob', o.timeout = t, o.open('GET', e, !0), o.send(), c.impl.options.imagePlaceholder) {\n                var i = c.impl.options.imagePlaceholder.split(/,/);\n                i && i[1] && (r = i[1]);\n              }\n\n              function a(e) {\n                console.error(e), n('');\n              }\n            });\n          },\n          uid: (e = 0, function () {\n            return 'u' + ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4) + e++;\n          }),\n          delay: function (e) {\n            return function (t) {\n              return new Promise(function (n) {\n                setTimeout(function () {\n                  n(t);\n                }, e);\n              });\n            };\n          },\n          asArray: function (e) {\n            for (var t = [], n = e.length, r = 0; r < n; r++) t.push(e[r]);\n\n            return t;\n          },\n          escapeXhtml: function (e) {\n            return e.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n          },\n          makeImage: function (e) {\n            return new Promise(function (t, n) {\n              var r = new Image();\n              r.onload = function () {\n                t(r);\n              }, r.onerror = n, r.src = e;\n            });\n          },\n          width: function (e) {\n            var t = n(e, 'border-left-width'),\n                r = n(e, 'border-right-width');\n            return e.scrollWidth + t + r;\n          },\n          height: function (e) {\n            var t = n(e, 'border-top-width'),\n                r = n(e, 'border-bottom-width');\n            return e.scrollHeight + t + r;\n          }\n        };\n        var e;\n\n        function t(e) {\n          var t = /\\.([^\\.\\/]*?)$/g.exec(e);\n          return t ? t[1] : '';\n        }\n\n        function n(e, t) {\n          var n = window.getComputedStyle(e).getPropertyValue(t);\n          return parseFloat(n.replace('px', ''));\n        }\n      }(),\n          r = function () {\n        var e = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n        return {\n          inlineAll: function (e, n, i) {\n            return function () {\n              return !t(e);\n            }() ? Promise.resolve(e) : Promise.resolve(e).then(r).then(function (t) {\n              var r = Promise.resolve(e);\n              return t.forEach(function (e) {\n                r = r.then(function (t) {\n                  return o(t, e, n, i);\n                });\n              }), r;\n            });\n          },\n          shouldProcess: t,\n          impl: {\n            readUrls: r,\n            inline: o\n          }\n        };\n\n        function t(t) {\n          return -1 !== t.search(e);\n        }\n\n        function r(t) {\n          for (var r, o = []; null !== (r = e.exec(t));) o.push(r[1]);\n\n          return o.filter(function (e) {\n            return !n.isDataUrl(e);\n          });\n        }\n\n        function o(e, t, r, o) {\n          return Promise.resolve(t).then(function (e) {\n            return r ? n.resolveUrl(e, r) : e;\n          }).then(o || n.getAndEncode).then(function (e) {\n            return n.dataAsUrl(e, n.mimeType(t));\n          }).then(function (r) {\n            return e.replace(function (e) {\n              return new RegExp('(url\\\\([\\'\"]?)(' + n.escape(e) + ')([\\'\"]?\\\\))', 'g');\n            }(t), '$1' + r + '$3');\n          });\n        }\n      }(),\n          o = function () {\n        return {\n          resolveAll: function () {\n            return e(document).then(function (e) {\n              return Promise.all(e.map(function (e) {\n                return e.resolve();\n              }));\n            }).then(function (e) {\n              return e.join('\\n');\n            });\n          },\n          impl: {\n            readAll: e\n          }\n        };\n\n        function e() {\n          return Promise.resolve(n.asArray(document.styleSheets)).then(function (e) {\n            var t = [];\n            return e.forEach(function (e) {\n              try {\n                n.asArray(e.cssRules || []).forEach(t.push.bind(t));\n              } catch (t) {\n                console.log('Error while reading CSS rules from ' + e.href, t.toString());\n              }\n            }), t;\n          }).then(function (e) {\n            return e.filter(function (e) {\n              return e.type === CSSRule.FONT_FACE_RULE;\n            }).filter(function (e) {\n              return r.shouldProcess(e.style.getPropertyValue('src'));\n            });\n          }).then(function (t) {\n            return t.map(e);\n          });\n\n          function e(e) {\n            return {\n              resolve: function () {\n                var t = (e.parentStyleSheet || {}).href;\n                return r.inlineAll(e.cssText, t);\n              },\n              src: function () {\n                return e.style.getPropertyValue('src');\n              }\n            };\n          }\n        }\n      }(),\n          i = function () {\n        return {\n          inlineAll: function t(o) {\n            return o instanceof Element ? function (e) {\n              var t = e.style.getPropertyValue('background');\n              return t ? r.inlineAll(t).then(function (t) {\n                e.style.setProperty('background', t, e.style.getPropertyPriority('background'));\n              }).then(function () {\n                return e;\n              }) : Promise.resolve(e);\n            }(o).then(function () {\n              return o instanceof HTMLImageElement ? e(o).inline() : Promise.all(n.asArray(o.childNodes).map(function (e) {\n                return t(e);\n              }));\n            }) : Promise.resolve(o);\n          },\n          impl: {\n            newImage: e\n          }\n        };\n\n        function e(e) {\n          return {\n            inline: function (t) {\n              return n.isDataUrl(e.src) ? Promise.resolve() : Promise.resolve(e.src).then(t || n.getAndEncode).then(function (t) {\n                return n.dataAsUrl(t, n.mimeType(e.src));\n              }).then(function (t) {\n                return new Promise(function (n, r) {\n                  e.onload = n, e.onerror = r, e.src = t;\n                });\n              });\n            }\n          };\n        }\n      }(),\n          a = {\n        imagePlaceholder: void 0,\n        cacheBust: !1\n      },\n          c = {\n        toSvg: s,\n        toPng: function (e, t) {\n          return u(e, t || {}).then(function (e) {\n            return e.toDataURL();\n          });\n        },\n        toJpeg: function (e, t) {\n          return u(e, t = t || {}).then(function (e) {\n            return e.toDataURL('image/jpeg', t.quality || 1);\n          });\n        },\n        toBlob: function (e, t) {\n          return u(e, t || {}).then(n.canvasToBlob);\n        },\n        toPixelData: function (e, t) {\n          return u(e, t || {}).then(function (t) {\n            return t.getContext('2d').getImageData(0, 0, n.width(e), n.height(e)).data;\n          });\n        },\n        impl: {\n          fontFaces: o,\n          images: i,\n          util: n,\n          inliner: r,\n          options: {}\n        }\n      };\n\n      function s(e, t) {\n        return function (e) {\n          void 0 === e.imagePlaceholder ? c.impl.options.imagePlaceholder = a.imagePlaceholder : c.impl.options.imagePlaceholder = e.imagePlaceholder;\n          void 0 === e.cacheBust ? c.impl.options.cacheBust = a.cacheBust : c.impl.options.cacheBust = e.cacheBust;\n        }(t = t || {}), Promise.resolve(e).then(function (e) {\n          return function e(t, r, o) {\n            return o || !r || r(t) ? Promise.resolve(t).then(function (e) {\n              return e instanceof HTMLCanvasElement ? n.makeImage(e.toDataURL()) : e.cloneNode(!1);\n            }).then(function (e) {\n              return i(t, e, r);\n            }).then(function (e) {\n              return function (e, t) {\n                return t instanceof Element ? Promise.resolve().then(r).then(o).then(i).then(a).then(function () {\n                  return t;\n                }) : t;\n\n                function r() {\n                  var r, o;\n                  r = window.getComputedStyle(e), o = t.style, r.cssText ? o.cssText = r.cssText : function (e, t) {\n                    n.asArray(e).forEach(function (n) {\n                      t.setProperty(n, e.getPropertyValue(n), e.getPropertyPriority(n));\n                    });\n                  }(r, o);\n                }\n\n                function o() {\n                  [':before', ':after'].forEach(function (r) {\n                    !function (r) {\n                      var o = window.getComputedStyle(e, r),\n                          i = o.getPropertyValue('content');\n                      if ('' === i || 'none' === i) return;\n                      var a = n.uid();\n                      t.className = t.className + ' ' + a;\n                      var c = document.createElement('style');\n                      c.appendChild(function (e, t, r) {\n                        var o = '.' + e + ':' + t,\n                            i = r.cssText ? function (e) {\n                          var t = e.getPropertyValue('content');\n                          return e.cssText + ' content: ' + t + ';';\n                        }(r) : function (e) {\n                          return n.asArray(e).map(function (t) {\n                            return t + ': ' + e.getPropertyValue(t) + (e.getPropertyPriority(t) ? ' !important' : '');\n                          }).join('; ') + ';';\n                        }(r);\n                        return document.createTextNode(o + '{' + i + '}');\n                      }(a, r, o)), t.appendChild(c);\n                    }(r);\n                  });\n                }\n\n                function i() {\n                  e instanceof HTMLTextAreaElement && (t.innerHTML = e.value), e instanceof HTMLInputElement && t.setAttribute(\"value\", e.value);\n                }\n\n                function a() {\n                  t instanceof SVGElement && (t.setAttribute('xmlns', 'http://www.w3.org/2000/svg'), t instanceof SVGRectElement && ['width', 'height'].forEach(function (e) {\n                    var n = t.getAttribute(e);\n                    n && t.style.setProperty(e, n);\n                  }));\n                }\n              }(t, e);\n            }) : Promise.resolve();\n\n            function i(t, r, o) {\n              var i = t.childNodes;\n              return 0 === i.length ? Promise.resolve(r) : a(r, n.asArray(i), o).then(function () {\n                return r;\n              });\n\n              function a(t, n, r) {\n                var o = Promise.resolve();\n                return n.forEach(function (n) {\n                  o = o.then(function () {\n                    return e(n, r);\n                  }).then(function (e) {\n                    e && t.appendChild(e);\n                  });\n                }), o;\n              }\n            }\n          }(e, t.filter, !0);\n        }).then(l).then(d).then(function (e) {\n          t.bgcolor && (e.style.backgroundColor = t.bgcolor);\n          t.width && (e.style.width = t.width + 'px');\n          t.height && (e.style.height = t.height + 'px');\n          t.style && Object.keys(t.style).forEach(function (n) {\n            e.style[n] = t.style[n];\n          });\n          return e;\n        }).then(function (r) {\n          return function (e, t, r) {\n            return Promise.resolve(e).then(function (e) {\n              return e.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml'), new XMLSerializer().serializeToString(e);\n            }).then(n.escapeXhtml).then(function (e) {\n              return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + e + '</foreignObject>';\n            }).then(function (e) {\n              return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + t + '\" height=\"' + r + '\">' + e + '</svg>';\n            }).then(function (e) {\n              return 'data:image/svg+xml;charset=utf-8,' + e;\n            });\n          }(r, t.width || n.width(e), t.height || n.height(e));\n        });\n      }\n\n      function u(e, t) {\n        return s(e, t).then(n.makeImage).then(n.delay(100)).then(function (r) {\n          var o = function (e) {\n            var r = document.createElement('canvas');\n\n            if (r.width = t.width || n.width(e), r.height = t.height || n.height(e), t.bgcolor) {\n              var o = r.getContext('2d');\n              o.fillStyle = t.bgcolor, o.fillRect(0, 0, r.width, r.height);\n            }\n\n            return r;\n          }(e);\n\n          return o.getContext('2d').drawImage(r, 0, 0), o;\n        });\n      }\n\n      function l(e) {\n        return o.resolveAll().then(function (t) {\n          var n = document.createElement('style');\n          return e.appendChild(n), n.appendChild(document.createTextNode(t)), e;\n        });\n      }\n\n      function d(e) {\n        return i.inlineAll(e).then(function () {\n          return e;\n        });\n      }\n\n      1 && (e.exports = c);\n    }();\n  }, function (e, t) {\n    e.exports = function (e, t) {\n      if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n    }, e.exports[\"default\"] = e.exports, e.exports.__esModule = !0;\n  }, function (e, t) {\n    function n(e, t) {\n      for (var n = 0; n < t.length; n++) {\n        var r = t[n];\n        r.enumerable = r.enumerable || !1, r.configurable = !0, \"value\" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);\n      }\n    }\n\n    e.exports = function (e, t, r) {\n      return t && n(e.prototype, t), r && n(e, r), e;\n    }, e.exports[\"default\"] = e.exports, e.exports.__esModule = !0;\n  }, function (e, t) {\n    e.exports = function (e, t) {\n      if (null == e) return {};\n      var n,\n          r,\n          o = {},\n          i = Object.keys(e);\n\n      for (r = 0; r < i.length; r++) n = i[r], t.indexOf(n) >= 0 || (o[n] = e[n]);\n\n      return o;\n    }, e.exports[\"default\"] = e.exports, e.exports.__esModule = !0;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    n.r(t);\n    var r = n(0),\n        o = n.n(r),\n        i = n(2),\n        a = n.n(i);\n\n    function c(e, t) {\n      var n = Object.keys(e);\n\n      if (Object.getOwnPropertySymbols) {\n        var r = Object.getOwnPropertySymbols(e);\n        t && (r = r.filter(function (t) {\n          return Object.getOwnPropertyDescriptor(e, t).enumerable;\n        })), n.push.apply(n, r);\n      }\n\n      return n;\n    }\n\n    function s(e) {\n      for (var t = 1; t < arguments.length; t++) {\n        var n = null != arguments[t] ? arguments[t] : {};\n        t % 2 ? c(Object(n), !0).forEach(function (t) {\n          o()(e, t, n[t]);\n        }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : c(Object(n)).forEach(function (t) {\n          Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t));\n        });\n      }\n\n      return e;\n    }\n\n    var u = function (e) {\n      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},\n          n = e.Commands;\n      e.domtoimage = a.a;\n\n      var r = function () {\n        return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (e) {\n          return (e ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> e / 4).toString(16);\n        });\n      },\n          o = function (e) {\n        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},\n            n = arguments.length > 2 ? arguments[2] : void 0,\n            r = arguments.length > 3 ? arguments[3] : void 0;\n        a.a.toJpeg(e, t).then(function (e) {\n          return n && n(e);\n        }).catch(function (e) {\n          return r && r(e);\n        });\n      };\n\n      n.add('get-uuidv4', function () {\n        return r();\n      }), n.add('take-screenshot', function (e) {\n        var n = e.getWrapper().getEl();\n        o(n, {\n          quality: t.quality,\n          height: 1e3,\n          cacheBust: !0,\n          style: s({\n            'background-color': 'white'\n          }, e.getWrapper().getStyle())\n        }, function (t) {\n          return e.Storage.getCurrentStorage().setThumbnail(t);\n        }, t.onScreenshotError);\n      }), n.add('save-as-template', function (e) {\n        e.Storage.getCurrentStorage().setIsTemplate(!0), e.store();\n      }), n.add('delete-template', function (e) {\n        e.Storage.getCurrentStorage().delete(t.onDelete, t.onDeleteError);\n      });\n    },\n        l = n(1),\n        d = n.n(l),\n        f = 'indexeddb',\n        p = 'rest-api',\n        h = 'firestore';\n\n    function m(e, t) {\n      var n = Object.keys(e);\n\n      if (Object.getOwnPropertySymbols) {\n        var r = Object.getOwnPropertySymbols(e);\n        t && (r = r.filter(function (t) {\n          return Object.getOwnPropertyDescriptor(e, t).enumerable;\n        })), n.push.apply(n, r);\n      }\n\n      return n;\n    }\n\n    function g(e) {\n      for (var t = 1; t < arguments.length; t++) {\n        var n = null != arguments[t] ? arguments[t] : {};\n        t % 2 ? m(Object(n), !0).forEach(function (t) {\n          o()(e, t, n[t]);\n        }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : m(Object(n)).forEach(function (t) {\n          Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t));\n        });\n      }\n\n      return e;\n    }\n\n    var v = function (e) {\n      var t,\n          n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},\n          r = e.StorageManager,\n          o = f,\n          i = n.objectStoreName,\n          a = function () {\n        return t;\n      },\n          c = function (e) {\n        if (t) e(t);else {\n          var a = (window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB).open(n.dbName, n.indexeddbVersion),\n              c = function () {\n            return r.onError(o, a.errorCode);\n          };\n\n          a.onerror = c, a.onsuccess = function () {\n            (t = a.result).onerror = c, e(t);\n          }, a.onupgradeneeded = function (e) {\n            e.currentTarget.result.createObjectStore(i, {\n              keyPath: 'idx'\n            }).createIndex('id', 'id', {\n              unique: !1\n            });\n          };\n        }\n      },\n          s = function () {\n        return t.transaction([i], 'readwrite').objectStore(i);\n      },\n          u = function (e) {\n        t ? e(s()) : c(function (t) {\n          return e(s());\n        });\n      };\n\n      r.add(o, {\n        currentId: 'Default',\n        currentIdx: 'uuidv4',\n        currentThumbnail: '',\n        isTemplate: !1,\n        getDb: a,\n        getObjectStore: s,\n        setId: function (e) {\n          this.currentId = e;\n        },\n        setIdx: function (e) {\n          this.currentIdx = e;\n        },\n        setThumbnail: function (e) {\n          this.currentThumbnail = e;\n        },\n        setIsTemplate: function (e) {\n          this.isTemplate = !!e;\n        },\n        load: function (e, t, n) {\n          var r = this;\n          u(function (e) {\n            var o = e.get(r.currentIdx);\n            o.onerror = n, o.onsuccess = function () {\n              t && t(o.result);\n            };\n          });\n        },\n        loadAll: function (e, t) {\n          u(function (n) {\n            var r = n.getAll();\n            r.onerror = t, r.onsuccess = function () {\n              e && e(r.result);\n            };\n          });\n        },\n        store: function (e, t, n) {\n          var r = this;\n          u(function (o) {\n            var i = o.put(g({\n              idx: r.currentIdx,\n              id: r.currentId,\n              template: r.isTemplate,\n              thumbnail: r.currentThumbnail\n            }, e));\n            i.onerror = n, i.onsuccess = t;\n          });\n        },\n        update: function (e, t, n) {\n          var r = e.idx,\n              o = d()(e, [\"idx\"]);\n          u(function (e) {\n            var i = e.get(r);\n            i.onerror = n, i.onsuccess = function () {\n              e.put(g(g({\n                idx: r\n              }, i.result), o)), t && t(i.result);\n            };\n          });\n        },\n        delete: function (e, t, n) {\n          var r = this;\n          u(function (o) {\n            var i = o.delete(n || r.currentIdx);\n            i.onerror = t, i.onsuccess = e;\n          });\n        }\n      });\n    };\n\n    function b(e, t) {\n      var n = Object.keys(e);\n\n      if (Object.getOwnPropertySymbols) {\n        var r = Object.getOwnPropertySymbols(e);\n        t && (r = r.filter(function (t) {\n          return Object.getOwnPropertyDescriptor(e, t).enumerable;\n        })), n.push.apply(n, r);\n      }\n\n      return n;\n    }\n\n    function y(e) {\n      for (var t = 1; t < arguments.length; t++) {\n        var n = null != arguments[t] ? arguments[t] : {};\n        t % 2 ? b(Object(n), !0).forEach(function (t) {\n          o()(e, t, n[t]);\n        }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : b(Object(n)).forEach(function (t) {\n          Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t));\n        });\n      }\n\n      return e;\n    }\n\n    var x = function (e) {\n      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},\n          n = e.StorageManager,\n          r = p,\n          o = n.get('remote');\n      n.add(r, {\n        currentId: 'Default',\n        currentIdx: 'uuidv4',\n        currentThumbnail: '',\n        isTemplate: !1,\n        setId: function (e) {\n          this.currentId = e;\n        },\n        setIdx: function (e) {\n          this.currentIdx = e;\n        },\n        setThumbnail: function (e) {\n          this.currentThumbnail = e;\n        },\n        setIsTemplate: function (e) {\n          this.isTemplate = !!e;\n        },\n        load: function (e, t, n) {\n          var r = o.get('urlLoad'),\n              i = r.endsWith(\"/\") ? this.currentIdx : \"/\".concat(this.currentIdx);\n          o.set({\n            urlLoad: r + i\n          }), o.load(e, t, n), o.set({\n            urlLoad: r\n          });\n        },\n        loadAll: function (e, t) {\n          o.load({}, e, t);\n        },\n        store: function (e, n, r) {\n          var i = o.get('urlStore'),\n              a = i.endsWith(\"/\") ? this.currentIdx : \"/\".concat(this.currentIdx);\n          t.uuidInPath && o.set({\n            urlStore: i + a\n          }), o.store(y({\n            idx: this.currentIdx,\n            id: this.currentId,\n            template: this.isTemplate,\n            thumbnail: this.currentThumbnail\n          }, e), n, r), o.set({\n            urlStore: i\n          });\n        },\n        update: function (e, t, n) {\n          var r = o.get('urlLoad'),\n              i = e.idx;\n          i = r.endsWith(\"/\") ? i : \"/\".concat(i), o.set({\n            urlLoad: r + i\n          }), o.load({}, function (r) {\n            var a = y(y({}, r), e),\n                c = o.get('urlStore');\n            i = c.endsWith(\"/\") ? i : \"/\".concat(i), o.request(c + i, {\n              method: 'post',\n              body: a\n            }, t, n);\n          }, n), o.set({\n            urlLoad: r\n          });\n        },\n        delete: function (e, t, n) {\n          var r = o.get('urlDelete'),\n              i = n || this.currentIdx;\n          i = r.endsWith(\"/\") ? i : \"/\".concat(i);\n          o.request(r + i, {\n            method: 'delete'\n          }, e, t);\n        }\n      });\n    };\n\n    function w(e, t) {\n      var n = Object.keys(e);\n\n      if (Object.getOwnPropertySymbols) {\n        var r = Object.getOwnPropertySymbols(e);\n        t && (r = r.filter(function (t) {\n          return Object.getOwnPropertyDescriptor(e, t).enumerable;\n        })), n.push.apply(n, r);\n      }\n\n      return n;\n    }\n\n    function O(e) {\n      for (var t = 1; t < arguments.length; t++) {\n        var n = null != arguments[t] ? arguments[t] : {};\n        t % 2 ? w(Object(n), !0).forEach(function (t) {\n          o()(e, t, n[t]);\n        }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : w(Object(n)).forEach(function (t) {\n          Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t));\n        });\n      }\n\n      return e;\n    }\n\n    var P = function (e) {\n      var t,\n          n,\n          r,\n          o = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},\n          i = e.StorageManager,\n          a = h,\n          c = o.apiKey,\n          s = o.authDomain,\n          u = o.projectId,\n          l = o.settings,\n          f = function () {\n        return n;\n      },\n          p = function (e) {\n        if (r) return e(r);\n        firebase.apps.length ? (firebase.app(), (t = firebase.firestore()).settings(l)) : (firebase.initializeApp(O({\n          apiKey: c,\n          authDomain: s,\n          projectId: u\n        }, o.firebaseConfig)), (t = firebase.firestore()).settings(l));\n        r = t.collection(o.objectStoreName), e(r);\n      },\n          m = function (t) {\n        p(function (r) {\n          var o = e.Storage.getCurrentStorage();\n          n = r.doc(o.currentIdx), t(n);\n        });\n      };\n\n      i.add(a, {\n        currentId: 'Default',\n        currentIdx: 'uuidv4',\n        currentThumbnail: '',\n        isTemplate: !1,\n        getDoc: f,\n        setDocId: function (e) {\n          this.currentIdx = e;\n        },\n        setId: function (e) {\n          this.currentId = e;\n        },\n        setIdx: function (e) {\n          this.currentIdx = e;\n        },\n        setThumbnail: function (e) {\n          this.currentThumbnail = e;\n        },\n        setIsTemplate: function (e) {\n          this.isTemplate = !!e;\n        },\n        load: function (e, t, n) {\n          m(function (e) {\n            e.get().then(function (e) {\n              return e.exists && t(e.data());\n            }).catch(n);\n          });\n        },\n        loadAll: function (e, t) {\n          p(function (n) {\n            n.get().then(function (t) {\n              var n = [];\n              t.forEach(function (e) {\n                return n.push(e.data());\n              }), e(n);\n            }).catch(t);\n          });\n        },\n        store: function (e, t, n) {\n          var r = this;\n          p(function (o) {\n            o.doc(e.idx || r.currentIdx).set(O({\n              idx: r.currentIdx,\n              id: r.currentId,\n              template: r.isTemplate,\n              thumbnail: r.currentThumbnail\n            }, e)).then(t).catch(n);\n          });\n        },\n        update: function (e, t, n) {\n          var r = e.idx,\n              o = d()(e, [\"idx\"]);\n          p(function (e) {\n            e.doc(r).set(o, {\n              merge: !0\n            }).then(t).catch(n);\n          });\n        },\n        delete: function (e, t, n) {\n          n ? p(function (r) {\n            r.doc(n).delete().then(e).catch(t);\n          }) : m(function (n) {\n            n.delete().then(e).catch(t);\n          });\n        }\n      });\n    },\n        j = function (e) {\n      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n      v(e, t), x(e, t), P(e, t);\n    },\n        S = n(3),\n        T = n.n(S),\n        I = n(4),\n        C = n.n(I);\n\n    function E(e, t) {\n      var n = Object.keys(e);\n\n      if (Object.getOwnPropertySymbols) {\n        var r = Object.getOwnPropertySymbols(e);\n        t && (r = r.filter(function (t) {\n          return Object.getOwnPropertyDescriptor(e, t).enumerable;\n        })), n.push.apply(n, r);\n      }\n\n      return n;\n    }\n\n    var k = function () {\n      function e(t) {\n        var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};\n        T()(this, e), this.editor = t, this.$ = t.$, this.pfx = t.getConfig('stylePrefix'), this.id = t.Storage.getConfig().id || 'gjs-', this.opts = n;\n      }\n\n      return C()(e, [{\n        key: \"_createPage\",\n        value: function () {\n          var e = this.editor,\n              t = this.templateIdx,\n              n = this.page,\n              r = e.Storage.getCurrentStorage();\n          r.setIdx(t), r.setIsTemplate(!1), this.page && e.load(function (t) {\n            e.setComponents(t.components ? JSON.parse(t.components) : t.html), e.setStyle(t.styles ? JSON.parse(t.styles) : t.css), r.setId(n), r.setIdx(e.runCommand('get-uuidv4')), r.setThumbnail(t.thumbnail || ''), e.Modal.close();\n          });\n        }\n      }, {\n        key: \"_openTemplate\",\n        value: function () {\n          var e = this.editor,\n              t = this.templateIdx,\n              n = e.Storage.getCurrentStorage();\n          n.setIdx(t), n.setIsTemplate(!0), e.load(function (t) {\n            e.setComponents(t.components ? JSON.parse(t.components) : t.html), e.setStyle(t.styles ? JSON.parse(t.styles) : t.css), n.setThumbnail(t.thumbnail || ''), e.Modal.close();\n          });\n        }\n      }, {\n        key: \"_selectTemplate\",\n        value: function (e) {\n          var t = this.pfx,\n              n = e.currentTarget;\n          this.templateIdx = n.dataset.idx, this.$(\".\".concat(t, \"templates-card\")).each(function (e, n) {\n            n.classList.remove(\"\".concat(t, \"templates-card-active\"));\n          }), n.parentElement.classList.add(\"\".concat(t, \"templates-card-active\"));\n        }\n      }, {\n        key: \"_openPage\",\n        value: function (e) {\n          var t = this.editor,\n              n = t.Storage.getCurrentStorage();\n          n.setIdx(e.currentTarget.dataset.idx), n.setIsTemplate(!1), t.load(function (e) {\n            t.setComponents(e.components ? JSON.parse(e.components) : e.html), t.setStyle(e.styles ? JSON.parse(e.styles) : e.css), n.setId(e.id), n.setThumbnail(e.thumbnail || ''), t.Modal.close();\n          });\n        }\n      }, {\n        key: \"_editName\",\n        value: function (e) {\n          var t = this.$(e.currentTarget.parentElement),\n              n = t.children().first(),\n              r = t.find(\".\".concat(this.pfx, \"field\")),\n              o = r.find('input');\n          'block' === r.get(0).style.display ? (n.text(o.val()), r.hide(), this.editor.Storage.getCurrentStorage().update({\n            idx: e.currentTarget.dataset.idx,\n            id: o.val().trim()\n          })) : (o.val(n.text().trim()), n.text('...'), r.show());\n        }\n      }, {\n        key: \"_deletePage\",\n        value: function (e) {\n          var t = this.editor,\n              n = this.opts;\n          t.Storage.getCurrentStorage().delete(n.onDelete, n.onDeleteError, e.currentTarget.dataset.idx), e.currentTarget.parentElement.parentElement.style.display = 'none';\n        }\n      }, {\n        key: \"_thumbs\",\n        value: function (e, t) {\n          return \"<div class=\\\"\".concat(this.pfx, \"templates-card\\\" data-idx=\\\"\").concat(e, \"\\\">\\n                \").concat(t, \"\\n            </div>\");\n        }\n      }, {\n        key: \"_thumbsCont\",\n        value: function (e) {\n          var t = this,\n              n = this.$(\"<div class=\\\"\".concat(this.pfx, \"templates-card-2\\\">\\n                \").concat(e, \"\\n            </div>\"));\n          return n.find('i.fa.fa-i-cursor').on('click', function (e) {\n            return t._editName(e);\n          }), n.find('i.fa.fa-trash-o').on('click', function (e) {\n            return t._deletePage(e);\n          }), n;\n        }\n      }, {\n        key: \"_pages\",\n        value: function (e) {\n          var t = this,\n              n = this.pfx,\n              r = this.editor.Storage.getCurrentStorage(),\n              o = this._thumbsCont(e);\n\n          return o.find(\".\".concat(n, \"templates-card\")).filter(function (e, t) {\n            return t.getAttribute('data-idx') == r.currentIdx;\n          }).addClass(\"\".concat(n, \"templates-card-active\")).find('i.fa').hide(), o.find(\".\".concat(this.pfx, \"thumb-select\")).on('click', function (e) {\n            return t._openPage(e);\n          }), o;\n        }\n      }, {\n        key: \"_templates\",\n        value: function (e) {\n          var t = this,\n              n = this.pfx,\n              r = this._thumbsCont(e);\n\n          return r.find(\".\".concat(n, \"templates-card\")).filter(function (e, n) {\n            return n.getAttribute('data-idx') == t.templateIdx;\n          }).addClass(\"\".concat(n, \"templates-card-active\")).find('i.fa').hide(), r.find(\".\".concat(n, \"thumb-select\")).on('click', function (e) {\n            return t._selectTemplate(e);\n          }), r;\n        }\n      }, {\n        key: \"_tabs\",\n        value: function () {\n          var e = this.pfx,\n              t = this.$,\n              n = this.opts,\n              r = t(\"<div class=\\\"\".concat(e, \"tab\\\">\\n                <button class=\\\"\").concat(e, \"tablinks active\\\">\").concat(n.tabsText.pages, \"</button>\\n                <button class=\\\"\").concat(e, \"tablinks\\\">\").concat(n.tabsText.templates, \"</button>\\n            </div>\"));\n          return r.find('button').on('click', function (n) {\n            var o = n.currentTarget;\n            r.find(\".\".concat(e, \"tablinks\")).removeClass('active'), t(o).addClass('active'), 'pages' === o.innerHTML.toLowerCase() ? (t('.templates-tab').hide(), t('.pages-tab').show()) : (t('.templates-tab').show(), t('.pages-tab').hide());\n          }), r;\n        }\n      }, {\n        key: \"loader\",\n        value: function () {\n          return '<div class=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>';\n        }\n      }, {\n        key: \"noPages\",\n        value: function () {\n          return \"<div class=\\\"\".concat(this.pfx, \"templates-card-2\\\">\").concat(this.opts.nopages, \"</div>\");\n        }\n      }, {\n        key: \"noTemplates\",\n        value: function () {\n          var e = this,\n              t = this.$,\n              n = this.id,\n              r = this.pfx,\n              i = this.opts,\n              a = this.editor,\n              c = a.Storage.getCurrentStorage(),\n              s = t(\"<div class=\\\"\".concat(r, \"templates-card-2\\\">\\n                <div style=\\\"display:flex;align-items:center;padding:50px;margin:auto;\\\">\\n                    <button class=\\\"\").concat(r, \"btn-prim \").concat(r, \"btn-wide\\\" id=\\\"create-blank\\\">\\n                        \").concat(i.btnText.createBlank, \"\\n                    </button>\\n                </div>\\n            </div>\"));\n          return s.find('#create-blank').on('click', function () {\n            var i = {};\n            i[\"\".concat(n, \"html\")] = '', i[\"\".concat(n, \"css\")] = '', c.store(function (e) {\n              for (var t = 1; t < arguments.length; t++) {\n                var n = null != arguments[t] ? arguments[t] : {};\n                t % 2 ? E(Object(n), !0).forEach(function (t) {\n                  o()(e, t, n[t]);\n                }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : E(Object(n)).forEach(function (t) {\n                  Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t));\n                });\n              }\n\n              return e;\n            }({\n              idx: a.runCommand('get-uuidv4'),\n              id: 'Blank',\n              template: !0,\n              thumbnail: ''\n            }, i)), c.loadAll(function (n) {\n              var o = t('#pages').find('#templates-container');\n              o.find(\".\".concat(r, \"templates-card-2\")).remove(), o.append(e.update(n.filter(function (e) {\n                return e.template;\n              }), !1));\n            }, function (e) {\n              return console.log(\"Error\", e);\n            });\n          }), s;\n        }\n      }, {\n        key: \"render\",\n        value: function () {\n          var e = this,\n              t = this.pfx,\n              n = this.$,\n              r = this.opts,\n              o = this._tabs(),\n              i = n(\"<div id=\\\"pages\\\" class=\\\"\".concat(t, \"templates \").concat(t, \"one-bg \").concat(t, \"two-color\\\">\\n            <div class=\\\"\").concat(t, \"templates-overlay\\\"></div>\\n            <div class=\\\"\").concat(t, \"templates-cont\\\">\\n                <div class=\\\"\").concat(t, \"fonts templates-tab\\\" style=\\\"display:none\\\">\\n                    <div class=\\\"\").concat(t, \"tip-about \").concat(t, \"four-color\\\">\").concat(r.help, \"</div>\\n                    <label class=\\\"\").concat(t, \"field-label\\\" for=\\\"page-name\\\">\").concat(r.nameLabel, \"</label>\\n                    <div class=\\\"\").concat(t, \"field\\\">\\n                        <input type=\\\"text\\\" name=\\\"pageName\\\" id=\\\"page-name\\\">\\n                    </div>\\n                    <span>\\n                        <button class=\\\"\").concat(t, \"btn-prim \").concat(t, \"btn-wide\\\" id=\\\"template-edit\\\">\\n                            \").concat(r.btnText.edit, \"\\n                        </button>\\n                    </span>\\n                    <span>\\n                        <button class=\\\"\").concat(t, \"btn-prim \").concat(t, \"btn-wide\\\" id=\\\"page-create\\\">\\n                            \").concat(r.btnText.create, \"\\n                        </button>\\n                    </span>\\n                </div>\\n                <div id=\\\"pages-container\\\" class=\\\"pages-tab\\\">\\n                    <button class=\\\"\").concat(t, \"btn-prim \").concat(t, \"btn-wide\\\" id=\\\"templates-tab\\\">\\n                        \").concat(r.btnText.new, \"\\n                    </button>\\n                </div>\\n                <div id=\\\"templates-container\\\" class=\\\"templates-tab\\\" style=\\\"display:none\\\"></div>\\n            </div>\\n        </div>\"));\n\n          return i.find('#templates-tab').on('click', function () {\n            var e = o.find(\".\".concat(t, \"tablinks\"));\n            e.removeClass('active'), n(e.get(1)).addClass('active'), n('.templates-tab').show(), n('.pages-tab').hide();\n          }), i.find('#page-name').on('keyup', function (t) {\n            return e.page = t.currentTarget.value;\n          }), i.find('#page-create').on('click', function () {\n            return e._createPage();\n          }), i.find('#template-edit').on('click', function () {\n            return e._openTemplate();\n          }), i.find(\".\".concat(t, \"templates-cont\")).prepend(o), i;\n        }\n      }, {\n        key: \"update\",\n        value: function (e) {\n          var t = this,\n              n = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1],\n              r = '',\n              o = this.pfx,\n              i = this.id;\n          return e.length ? (e.forEach(function (e) {\n            var n = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"template-preview\\\" viewBox=\\\"0 0 1300 1100\\\" width=\\\"99%\\\" height=\\\"220\\\">\\n                    <foreignObject width=\\\"100%\\\" height=\\\"100%\\\" style=\\\"pointer-events:none\\\">\\n                    <div xmlns=\\\"http://www.w3.org/1999/xhtml\\\" \".concat(e[\"\".concat(i, \"html\")] ? '' : 'padding-top:100%', \"\\\">\\n                    \").concat(e[\"\".concat(i, \"html\")] + '<style scoped>' + e[\"\".concat(i, \"css\")] + '</style>', \"\\n                    </div>\\n                    </foreignObject>\\n                </svg>\"),\n                a = e.thumbnail ? \"<div class=\\\"\".concat(o, \"thumbnail-cont\\\">\\n                    <img class=\\\"template-preview\\\" src=\\\"\").concat(e.thumbnail, \"\\\" alt=\\\"\").concat(e.id, \"\\\">\\n                </div>\") : n;\n            a = \"<div class=\\\"\".concat(o, \"thumb-select\\\" data-idx=\\\"\").concat(e.idx, \"\\\">\\n                    \").concat(a, \"\\n                </div>\\n                <div class=\\\"label\\\">\\n                    <div>\").concat(e.id, \"</div>\\n                    <div class=\\\"\").concat(o, \"field\\\" style=\\\"display:none;\\\" >\\n                        <input type=\\\"text\\\" placeholder=\\\"page name\\\" data-idx=\\\"\").concat(e.idx, \"\\\">\\n                    </div>\\n                    <i class=\\\"\").concat(o, \"caret-icon fa fa-i-cursor\\\" title=\\\"rename\\\" data-idx=\\\"\").concat(e.idx, \"\\\"></i>\\n                    <i class=\\\"\").concat(o, \"caret-icon fa fa-trash-o\\\" title=\\\"delete\\\" data-idx=\\\"\").concat(e.idx, \"\\\"></i>\\n                </div>\"), r += t._thumbs(e.idx, a);\n          }), n ? this._pages(r) : this._templates(r)) : n ? this.noPages() : this.noTemplates();\n        }\n      }]), e;\n    }(),\n        D = function (e) {\n      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},\n          n = e.$,\n          r = e.Modal,\n          o = e.StorageManager,\n          i = e.getConfig('stylePrefix'),\n          a = \"\".concat(i, \"mdl-dialog-tml\"),\n          c = null;\n      e.Commands.add('open-templates', {\n        run: function (e, s) {\n          var u = document.querySelector(\".\".concat(i, \"mdl-dialog\"));\n          u.classList.add(a), s && s.set && s && s.set('active'), !c && (c = new k(e, t)), r.setTitle(t.mdlTitle), r.setContent(n('.lds-ellipsis').length ? n('.lds-ellipsis') : c.loader()), o.getCurrentStorage().loadAll(function (e) {\n            var t = n('#pages');\n            t = t.length ? t : n(c.render()), r.setContent(t);\n            var o = t.find('#pages-container'),\n                a = t.find('#templates-container');\n            o.find(\".\".concat(i, \"templates-card-2\")).remove(), a.find(\".\".concat(i, \"templates-card-2\")).remove(), o.append(c.update(e.filter(function (e) {\n              return !e.template;\n            }))), a.append(c.update(e.filter(function (e) {\n              return e.template;\n            }), !1));\n          }, function (e) {\n            return console.log(\"Error\", e);\n          }), r.open(), r.getModel().once('change:open', function () {\n            u.classList.remove(a);\n          });\n        }\n      });\n    };\n\n    function A(e, t) {\n      var n = Object.keys(e);\n\n      if (Object.getOwnPropertySymbols) {\n        var r = Object.getOwnPropertySymbols(e);\n        t && (r = r.filter(function (t) {\n          return Object.getOwnPropertyDescriptor(e, t).enumerable;\n        })), n.push.apply(n, r);\n      }\n\n      return n;\n    }\n\n    function _(e) {\n      for (var t = 1; t < arguments.length; t++) {\n        var n = null != arguments[t] ? arguments[t] : {};\n        t % 2 ? A(Object(n), !0).forEach(function (t) {\n          o()(e, t, n[t]);\n        }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : A(Object(n)).forEach(function (t) {\n          Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t));\n        });\n      }\n\n      return e;\n    }\n\n    t[\"default\"] = function (e) {\n      var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},\n          n = _(_({}, {\n        dbName: 'gjs',\n        objectStoreName: 'templates',\n        loadFirst: !0,\n        uuidInPath: !0,\n        indexeddbVersion: 4,\n        onDelete: function (e) {\n          console.log('Deleted:', e);\n        },\n        onDeleteError: function (e) {\n          console.log(e);\n        },\n        onScreenshotError: function (e) {\n          console.log(e);\n        },\n        quality: .01,\n        mdlTitle: 'Template Manager',\n        btnText: {\n          new: 'New Page',\n          edit: 'Edit Selected',\n          create: 'Create',\n          createBlank: 'Create Blank Template'\n        },\n        tabsText: {\n          pages: 'Pages',\n          templates: 'Templates'\n        },\n        nameLabel: 'Name',\n        help: 'Select a template, enter page name, then click create. Use edit to modify the template.',\n        nopages: '<div style=\"display:flex;align-items:center;padding:50px;margin:auto;\">No Pages Yet</div>',\n        apiKey: '',\n        authDomain: '',\n        projectId: '',\n        enableOffline: !0,\n        firebaseConfig: {},\n        settings: {\n          timestampsInSnapshots: !0\n        }\n      }), t);\n\n      u(e, n), j(e, n), D(e, n), e.on('load', function () {\n        var t = e.Storage.getCurrentStorage();\n        t.loadAll(function (r) {\n          var o = r[0];\n          o && n.loadFirst ? (t.setId(o.id), t.setIdx(o.idx), t.setThumbnail(o.thumbnail), t.setIsTemplate(o.template), e.load()) : t.setIdx(e.runCommand('get-uuidv4'));\n        });\n      });\n    };\n  }]);\n});","map":{"version":3,"mappings":";CAAA,UAA2CA,CAA3C,EAAiDC,CAAjD,EAAiDA;AAC1B,qBAAZC,OAAY,IAA8B,mBAAXC,MAAnB,GACrBA,OAAOD,OAAPC,GAAiBF,GADI,GAEI,qBAAXG,MAAW,IAAcA,OAAOC,GAArB,GACzBD,OAAO,EAAPA,EAAWH,CAAXG,CADyB,GAEC,mBAAZF,OAAY,GAC1BA,QAAQ,2BAARA,IAAuCD,GADb,GAG1BD,EAAK,2BAALA,IAAoCC,GAPf;AADvB,EASGK,MATH,EASW;AACX,S;ACTE,QAAIC,IAAmB,EAAvB;;AAGA,aAASC,CAAT,CAA6BC,CAA7B,EAA6BA;AAG5B,UAAGF,EAAiBE,CAAjBF,CAAH,EACC,OAAOA,EAAiBE,CAAjBF,EAA2BL,OAAlC;AAGD,UAAIC,IAASI,EAAiBE,CAAjBF,IAA6B;AACzCG,WAAGD,CADsC;AAEzCE,YAAG,CAFsC;AAGzCT,iBAAS;AAHgC,OAA1C;AAaA,aANAU,EAAQH,CAARG,EAAkBC,IAAlBD,CAAuBT,EAAOD,OAA9BU,EAAuCT,CAAvCS,EAA+CT,EAAOD,OAAtDU,EAA+DJ,CAA/DI,GAGAT,EAAOQ,CAAPR,GAAOQ,CAAI,CAHXC,EAMOT,EAAOD,OAAd;AA0DD;;AAAA,WArDAM,EAAoBM,CAApBN,GAAwBI,CAAxBJ,EAGAA,EAAoBO,CAApBP,GAAwBD,CAHxBC,EAMAA,EAAoBQ,CAApBR,GAAwB,UAASN,CAAT,EAAkBe,CAAlB,EAAwBC,CAAxB,EAAwBA;AAC3CV,QAAoBW,CAApBX,CAAsBN,CAAtBM,EAA+BS,CAA/BT,KACHY,OAAOC,cAAPD,CAAsBlB,CAAtBkB,EAA+BH,CAA/BG,EAAqC;AAAEE,qBAAY,CAAd;AAAoBC,aAAKL;AAAzB,OAArCE,CADGZ;AAC2DU,KARhEV,EAaAA,EAAoBgB,CAApBhB,GAAwB,UAASN,CAAT,EAASA;AACX,4BAAXuB,MAAW,IAAeA,OAAOC,WAAtB,IACpBN,OAAOC,cAAPD,CAAsBlB,CAAtBkB,EAA+BK,OAAOC,WAAtCN,EAAmD;AAAEO,eAAO;AAAT,OAAnDP,CADoB,EAGrBA,OAAOC,cAAPD,CAAsBlB,CAAtBkB,EAA+B,YAA/BA,EAA6C;AAAEO,gBAAO;AAAT,OAA7CP,CAHqB;AAGiC,KAjBvDZ,EAyBAA,EAAoBoB,CAApBpB,GAAwB,UAASmB,CAAT,EAAgBE,CAAhB,EAAgBA;AAEvC,UADU,IAAPA,CAAO,KAAGF,IAAQnB,EAAoBmB,CAApBnB,CAAX,GACA,IAAPqB,CAAH,EAAa,OAAOF,CAAP;AACb,UAAW,IAAPE,CAAO,IAAuB,mBAAVF,CAAb,IAAmCA,CAAnC,IAA4CA,EAAMG,UAA7D,EAAyE,OAAOH,CAAP;AACzE,UAAII,IAAKX,OAAOY,MAAPZ,CAAc,IAAdA,CAAT;AAGA,UAFAZ,EAAoBgB,CAApBhB,CAAsBuB,CAAtBvB,GACAY,OAAOC,cAAPD,CAAsBW,CAAtBX,EAA0B,SAA1BA,EAAqC;AAAEE,qBAAY,CAAd;AAAoBK,eAAOA;AAA3B,OAArCP,CADAZ,EAEU,IAAPqB,CAAO,IAAqB,mBAATF,CAAtB,EAAyC,KAAI,IAAIM,CAAR,IAAeN,CAAf,EAAsBnB,EAAoBQ,CAApBR,CAAsBuB,CAAtBvB,EAA0ByB,CAA1BzB,EAA+B,UAASyB,CAAT,EAASA;AAAO,eAAON,EAAMM,CAANN,CAAP;AAAaM,OAA7B,CAAqCC,IAArC,CAA0C,IAA1C,EAAgDD,CAAhD,CAA/BzB;AAC/D,aAAOuB,CAAP;AAAOA,KAjCRvB,EAqCAA,EAAoB2B,CAApB3B,GAAwB,UAASL,CAAT,EAASA;AAChC,UAAIe,IAASf,KAAUA,EAAO2B,UAAjB3B,GACZ;AAAwB,eAAOA,EAAO,SAAPA,CAAP;AAAc,OAD1BA,GAEZ;AAA8B,eAAOA,CAAP;AAAOA,OAFtC;AAIA,aADAK,EAAoBQ,CAApBR,CAAsBU,CAAtBV,EAA8B,GAA9BA,EAAmCU,CAAnCV,GACOU,CAAP;AAAOA,KA1CRV,EA8CAA,EAAoBW,CAApBX,GAAwB,UAAS4B,CAAT,EAAiBC,CAAjB,EAAiBA;AAAY,aAAOjB,OAAOkB,SAAPlB,CAAiBmB,cAAjBnB,CAAgCP,IAAhCO,CAAqCgB,CAArChB,EAA6CiB,CAA7CjB,CAAP;AAAoDiB,KA9CzG7B,EAiDAA,EAAoBgC,CAApBhC,GAAwB,EAjDxBA,EAqDOA,EAAoBA,EAAoBiC,CAApBjC,GAAwB,CAA5CA,CAAP;;ACnEFL,MAAOD,OAAPC,GAfA,UAAyBuC,CAAzB,EAA8BT,CAA9B,EAAmCN,CAAnC,EAAmCA;AAYjC,aAXIM,KAAOS,CAAPT,GACFb,OAAOC,cAAPD,CAAsBsB,CAAtBtB,EAA2Ba,CAA3Bb,EAAgC;AAC9BO,eAAOA,CADuB;AAE9BL,qBAAY,CAFkB;AAG9BqB,uBAAc,CAHgB;AAI9BC,mBAAU;AAJoB,OAAhCxB,CADEa,GAQFS,EAAIT,CAAJS,IAAWf,CARTM,EAWGS,CAAP;AAAOA,KAGTvC,EACAA,EAAOD,OAAPC,CAAe,SAAfA,IAA4BA,EAAOD,OADnCC,EAC4CA,EAAOD,OAAPC,CAAe2B,UAAf3B,GAAe2B,CAAa,CADxE3B;AACwE,G;AChBxE,QAAI0C,IAA+BV,EAAQ,CAAR,CAAnC;AAqBAhC,MAAOD,OAAPC,GAnBA,UAAkC2C,CAAlC,EAA0CC,CAA1C,EAA0CA;AACxC,UAAc,QAAVD,CAAJ,EAAoB,OAAO,EAAP;AACpB,UACIb,CADJ;AAAA,UACSvB,CADT;AAAA,UAAIsC,IAASH,EAA6BC,CAA7BD,EAAqCE,CAArCF,CAAb;;AAGA,UAAIzB,OAAO6B,qBAAX,EAAkC;AAChC,YAAIC,IAAmB9B,OAAO6B,qBAAP7B,CAA6B0B,CAA7B1B,CAAvB;;AAEA,aAAKV,IAAI,CAAT,EAAYA,IAAIwC,EAAiBC,MAAjC,EAAyCzC,GAAzC,EACEuB,IAAMiB,EAAiBxC,CAAjBwC,CAANjB,EACIc,EAASK,OAATL,CAAiBd,CAAjBc,KAAyB,CAAzBA,IACC3B,OAAOkB,SAAPlB,CAAiBiC,oBAAjBjC,CAAsCP,IAAtCO,CAA2C0B,CAA3C1B,EAAmDa,CAAnDb,MACL4B,EAAOf,CAAPe,IAAcF,EAAOb,CAAPa,CADT1B,CAFLa;AAOJ;;AAAA,aAAOe,CAAP;AAAOA,KAGT7C,EACAA,EAAOD,OAAPC,CAAe,SAAfA,IAA4BA,EAAOD,OADnCC,EAC4CA,EAAOD,OAAPC,CAAe2B,UAAf3B,GAAe2B,CAAa,CADxE3B;AACwE,G;KCtBxE,UAAWmD,CAAX,EAAWA;AACP;;AAEA,UAAIC,IAwVJ;AACI,eAAO;AACHC,kBAmLJ,UAAgBC,CAAhB,EAAgBA;AACZ,mBAAOA,EAAOC,OAAPD,CAAe,0BAAfA,EAA2C,MAA3CA,CAAP;AAAkD,WArL/C;AAEHE,0BAAgBA,CAFb;AAGHC,oBA2CJ,UAAkBC,CAAlB,EAAkBA;AACd,gBAAIC,IAAYH,EAAeE,CAAfF,EAAoBI,WAApBJ,EAAhB;AACA,oBAzBIK,IAAO,uBAAPA,EACAC,IAAO,YADPD,EAGG;AACHE,oBAAQF,CADL;AAEHG,qBAASH,CAFN;AAGHI,mBAAO,2BAHJ;AAIHC,mBAAO,+BAJJ;AAKHC,mBAAO,WALJ;AAMHC,mBAAON,CANJ;AAOHO,oBAAQP,CAPL;AAQHQ,mBAAO,WARJ;AASHC,oBAAQ,YATL;AAUHC,mBAAO;AAVJ,aAsBP,EAAeb,CAAf,KAA6B,EAA7B;AA9BJ,gBAKQE,CALR,EAMQC,CANR;AAMQA,WAxBD;AAIHW,qBA4KJ,UAAmBC,CAAnB,EAA4BC,CAA5B,EAA4BA;AACxB,mBAAO,UAAUA,CAAV,GAAiB,UAAjB,GAA8BD,CAArC;AAAqCA,WAjLlC;AAKHE,qBA8CJ,UAAmBlB,CAAnB,EAAmBA;AACf,oBAAmC,CAAnC,KAAOA,EAAImB,MAAJnB,CAAW,UAAXA,CAAP;AAAkB,WApDf;AAMHoB,wBAgEJ,UAAsBC,CAAtB,EAAsBA;AAClB,mBAAIA,EAAOC,MAAPD,GACO,IAAIE,OAAJ,CAAY,UAAUC,CAAV,EAAUA;AACzBH,gBAAOC,MAAPD,CAAcG,CAAdH;AAAcG,aADX,CADPH,GAhBR,UAAgBA,CAAhB,EAAgBA;AACZ,qBAAO,IAAIE,OAAJ,CAAY,UAAUC,CAAV,EAAUA;AAKzB,qBAJA,IAAIC,IAAehF,OAAOiF,IAAPjF,CAAY4E,EAAOM,SAAPN,GAAmBO,KAAnBP,CAAyB,GAAzBA,EAA8B,CAA9BA,CAAZ5E,CAAnB,EACI6C,IAASmC,EAAanC,MAD1B,EAEIuC,IAAc,IAAIC,UAAJ,CAAexC,CAAf,CAFlB,EAISzC,IAAI,CAAb,EAAgBA,IAAIyC,CAApB,EAA4BzC,GAA5B,EACIgF,EAAYhF,CAAZgF,IAAiBJ,EAAaM,UAAbN,CAAwB5E,CAAxB4E,CAAjBI;;AAEJL,kBAAQ,IAAIQ,IAAJ,CAAS,CAACH,CAAD,CAAT,EAAwB;AAC5BZ,wBAAM;AADsB,iBAAxB,CAARO;AACU,eATP,CAAP;AAoBOF,aArBX,CAqBkBD,CArBlB,CAgBI;AAKcA,WA5EX;AAOHY,sBAwEJ,UAAoBjC,CAApB,EAAyBkC,CAAzB,EAAyBA;AACrB,gBAAIC,IAAMC,SAASC,cAATD,CAAwBE,kBAAxBF,EAAV;AAAA,gBACIG,IAAOJ,EAAIK,aAAJL,CAAkB,MAAlBA,CADX;AAEAA,cAAIM,IAAJN,CAASO,WAATP,CAAqBI,CAArBJ;AACA,gBAAIQ,IAAIR,EAAIK,aAAJL,CAAkB,GAAlBA,CAAR;AAIA,mBAHAA,EAAIS,IAAJT,CAASO,WAATP,CAAqBQ,CAArBR,GACAI,EAAKM,IAALN,GAAYL,CADZC,EAEAQ,EAAEE,IAAFF,GAAS3C,CAFTmC,EAGOQ,EAAEE,IAAT;AAASA,WAvFN;AAQHC,wBA0GJ,UAAsB9C,CAAtB,EAAsBA;AAClB,gBAAI+C,IAAU,GAAd;AACGC,cAAWC,IAAXD,CAAgBE,OAAhBF,CAAwBG,SAAxBH,KAGChD,MAAS,KAAMoD,IAAN,CAAWpD,CAAX,IAAkB,GAAlB,GAAwB,GAAjCA,IAAyC,IAAIqD,IAAJ,EAAR,CAAoBC,OAApB,EAHlCN;AAMH,mBAAO,IAAIzB,OAAJ,CAAY,UAAUC,CAAV,EAAUA;AACzB,kBASI+B,CATJ;AAAA,kBAAIC,IAAU,IAAIC,cAAJ,EAAd;;AAUA,kBARAD,EAAQE,kBAARF,GAeA;AACI,oBAA2B,MAAvBA,EAAQG,UAAZ,EAA8B;AAE9B,oBAAuB,QAAnBH,EAAQI,MAAZ,EAOI,aANGL,IACC/B,EAAQ+B,CAAR/B,CADD+B,GAGCM,EAAK,4BAA4B7D,CAA5B,GAAkC,YAAlC,GAAiDwD,EAAQI,MAA9DC,CAGJ;AAGJ,oBAAIC,IAAU,IAAIC,UAAJ,EAAd;AACAD,kBAAQE,SAARF,GAAoB;AAChB,sBAAI9C,IAAU8C,EAAQG,MAARH,CAAelC,KAAfkC,CAAqB,GAArBA,EAA0B,CAA1BA,CAAd;AACAtC,oBAAQR,CAARQ;AAAQR,iBAFZ8C,EAIAA,EAAQI,aAARJ,CAAsBN,EAAQW,QAA9BL,CAJAA;AAI8BK,eAjClCX,EACAA,EAAQY,SAARZ,GAmCA;AACOD,oBACC/B,EAAQ+B,CAAR/B,CADD+B,GAGCM,EAAK,gBAAgBd,CAAhB,GAA0B,sCAA1B,GAAmE/C,CAAxE6D,CAHDN;AAGyEvD,eAxChFwD,EAEAA,EAAQa,YAARb,GAAuB,MAFvBA,EAGAA,EAAQc,OAARd,GAAkBT,CAHlBS,EAIAA,EAAQe,IAARf,CAAa,KAAbA,EAAoBxD,CAApBwD,EAAoBxD,CAAK,CAAzBwD,CAJAA,EAKAA,EAAQgB,IAARhB,EALAA,EAQGR,EAAWC,IAAXD,CAAgBE,OAAhBF,CAAwByB,gBAA3B,EAA6C;AACzC,oBAAI7C,IAAQoB,EAAWC,IAAXD,CAAgBE,OAAhBF,CAAwByB,gBAAxBzB,CAAyCpB,KAAzCoB,CAA+C,GAA/CA,CAAZ;AACGpB,qBAASA,EAAM,CAANA,CAATA,KACC2B,IAAc3B,EAAM,CAANA,CADfA;AAkCP;;AAAA,uBAASiC,CAAT,CAAca,CAAd,EAAcA;AACVC,wBAAQC,KAARD,CAAcD,CAAdC,GACAnD,EAAQ,EAARA,CADAmD;AACQ;AAAA,aAjDT,CAAP;AAiDgB,WA3Kb;AASHE,gBAkFIC,IAAQ,CAARA,EAEG;AACH,mBAAO,OAIK,UAAUC,KAAKC,MAALD,KAAgBA,KAAKE,GAALF,CAAS,EAATA,EAAa,CAAbA,CAAhBA,IAAmC,CAA7C,EAAgDG,QAAhD,CAAyD,EAAzD,CAJL,EAImEC,KAJnE,CAImEA,CAAO,CAJ1E,IAA0BL,GAAjC;AAAiCA,WArFrCD,CATG;AAUHO,iBA8KJ,UAAeC,CAAf,EAAeA;AACX,mBAAO,UAAUC,CAAV,EAAUA;AACb,qBAAO,IAAI/D,OAAJ,CAAY,UAAUC,CAAV,EAAUA;AACzB+D,2BAAW;AACP/D,oBAAQ8D,CAAR9D;AAAQ8D,iBADZC,EAEGF,CAFHE;AAEGF,eAHA,CAAP;AAGOA,aAJX;AAIWA,WA7LR;AAWHG,mBAuLJ,UAAiBC,CAAjB,EAAiBA;AAGb,iBAFA,IAAIC,IAAQ,EAAZ,EACIpG,IAASmG,EAAUnG,MADvB,EAESzC,IAAI,CAAb,EAAgBA,IAAIyC,CAApB,EAA4BzC,GAA5B,EAAiC6I,EAAMC,IAAND,CAAWD,EAAU5I,CAAV4I,CAAXC;;AACjC,mBAAOA,CAAP;AAAOA,WAtMJ;AAYHE,uBA6LJ,UAAqBhG,CAArB,EAAqBA;AACjB,mBAAOA,EAAOC,OAAPD,CAAe,IAAfA,EAAqB,KAArBA,EAA4BC,OAA5BD,CAAoC,KAApCA,EAA2C,KAA3CA,CAAP;AAAkD,WA1M/C;AAaHiG,qBA0FJ,UAAmBC,CAAnB,EAAmBA;AACf,mBAAO,IAAIvE,OAAJ,CAAY,UAAUC,CAAV,EAAmBuE,CAAnB,EAAmBA;AAClC,kBAAIC,IAAQ,IAAIC,KAAJ,EAAZ;AACAD,gBAAME,MAANF,GAAe;AACXxE,kBAAQwE,CAARxE;AAAQwE,eADZA,EAGAA,EAAMG,OAANH,GAAgBD,CAHhBC,EAIAA,EAAMI,GAANJ,GAAYF,CAJZE;AAIYF,aANT,CAAP;AAMgBA,WA9Gb;AAcHO,iBA+LJ,UAAeC,CAAf,EAAeA;AACX,gBAAIC,IAAaC,EAAGF,CAAHE,EAAS,mBAATA,CAAjB;AAAA,gBACIC,IAAcD,EAAGF,CAAHE,EAAS,oBAATA,CADlB;AAEA,mBAAOF,EAAKI,WAALJ,GAAmBC,CAAnBD,GAAgCG,CAAvC;AAAuCA,WAhNpC;AAeHE,kBAoMJ,UAAgBL,CAAhB,EAAgBA;AACZ,gBAAIM,IAAYJ,EAAGF,CAAHE,EAAS,kBAATA,CAAhB;AAAA,gBACIK,IAAeL,EAAGF,CAAHE,EAAS,qBAATA,CADnB;AAEA,mBAAOF,EAAKQ,YAALR,GAAoBM,CAApBN,GAAgCO,CAAvC;AAAuCA;AAtNpC,SAAP;AA0FA,YACQ/B,CADR;;AAlDA,iBAAShF,CAAT,CAAwBE,CAAxB,EAAwBA;AACpB,cAAI+G,IAAQ,kBAAkBC,IAAlB,CAAuBhH,CAAvB,CAAZ;AACA,iBAAI+G,IAAcA,EAAM,CAANA,CAAdA,GACQ,EADZ;AA+KJ;;AAAA,iBAASP,CAAT,CAAYF,CAAZ,EAAkBW,CAAlB,EAAkBA;AACd,cAAInJ,IAAQrB,OAAOyK,gBAAPzK,CAAwB6J,CAAxB7J,EAA8B0K,gBAA9B1K,CAA+CwK,CAA/CxK,CAAZ;AACA,iBAAO2K,WAAWtJ,EAAM+B,OAAN/B,CAAc,IAAdA,EAAoB,EAApBA,CAAXsJ,CAAP;AAAsC;AApjBnCC,OAwVX,EAxVA;AAAA,UACIC,IAujBJ;AACI,YAAIC,IAAY,6BAAhB;AAEA,eAAO;AACHC,qBAyCJ,UAAmB5H,CAAnB,EAA2BsC,CAA3B,EAAoCxE,CAApC,EAAoCA;AAChC,mBAcA;AACI,sBAAQ+J,EAAc7H,CAAd6H,CAAR;AAfAC,aAcJ,KAd8BnG,QAAQC,OAARD,CAAgB3B,CAAhB2B,CAc9B,GAZOA,QAAQC,OAARD,CAAgB3B,CAAhB2B,EACFoG,IADEpG,CACGqG,CADHrG,EAEFoG,IAFEpG,CAEG,UAAUsG,CAAV,EAAUA;AACZ,kBAAIC,IAAOvG,QAAQC,OAARD,CAAgB3B,CAAhB2B,CAAX;AAMA,qBALAsG,EAAKE,OAALF,CAAa,UAAU7H,CAAV,EAAUA;AACnB8H,oBAAOA,EAAKH,IAALG,CAAU,UAAUlI,CAAV,EAAUA;AACvB,yBAAOoI,EAAOpI,CAAPoI,EAAehI,CAAfgI,EAAoB9F,CAApB8F,EAA6BtK,CAA7BsK,CAAP;AAAoCtK,iBADjCoK,CAAPA;AACwCpK,eAF5CmK,GAKOC,CAAP;AAAOA,aATRvG,CAFP;AAWeuG,WAtDZ;AAEHL,yBAAeA,CAFZ;AAGHxE,gBAAM;AACF2E,sBAAUA,CADR;AAEFI,oBAAQA;AAFN;AAHH,SAAP;;AASA,iBAASP,CAAT,CAAuB7H,CAAvB,EAAuBA;AACnB,kBAAqC,CAArC,KAAOA,EAAOuB,MAAPvB,CAAc2H,CAAd3H,CAAP;AAGJ;;AAAA,iBAASgI,CAAT,CAAkBhI,CAAlB,EAAkBA;AAGd,eAFA,IACImH,CADJ,EAAI9C,IAAS,EAEb,EAA4C,UAApC8C,IAAQQ,EAAUP,IAAVO,CAAe3H,CAAf2H,CAA4B,CAA5C,GACItD,EAAO0B,IAAP1B,CAAY8C,EAAM,CAANA,CAAZ9C;;AAEJ,iBAAOA,EAAOgE,MAAPhE,CAAc,UAAUjE,CAAV,EAAUA;AAC3B,oBAAQN,EAAKwB,SAALxB,CAAeM,CAAfN,CAAR;AAAuBM,WADpBiE,CAAP;AAKJ;;AAAA,iBAAS+D,CAAT,CAAgBpI,CAAhB,EAAwBI,CAAxB,EAA6BkC,CAA7B,EAAsCxE,CAAtC,EAAsCA;AAClC,iBAAO6D,QAAQC,OAARD,CAAgBvB,CAAhBuB,EACFoG,IADEpG,CACG,UAAUvB,CAAV,EAAUA;AACZ,mBAAOkC,IAAUxC,EAAKuC,UAALvC,CAAgBM,CAAhBN,EAAqBwC,CAArBxC,CAAVwC,GAA0ClC,CAAjD;AAAiDA,WAFlDuB,EAIFoG,IAJEpG,CAIG7D,KAAOgC,EAAKoD,YAJfvB,EAKFoG,IALEpG,CAKG,UAAU2G,CAAV,EAAUA;AACZ,mBAAOxI,EAAKqB,SAALrB,CAAewI,CAAfxI,EAAqBA,EAAKK,QAALL,CAAcM,CAAdN,CAArBA,CAAP;AAA0CM,WAN3CuB,EAQFoG,IAREpG,CAQG,UAAU4G,CAAV,EAAUA;AACZ,mBAAOvI,EAAOC,OAAPD,CAGf,UAAoBI,CAApB,EAAoBA;AAChB,qBAAO,IAAIoI,MAAJ,CAAW,oBAAoB1I,EAAKC,MAALD,CAAYM,CAAZN,CAApB,GAAuC,cAAlD,EAAkE,GAAlE,CAAP;AAJ0B2I,aAG9B,CAHyCrI,CAGzC,CAHeJ,EAAgC,OAAOuI,CAAP,GAAiB,IAAjDvI,CAAP;AAAwD,WATzD2B,CAAP;AASgE;AA5lB1D+G,OAujBd,EAxjBA;AAAA,UAEIC,IAwnBJ;AACI,eAAO;AACHC,sBAMJ;AACI,mBAAOC,EAAQrG,QAARqG,EACFd,IADEc,CACG,UAAUC,CAAV,EAAUA;AACZ,qBAAOnH,QAAQoH,GAARpH,CACHmH,EAASE,GAATF,CAAa,UAAUG,CAAV,EAAUA;AACnB,uBAAOA,EAAQrH,OAARqH,EAAP;AAAerH,eADnBkH,CADGnH,CAAP;AAEuBC,aAJxBiH,EAQFd,IAREc,CAQG,UAAUK,CAAV,EAAUA;AACZ,qBAAOA,EAAWC,IAAXD,CAAgB,IAAhBA,CAAP;AAAuB,aATxBL,CAAP;AAS+B,WAjB5B;AAEHxF,gBAAM;AACFwF,qBAASA;AADP;AAFH,SAAP;;AAqBA,iBAASA,CAAT,GAASA;AACL,iBAAOlH,QAAQC,OAARD,CAAgB7B,EAAK8F,OAAL9F,CAAa0C,SAAS4G,WAAtBtJ,CAAhB6B,EACFoG,IADEpG,CAiBP,UAAqByH,CAArB,EAAqBA;AACjB,gBAAIC,IAAW,EAAf;AAQA,mBAPAD,EAAYjB,OAAZiB,CAAoB,UAAUE,CAAV,EAAUA;AAC1B;AACIxJ,kBAAK8F,OAAL9F,CAAawJ,EAAMD,QAANC,IAAkB,EAA/BxJ,EAAmCqI,OAAnCrI,CAA2CuJ,EAAStD,IAATsD,CAAc5K,IAAd4K,CAAmBA,CAAnBA,CAA3CvJ;AACF,eAFF,CAEE,OAAOyJ,CAAP,EAAOA;AACLxE,wBAAQyE,GAARzE,CAAY,wCAAwCuE,EAAMrG,IAA1D8B,EAAgEwE,EAAEjE,QAAFiE,EAAhExE;AAAkEO;AAAAA,aAJ1E8D,GAOOC,CAAP;AAAOA,WA1BJ1H,EAEFoG,IAFEpG,CAOP,UAA4B0H,CAA5B,EAA4BA;AACxB,mBAAOA,EACFhB,MADEgB,CACK,UAAUI,CAAV,EAAUA;AACd,qBAAOA,EAAKpI,IAALoI,KAAcC,QAAQC,cAA7B;AAA6BA,aAF9BN,EAIFhB,MAJEgB,CAIK,UAAUI,CAAV,EAAUA;AACd,qBAAO/B,EAAQG,aAARH,CAAsB+B,EAAKG,KAALH,CAAWlC,gBAAXkC,CAA4B,KAA5BA,CAAtB/B,CAAP;AAAyD,aAL1D2B,CAAP;AAKiE,WAb9D1H,EAGFoG,IAHEpG,CAGG,UAAUkI,CAAV,EAAUA;AACZ,mBAAOA,EAAMb,GAANa,CAAUC,CAAVD,CAAP;AAAiBC,WAJlBnI,CAAP;;AA6BA,mBAASmI,CAAT,CAAoBC,CAApB,EAAoBA;AAChB,mBAAO;AACHnI,uBAAS;AACL,oBAAIU,KAAWyH,EAAYC,gBAAZD,IAAgC,EAA3CzH,EAA+CW,IAAnD;AACA,uBAAOyE,EAAQE,SAARF,CAAkBqC,EAAYE,OAA9BvC,EAAuCpF,CAAvCoF,CAAP;AAA8CpF,eAH/C;AAKHkE,mBAAK;AACD,uBAAOuD,EAAYH,KAAZG,CAAkBxC,gBAAlBwC,CAAmC,KAAnCA,CAAP;AAA0C;AAN3C,aAAP;AAMkD;AAAA;AAnrB9CG,OAwnBhB,EA1nBA;AAAA,UAGIC,IAyrBJ;AACI,eAAO;AACHvC,qBA6BJ,SAASA,CAAT,CAAmBlB,CAAnB,EAAmBA;AACf,mBAAMA,aAAgB0D,OAAhB1D,GAcN,UAA0BA,CAA1B,EAA0BA;AACtB,kBAAI2D,IAAa3D,EAAKkD,KAALlD,CAAWa,gBAAXb,CAA4B,YAA5BA,CAAjB;AAEA,qBAAK2D,IAEE3C,EAAQE,SAARF,CAAkB2C,CAAlB3C,EACFK,IADEL,CACG,UAAU4C,CAAV,EAAUA;AACZ5D,kBAAKkD,KAALlD,CAAW6D,WAAX7D,CACI,YADJA,EAEI4D,CAFJ5D,EAGIA,EAAKkD,KAALlD,CAAW8D,mBAAX9D,CAA+B,YAA/BA,CAHJA;AAGmC,eALpCgB,EAQFK,IAREL,CAQG;AACF,uBAAOhB,CAAP;AAAOA,eATRgB,CAFF2C,GAAmB1I,QAAQC,OAARD,CAAgB+E,CAAhB/E,CAAxB;AAfG8I,aAYP,CAZwB/D,CAYxB,EAXKqB,IAWL,CAXU;AACF,qBAAIrB,aAAgBgE,gBAAhBhE,GACOiE,EAASjE,CAATiE,EAAevC,MAAfuC,EADPjE,GAGO/E,QAAQoH,GAARpH,CACH7B,EAAK8F,OAAL9F,CAAa4G,EAAKkE,UAAlB9K,EAA8BkJ,GAA9BlJ,CAAkC,UAAU+K,CAAV,EAAUA;AACxC,uBAAOjD,EAAUiD,CAAVjD,CAAP;AAAiBiD,eADrB/K,CADG6B,CAHX;AAK6BkJ,aAKrC,CAdMnE,GAAiC/E,QAAQC,OAARD,CAAgB+E,CAAhB/E,CAAvC;AAAuD+E,WA/BpD;AAEHrD,gBAAM;AACFsH,sBAAUA;AADR;AAFH,SAAP;;AAOA,iBAASA,CAAT,CAAkBG,CAAlB,EAAkBA;AACd,iBAAO;AACH1C,oBAGJ,UAAgBtK,CAAhB,EAAgBA;AACZ,qBAAIgC,EAAKwB,SAALxB,CAAegL,EAAQtE,GAAvB1G,IAAoC6B,QAAQC,OAARD,EAApC7B,GAEG6B,QAAQC,OAARD,CAAgBmJ,EAAQtE,GAAxB7E,EACFoG,IADEpG,CACG7D,KAAOgC,EAAKoD,YADfvB,EAEFoG,IAFEpG,CAEG,UAAU2G,CAAV,EAAUA;AACZ,uBAAOxI,EAAKqB,SAALrB,CAAewI,CAAfxI,EAAqBA,EAAKK,QAALL,CAAcgL,EAAQtE,GAAtB1G,CAArBA,CAAP;AAAkD0G,eAHnD7E,EAKFoG,IALEpG,CAKG,UAAU4G,CAAV,EAAUA;AACZ,uBAAO,IAAI5G,OAAJ,CAAY,UAAUC,CAAV,EAAmBuE,CAAnB,EAAmBA;AAClC2E,oBAAQxE,MAARwE,GAAiBlJ,CAAjBkJ,EACAA,EAAQvE,OAARuE,GAAkB3E,CADlB2E,EAEAA,EAAQtE,GAARsE,GAAcvC,CAFduC;AAEcvC,iBAHX,CAAP;AAGkBA,eATnB5G,CAFP;AAW0B4G;AAhBvB,WAAP;AAgB8BA;AAltBzBwC,OAyrBb,EA5rBA;AAAA,UAMIC,IAAiB;AAEjBnG,+BAAkBoG,CAFD;AAIjB1H,oBAAW;AAJM,OANrB;AAAA,UAaIH,IAAa;AACb8H,eAAOA,CADM;AAEbC,eAwFJ,UAAezE,CAAf,EAAqBpD,CAArB,EAAqBA;AACjB,iBAAO8H,EAAK1E,CAAL0E,EAAW9H,KAAW,EAAtB8H,EACFrD,IADEqD,CACG,UAAU3J,CAAV,EAAUA;AACZ,mBAAOA,EAAOM,SAAPN,EAAP;AAAcM,WAFfqJ,CAAP;AAEsBrJ,SA7FT;AAGbsJ,gBAmGJ,UAAgB3E,CAAhB,EAAsBpD,CAAtB,EAAsBA;AAElB,iBAAO8H,EAAK1E,CAAL0E,EADP9H,IAAUA,KAAW,EACd8H,EACFrD,IADEqD,CACG,UAAU3J,CAAV,EAAUA;AACZ,mBAAOA,EAAOM,SAAPN,CAAiB,YAAjBA,EAA+B6B,EAAQgI,OAARhI,IAAmB,CAAlD7B,CAAP;AAAyD,WAF1D2J,CAAP;AAEiE,SA1GpD;AAIb1J,gBA+GJ,UAAgBgF,CAAhB,EAAsBpD,CAAtB,EAAsBA;AAClB,iBAAO8H,EAAK1E,CAAL0E,EAAW9H,KAAW,EAAtB8H,EACFrD,IADEqD,CACGtL,EAAK0B,YADR4J,CAAP;AACe5J,SArHF;AAKb+J,qBAoEJ,UAAqB7E,CAArB,EAA2BpD,CAA3B,EAA2BA;AACvB,iBAAO8H,EAAK1E,CAAL0E,EAAW9H,KAAW,EAAtB8H,EACFrD,IADEqD,CACG,UAAU3J,CAAV,EAAUA;AACZ,mBAAOA,EAAO+J,UAAP/J,CAAkB,IAAlBA,EAAwBgK,YAAxBhK,CACH,CADGA,EAEH,CAFGA,EAGH3B,EAAK2G,KAAL3G,CAAW4G,CAAX5G,CAHG2B,EAIH3B,EAAKiH,MAALjH,CAAY4G,CAAZ5G,CAJG2B,EAKL6G,IALF;AAKEA,WAPH8C,CAAP;AAOU9C,SAjFG;AAMbjF,cAAM;AACFsF,qBAAWA,CADT;AAEFwB,kBAAQA,CAFN;AAGFrK,gBAAMA,CAHJ;AAIF4H,mBAASA,CAJP;AAKFpE,mBAAS;AALP;AANO,OAbjB;;AAiDA,eAAS4H,CAAT,CAAexE,CAAf,EAAqBpD,CAArB,EAAqBA;AAGjB,eAiFJ,UAAqBA,CAArB,EAAqBA;AAAAA,eAEuB,CAFvBA,KAEPA,EAAQuB,gBAFDvB,GAGbF,EAAWC,IAAXD,CAAgBE,OAAhBF,CAAwByB,gBAAxBzB,GAA2C4H,EAAenG,gBAH7CvB,GAKbF,EAAWC,IAAXD,CAAgBE,OAAhBF,CAAwByB,gBAAxBzB,GAA2CE,EAAQuB,gBALtCvB;AAKsCuB,eAGtB,CAHsBA,KAG7CvB,EAAQC,SAHqCsB,GAInDzB,EAAWC,IAAXD,CAAgBE,OAAhBF,CAAwBG,SAAxBH,GAAoC4H,EAAezH,SAJAsB,GAMnDzB,EAAWC,IAAXD,CAAgBE,OAAhBF,CAAwBG,SAAxBH,GAAoCE,EAAQC,SANOsB;AAvFvD6G,SAkFJ,CAnFIpI,IAAUA,KAAW,EAmFzB,GAjFW3B,QAAQC,OAARD,CAAgB+E,CAAhB/E,EACFoG,IADEpG,CACG,UAAU+E,CAAV,EAAUA;AACZ,iBAuHZ,SAASiF,CAAT,CAAmBjF,CAAnB,EAAyB2B,CAAzB,EAAiC9L,CAAjC,EAAiCA;AAC7B,mBAAKA,MAAQ8L,CAAR9L,IAAmB8L,EAAO3B,CAAP2B,CAAnB9L,GAEEoF,QAAQC,OAARD,CAAgB+E,CAAhB/E,EACFoG,IADEpG,CASP,UAAsB+E,CAAtB,EAAsBA;AAClB,qBAAIA,aAAgBkF,iBAAhBlF,GAA0C5G,EAAKmG,SAALnG,CAAe4G,EAAK3E,SAAL2E,EAAf5G,CAA1C4G,GACGA,EAAKiF,SAALjF,CAAKiF,CAAU,CAAfjF,CADP;AACsB,aAXnB/E,EAEFoG,IAFEpG,CAEG,UAAUkK,CAAV,EAAUA;AACZ,qBAAOC,EAAcpF,CAAdoF,EAAoBD,CAApBC,EAA2BzD,CAA3ByD,CAAP;AAAkCzD,aAHnC1G,EAKFoG,IALEpG,CAKG,UAAUkK,CAAV,EAAUA;AACZ,qBAgCR,UAAsBE,CAAtB,EAAgCF,CAAhC,EAAgCA;AAC5B,uBAAMA,aAAiBzB,OAAjByB,GAEClK,QAAQC,OAARD,GACFoG,IADEpG,CACGqK,CADHrK,EAEFoG,IAFEpG,CAEGsK,CAFHtK,EAGFoG,IAHEpG,CAGGuK,CAHHvK,EAIFoG,IAJEpG,CAIGwK,CAJHxK,EAKFoG,IALEpG,CAKG;AACF,yBAAOkK,CAAP;AAAOA,iBANRlK,CAFDkK,GAAkCA,CAAxC;;AAWA,yBAASG,CAAT,GAASA;AAGL,sBAAmB3M,CAAnB,EAA2BE,CAA3B;AAAmBF,sBAFTxC,OAAOyK,gBAAPzK,CAAwBkP,CAAxBlP,CAESwC,EAAQE,IAFkBsM,EAAMjC,KAEhCvK,EACXA,EAAO4K,OAAP5K,GAAgBE,EAAO0K,OAAP1K,GAAiBF,EAAO4K,OAAxC5K,GAGJ,UAAwBA,CAAxB,EAAgCE,CAAhC,EAAgCA;AAC5BO,sBAAK8F,OAAL9F,CAAaT,CAAbS,EAAqBqI,OAArBrI,CAA6B,UAAUtC,CAAV,EAAUA;AACnC+B,wBAAOgL,WAAPhL,CACI/B,CADJ+B,EAEIF,EAAOkI,gBAAPlI,CAAwB7B,CAAxB6B,CAFJE,EAGIF,EAAOmL,mBAAPnL,CAA2B7B,CAA3B6B,CAHJE;AAG+B/B,qBAJnCsC;AAHCsM,mBAEL,CAFoB/M,CAEpB,EAF4BE,CAE5B,CAJeF;AAgBvB;;AAAA,yBAAS4M,CAAT,GAASA;AACL,mBAAC,SAAD,EAAY,QAAZ,EAAsB9D,OAAtB,CAA8B,UAAU2C,CAAV,EAAUA;AAAAA,qBAIxC,UAA4BA,CAA5B,EAA4BA;AACxB,0BAAIlB,IAAQ/M,OAAOyK,gBAAPzK,CAAwBkP,CAAxBlP,EAAkCiO,CAAlCjO,CAAZ;AAAA,0BACIuE,IAAUwI,EAAMrC,gBAANqC,CAAuB,SAAvBA,CADd;AAGA,0BAAgB,OAAZxI,CAAY,IAAkB,WAAZA,CAAtB,EAA0C;AAE1C,0BAAIiL,IAAYvM,EAAKmF,GAALnF,EAAhB;AACA+L,wBAAMQ,SAANR,GAAkBA,EAAMQ,SAANR,GAAkB,GAAlBA,GAAwBQ,CAA1CR;AACA,0BAAIS,IAAe9J,SAASI,aAATJ,CAAuB,OAAvBA,CAAnB;AACA8J,wBAAaxJ,WAAbwJ,CAGA,UAAkCD,CAAlC,EAA6CvB,CAA7C,EAAsDlB,CAAtD,EAAsDA;AAClD,4BAAI2C,IAAW,MAAMF,CAAN,GAAkB,GAAlB,GAAwBvB,CAAvC;AAAA,4BACIb,IAAUL,EAAMK,OAANL,GAGd,UAAuBA,CAAvB,EAAuBA;AACnB,8BAAIxI,IAAUwI,EAAMrC,gBAANqC,CAAuB,SAAvBA,CAAd;AACA,iCAAOA,EAAMK,OAANL,GAAgB,YAAhBA,GAA+BxI,CAA/BwI,GAAyC,GAAhD;AAL0B4C,yBAG9B,CAH4C5C,CAG5C,CAHcA,GAQd,UAA6BA,CAA7B,EAA6BA;AAEzB,iCAAO9J,EAAK8F,OAAL9F,CAAa8J,CAAb9J,EACFkJ,GADElJ,CAIP,UAAwBtC,CAAxB,EAAwBA;AACpB,mCAAOA,IAAO,IAAPA,GACHoM,EAAMrC,gBAANqC,CAAuBpM,CAAvBoM,CADGpM,IAEFoM,EAAMY,mBAANZ,CAA0BpM,CAA1BoM,IAAkC,aAAlCA,GAAkD,EAFhDpM,CAAP;AAEuD,2BAPpDsC,EAEFqJ,IAFErJ,CAEG,IAFHA,IAEW,GAFlB;AAViD2M,yBAQrD,CARyE7C,CAQzE,CATA;AAEA,+BAAOpH,SAASkK,cAATlK,CAAwB+J,IAAW,GAAXA,GAAiBtC,CAAjBsC,GAA2B,GAAnD/J,CAAP;AANqBmK,uBAGzB,CAHkDN,CAGlD,EAH6DvB,CAG7D,EAHsElB,CAGtE,CAHA0C,GACAT,EAAM/I,WAAN+I,CAAkBS,CAAlBT,CADAS;AAZAM,qBAGJ,CAHuB9B,CAGvB,CAJwCA;AACjBA,mBADvB;AA0CJ;;AAAA,yBAASoB,CAAT,GAASA;AACDH,+BAAoBc,mBAApBd,KAAyCF,EAAMiB,SAANjB,GAAkBE,EAAS7N,KAApE6N,GACAA,aAAoBgB,gBAApBhB,IAAsCF,EAAMmB,YAANnB,CAAmB,OAAnBA,EAA4BE,EAAS7N,KAArC2N,CADtCE;AAIR;;AAAA,yBAASI,CAAT,GAASA;AACCN,+BAAiBoB,UAAjBpB,KACNA,EAAMmB,YAANnB,CAAmB,OAAnBA,EAA4B,4BAA5BA,GAEMA,aAAiBqB,cAAjBrB,IACN,CAAC,OAAD,EAAU,QAAV,EAAoB1D,OAApB,CAA4B,UAAUgF,CAAV,EAAUA;AAClC,wBAAIjP,IAAQ2N,EAAMuB,YAANvB,CAAmBsB,CAAnBtB,CAAZ;AACK3N,yBAEL2N,EAAMjC,KAANiC,CAAYtB,WAAZsB,CAAwBsB,CAAxBtB,EAAmC3N,CAAnC2N,CAFK3N;AAE8BA,mBAJvC,CAJM2N;AAQiC3N;AAxHhCmP,eAgCf,CAhC4B3G,CAgC5B,EAhCkCmF,CAgClC,CAhCQ;AAA0BA,aAN3BlK,CAFFpF,GAAwCoF,QAAQC,OAARD,EAA7C;;AAgBA,qBAASmK,CAAT,CAAuBC,CAAvB,EAAiCF,CAAjC,EAAwCxD,CAAxC,EAAwCA;AACpC,kBAAIiF,IAAWvB,EAASnB,UAAxB;AACA,qBAAwB,MAApB0C,EAAS5N,MAAW,GAAUiC,QAAQC,OAARD,CAAgBkK,CAAhBlK,CAAV,GAEjB4L,EAAqB1B,CAArB0B,EAA4BzN,EAAK8F,OAAL9F,CAAawN,CAAbxN,CAA5ByN,EAAoDlF,CAApDkF,EACFxF,IADEwF,CACG;AACF,uBAAO1B,CAAP;AAAOA,eAFR0B,CAFP;;AAOA,uBAASA,CAAT,CAA8BC,CAA9B,EAAsCF,CAAtC,EAAgDjF,CAAhD,EAAgDA;AAC5C,oBAAIH,IAAOvG,QAAQC,OAARD,EAAX;AAUA,uBATA2L,EAASnF,OAATmF,CAAiB,UAAUzC,CAAV,EAAUA;AACvB3C,sBAAOA,EACFH,IADEG,CACG;AACF,2BAAOyD,EAAUd,CAAVc,EAAiBtD,CAAjBsD,CAAP;AAAwBtD,mBAFzBH,EAIFH,IAJEG,CAIG,UAAUuF,CAAV,EAAUA;AACRA,yBAAYD,EAAO1K,WAAP0K,CAAmBC,CAAnBD,CAAZC;AAA+BA,mBALpCvF,CAAPA;AAK2CuF,iBAN/CH,GASOpF,CAAP;AAAOA;AAAAA;AA5JAyD,WAuHnB,CAvH6BjF,CAuH7B,EAvHmCpD,EAAQ+E,MAuH3C,EAvH2CA,CAAQ,CAuHnD,CAvHY;AAAuC,SAFxC1G,EAIFoG,IAJEpG,CAIG+L,CAJH/L,EAKFoG,IALEpG,CAKGgM,CALHhM,EAMFoG,IANEpG,CAcP,UAAsBkK,CAAtB,EAAsBA;AACdvI,YAAQsK,OAARtK,KAAiBuI,EAAMjC,KAANiC,CAAYgC,eAAZhC,GAA8BvI,EAAQsK,OAAvDtK;AAEAA,YAAQmD,KAARnD,KAAeuI,EAAMjC,KAANiC,CAAYpF,KAAZoF,GAAoBvI,EAAQmD,KAARnD,GAAgB,IAAnDA;AACAA,YAAQyD,MAARzD,KAAgBuI,EAAMjC,KAANiC,CAAY9E,MAAZ8E,GAAqBvI,EAAQyD,MAARzD,GAAiB,IAAtDA;AAEAA,YAAQsG,KAARtG,IACA3F,OAAOmQ,IAAPnQ,CAAY2F,EAAQsG,KAApBjM,EAA2BwK,OAA3BxK,CAAmC,UAAUiB,CAAV,EAAUA;AACzCiN,cAAMjC,KAANiC,CAAYjN,CAAZiN,IAAwBvI,EAAQsG,KAARtG,CAAc1E,CAAd0E,CAAxBuI;AAAsCjN,WAD1CjB,CADA2F;AAKJ,iBAAOuI,CAAP;AAAOA,SAzBJlK,EAOFoG,IAPEpG,CAOG,UAAUkK,CAAV,EAAUA;AACZ,iBAyQZ,UAAwBnF,CAAxB,EAA8BD,CAA9B,EAAqCM,CAArC,EAAqCA;AACjC,mBAAOpF,QAAQC,OAARD,CAAgB+E,CAAhB/E,EACFoG,IADEpG,CACG,UAAU+E,CAAV,EAAUA;AAEZ,qBADAA,EAAKsG,YAALtG,CAAkB,OAAlBA,EAA2B,8BAA3BA,GACO,IAAIqH,aAAJ,EADoB,CACAC,iBADA,CACkBtH,CADlB,CAC3B;AAA6CA,aAH9C/E,EAKFoG,IALEpG,CAKG7B,EAAKkG,WALRrE,EAMFoG,IANEpG,CAMG,UAAUsM,CAAV,EAAUA;AACZ,qBAAO,2DAA2DA,CAA3D,GAAmE,kBAA1E;AAA0E,aAP3EtM,EASFoG,IATEpG,CASG,UAAUuM,CAAV,EAAUA;AACZ,qBAAO,oDAAoDzH,CAApD,GAA4D,YAA5D,GAA2EM,CAA3E,GAAoF,IAApF,GACHmH,CADG,GACa,QADpB;AACoB,aAXrBvM,EAaFoG,IAbEpG,CAaG,UAAUT,CAAV,EAAUA;AACZ,qBAAO,sCAAsCA,CAA7C;AAA6CA,aAd9CS,CAAP;AA1QewM,WAyQnB,CAzQkCtC,CAyQlC,EAxQgBvI,EAAQmD,KAARnD,IAAiBxD,EAAK2G,KAAL3G,CAAW4G,CAAX5G,CAwQjC,EAvQgBwD,EAAQyD,MAARzD,IAAkBxD,EAAKiH,MAALjH,CAAY4G,CAAZ5G,CAuQlC,CAzQY;AAEkC4G,SAVnC/E,CAAP;AAgGJ;;AAAA,eAASyJ,CAAT,CAAcgD,CAAd,EAAuB9K,CAAvB,EAAuBA;AACnB,eAAO4H,EAAMkD,CAANlD,EAAe5H,CAAf4H,EACFnD,IADEmD,CACGpL,EAAKmG,SADRiF,EAEFnD,IAFEmD,CAEGpL,EAAK0F,KAAL1F,CAAW,GAAXA,CAFHoL,EAGFnD,IAHEmD,CAGG,UAAU9E,CAAV,EAAUA;AACZ,cAAI3E,IAKZ,UAAmB2M,CAAnB,EAAmBA;AACf,gBAAI3M,IAASe,SAASI,aAATJ,CAAuB,QAAvBA,CAAb;;AAIA,gBAHAf,EAAOgF,KAAPhF,GAAe6B,EAAQmD,KAARnD,IAAiBxD,EAAK2G,KAAL3G,CAAWsO,CAAXtO,CAAhC2B,EACAA,EAAOsF,MAAPtF,GAAgB6B,EAAQyD,MAARzD,IAAkBxD,EAAKiH,MAALjH,CAAYsO,CAAZtO,CADlC2B,EAGI6B,EAAQsK,OAAZ,EAAqB;AACjB,kBAAIS,IAAM5M,EAAO+J,UAAP/J,CAAkB,IAAlBA,CAAV;AACA4M,gBAAIC,SAAJD,GAAgB/K,EAAQsK,OAAxBS,EACAA,EAAIE,QAAJF,CAAa,CAAbA,EAAgB,CAAhBA,EAAmB5M,EAAOgF,KAA1B4H,EAAiC5M,EAAOsF,MAAxCsH,CADAA;AAIJ;;AAAA,mBAAO5M,CAAP;AAhBiB+M,WAKrB,CAL+BJ,CAK/B,CALQ;;AAEA,iBADA3M,EAAO+J,UAAP/J,CAAkB,IAAlBA,EAAwBgN,SAAxBhN,CAAkC2E,CAAlC3E,EAAyC,CAAzCA,EAA4C,CAA5CA,GACOA,CAAP;AAAOA,SANRyJ,CAAP;AA+JJ;;AAAA,eAASwC,CAAT,CAAoBhH,CAApB,EAAoBA;AAChB,eAAOiC,EAAUC,UAAVD,GACFZ,IADEY,CACG,UAAUsB,CAAV,EAAUA;AACZ,cAAIyE,IAAYlM,SAASI,aAATJ,CAAuB,OAAvBA,CAAhB;AAGA,iBAFAkE,EAAK5D,WAAL4D,CAAiBgI,CAAjBhI,GACAgI,EAAU5L,WAAV4L,CAAsBlM,SAASkK,cAATlK,CAAwByH,CAAxBzH,CAAtBkM,CADAhI,EAEOA,CAAP;AAAOA,SALRiC,CAAP;AASJ;;AAAA,eAASgF,CAAT,CAAsBjH,CAAtB,EAAsBA;AAClB,eAAOyD,EAAOvC,SAAPuC,CAAiBzD,CAAjByD,EACFpC,IADEoC,CACG;AACF,iBAAOzD,CAAP;AAAOA,SAFRyD,CAAP;AAnSA;;AAAA,YACAzN,EAAOD,OAAPC,GAAiB0G,CADjB;AA/BR,O;AAAA,G;ACMA1G,MAAOD,OAAPC,GANA,UAAyBiS,CAAzB,EAAmCC,CAAnC,EAAmCA;AACjC,YAAMD,aAAoBC,CAA1B,GACE,MAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AAAoB,KAIxBnS,EACAA,EAAOD,OAAPC,CAAe,SAAfA,IAA4BA,EAAOD,OADnCC,EAC4CA,EAAOD,OAAPC,CAAe2B,UAAf3B,GAAe2B,CAAa,CADxE3B;AACwE,G;ACPxE,aAASoS,CAAT,CAA2BvP,CAA3B,EAAmCwP,CAAnC,EAAmCA;AACjC,WAAK,IAAI9R,IAAI,CAAb,EAAgBA,IAAI8R,EAAMrP,MAA1B,EAAkCzC,GAAlC,EAAuC;AACrC,YAAI+R,IAAaD,EAAM9R,CAAN8R,CAAjB;AACAC,UAAWnR,UAAXmR,GAAwBA,EAAWnR,UAAXmR,IAAWnR,CAAc,CAAjDmR,EACAA,EAAW9P,YAAX8P,GAAW9P,CAAe,CAD1B8P,EAEI,WAAWA,CAAX,KAAuBA,EAAW7P,QAAX6P,GAAW7P,CAAW,CAA7C,CAFJ6P,EAGArR,OAAOC,cAAPD,CAAsB4B,CAAtB5B,EAA8BqR,EAAWxQ,GAAzCb,EAA8CqR,CAA9CrR,CAHAqR;AAG8CA;AAUlDtS;;AAAAA,MAAOD,OAAPC,GANA,UAAsBkS,CAAtB,EAAmCK,CAAnC,EAA+CC,CAA/C,EAA+CA;AAG7C,aAFID,KAAYH,EAAkBF,EAAY/P,SAA9BiQ,EAAyCG,CAAzCH,CAAZG,EACAC,KAAaJ,EAAkBF,CAAlBE,EAA+BI,CAA/BJ,CADbG,EAEGL,CAAP;AAAOA,KAGTlS,EACAA,EAAOD,OAAPC,CAAe,SAAfA,IAA4BA,EAAOD,OADnCC,EAC4CA,EAAOD,OAAPC,CAAe2B,UAAf3B,GAAe2B,CAAa,CADxE3B;AACwE,G;ACFxEA,MAAOD,OAAPC,GAfA,UAAuC2C,CAAvC,EAA+CC,CAA/C,EAA+CA;AAC7C,UAAc,QAAVD,CAAJ,EAAoB,OAAO,EAAP;AACpB,UAEIb,CAFJ;AAAA,UAESvB,CAFT;AAAA,UAAIsC,IAAS,EAAb;AAAA,UACI4P,IAAaxR,OAAOmQ,IAAPnQ,CAAY0B,CAAZ1B,CADjB;;AAIA,WAAKV,IAAI,CAAT,EAAYA,IAAIkS,EAAWzP,MAA3B,EAAmCzC,GAAnC,EACEuB,IAAM2Q,EAAWlS,CAAXkS,CAAN3Q,EACIc,EAASK,OAATL,CAAiBd,CAAjBc,KAAyB,CAAzBA,KACJC,EAAOf,CAAPe,IAAcF,EAAOb,CAAPa,CADVC,CADJd;;AAKF,aAAOe,CAAP;AAAOA,KAGT7C,EACAA,EAAOD,OAAPC,CAAe,SAAfA,IAA4BA,EAAOD,OADnCC,EAC4CA,EAAOD,OAAPC,CAAe2B,UAAf3B,GAAe2B,CAAa,CADxE3B;AACwE,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdzD;;AAAA,sBAAC0S,CAAD,EAACA;AAAsB,UAAdC,IAAcC,iEAAP,EAAO;AAAA,UAC5BC,IAAKH,EAAOI,QADgB;AAGlCJ,QAAOhM,UAAPgM,GAAoBhM,GAApBgM;;AAGA,UAAMK,IAAS;AAAA,gBAAO,CAAC,GAAD,IAAC,CAAQ,GAAT,GAAS,CAAO,GAAhB,GAAgB,CAAO,GAAvB,GAAuB,CAAO,IAArC,EAA2CxP,OAA3C,CAAmD,QAAnD,EAA6D;AAAC,kBACxE3C,IAAIoS,OAAOC,eAAPD,CAAuB,IAAIxN,UAAJ,CAAe,CAAf,CAAvBwN,EAA0C,CAA1CA,IAA+C,MAAMpS,IAAI,CADW,EACRgI,QADQ,CACC,EADD;AACC,SAD/D;AAC+D,OAD9E;AAAA,UAIMsK,IAAU,UAAClJ,CAAD,EAACA;AAAiC,YAA3B2I,IAA2BC,iEAApB,EAAoB;AAAA,YAAhBO,IAAgBP;AAAA,YAAXQ,IAAWR;AAC9ClM,YAAWiI,MAAXjI,CAAkBsD,CAAlBtD,EAAwBiM,CAAxBjM,EACK2E,IADL3E,CACU;AAAO,iBAAIyM,KAAOA,EAAItH,CAAJsH,CAAX;AAAetH,SADhCnF,EAEK2M,KAFL3M,CAEW;AAAG,iBAAI0M,KAAUA,EAAOE,CAAPF,CAAd;AAAqBE,SAFnC5M;AAEmC4M,OAPvC;;AAUAT,QAAGU,GAAHV,CAAO,YAAPA,EAAqB;AAAA,eAAME,GAAN;AAAMA,OAA3BF,GAEAA,EAAGU,GAAHV,CAAO,iBAAPA,EAA0B;AACtB,YAAMW,IAAKd,EAAOe,UAAPf,GAAoBgB,KAApBhB,EAAX;AAEAQ,UAAQM,CAARN,EAAY;AACRtE,mBAAS+D,EAAK/D,OADN;AAERvE,kBAAQ,GAFA;AAGRxD,sBAAa,CAHL;AAIRqG,iBAAO5K,EAAF;AACD,gCAAoB;AADnB,WAAE,EAEAoQ,EAAOe,UAAPf,GAAoBiB,QAApBjB,EAFA;AAJC,SAAZQ,EADY;AAAO,iBAAIR,EAAOkB,OAAPlB,CAAemB,iBAAfnB,GAAmCoB,YAAnCpB,CAAgD7G,CAAhD6G,CAAJ;AAAoD7G,SACvEqH,EAQQP,EAAKoB,iBARbb;AAQaa,OAXjBlB,CAFAA,EAgBAA,EAAGU,GAAHV,CAAO,kBAAPA,EAA2B;AACvBH,UAAOkB,OAAPlB,CAAemB,iBAAfnB,GACKsB,aADLtB,CACKsB,CAAc,CADnBtB,GAEAA,EAAOuB,KAAPvB,EAFAA;AAEOuB,OAHXpB,CAhBAA,EAsBAA,EAAGU,GAAHV,CAAO,iBAAPA,EAA0B;AACtBH,UAAOkB,OAAPlB,CAAemB,iBAAfnB,GACKwB,MADLxB,CACYC,EAAKwB,QADjBzB,EAC2BC,EAAKyB,aADhC1B;AACgC0B,OAFpCvB,CAtBAA;AAwBoCuB,KAxCzB;AAAA,Q,QAAA;AAAA,Q,UAAA;AAAA,QCFFC,IAAa,WDEX;AAAA,QCDXC,IAAgB,UDCL;AAAA,QCAXC,IAAmB,WDAR;;;;;;;;;;;;;;;;;;;;;;;;;;AEAA;;AAAA,sBAAC7B,CAAD,EAACA;AAAsB,UAC9B8B,CAD8B;AAAA,UAAd7B,IAAcC,iEAAP,EAAO;AAAA,UAE5B6B,IAAK/B,EAAOgC,cAFgB;AAAA,UAG5BC,IAAcN,CAHc;AAAA,UAI5BO,IAAWjC,EAAKkC,eAJY;AAAA,UAO5BC,IAAQ;AAAA,eAAMN,CAAN;AAAMA,OAPc;AAAA,UAQ5BO,IAAa,UAAC5B,CAAD,EAACA;AAChB,YAAIqB,CAAJ,EACIrB,EAAIqB,CAAJrB,EADJ,KAEO;AACH,cAEMjM,KAFY/G,OAAO6U,SAAP7U,IAAoBA,OAAO8U,YAA3B9U,IACdA,OAAO+U,eADO/U,IACYA,OAAOgV,WAC/BjO,EAAoBe,IAApBf,CAAyByL,EAAKyC,MAA9BlO,EAAsCyL,EAAK0C,gBAA3CnO,CAFN;AAAA,cAGMoO,IAAU;AAAA,mBAAMb,EAAGa,OAAHb,CAAWE,CAAXF,EAAwBvN,EAAQqO,SAAhCd,CAAN;AAAsCc,WAHtD;;AAIArO,YAAQ2C,OAAR3C,GAAkBoO,CAAlBpO,EACAA,EAAQsO,SAARtO,GAAoB;AAAA,aAChBsN,IAAKtN,EAAQS,MADG,EAEbkC,OAFa,GAEHyL,CAFG,EAGhBnC,EAAIqB,CAAJrB,CAHgB;AAGZqB,WAJRtN,EAMAA,EAAQuO,eAARvO,GAA0B;AACT2F,cAAE6I,aAAF7I,CAAgBlF,MAAhBkF,CAAuB8I,iBAAvB9I,CAAyC+H,CAAzC/H,EAAmD;AAAE+I,uBAAS;AAAX,aAAnD/I,EACRgJ,WADQhJ,CACI,IADJA,EACU,IADVA,EACgB;AAAEiJ,uBAAQ;AAAV,aADhBjJ;AAC0B,WAR3C3F;AAQ2C;AAAA,OAxBjB;AAAA,UA8B5B6O,IAAiB;AACnB,eAAOvB,EAAGwB,WAAHxB,CAAe,CAACI,CAAD,CAAfJ,EAA2B,WAA3BA,EAAwCyB,WAAxCzB,CAAoDI,CAApDJ,CAAP;AAA2DI,OA/B7B;AAAA,UAiC5BsB,IAAsB;AACpB1B,YACArB,EAAI4C,GAAJ5C,CADAqB,GAGAO,EAAW;AAAE,iBAAI5B,EAAI4C,GAAJ5C,CAAJ;AAAQ4C,SAArBhB,CAHAP;AAGqBuB,OArCK;;AA0ClCtB,QAAGlB,GAAHkB,CAAOE,CAAPF,EAAoB;AAChB0B,mBAAW,SADK;AAEhBC,oBAAY,QAFI;AAGhBC,0BAAkB,EAHF;AAIhBC,qBAAY,CAJI;AAKhBxB,gBALgB;AAOhBiB,yBAPgB;AAShBQ,eATgB,UASVC,CATU,EASVA;AACFC,eAAKN,SAALM,GAAiBD,CAAjBC;AAAiBD,SAVL;AAahBE,gBAbgB,UAaTC,CAbS,EAaTA;AACHF,eAAKL,UAALK,GAAkBE,CAAlBF;AAAkBE,SAdN;AAiBhB7C,sBAjBgB,UAiBH8C,CAjBG,EAiBHA;AACTH,eAAKJ,gBAALI,GAAwBG,CAAxBH;AAAwBG,SAlBZ;AAqBhB5C,uBArBgB,UAqBFsC,CArBE,EAqBFA;AACVG,eAAKH,UAALG,GAAKH,EAAeA,CAApBG;AAAoBH,SAtBR;AAyBhBO,cAzBgB,UAyBXzF,CAzBW,EAyBL+B,CAzBK,EAyBAC,CAzBA,EAyBAA;AAAQ;AACpB8C,YAAoB;AAChB,gBAAMhP,IAAU4P,EAAK1V,GAAL0V,CAASzV,EAAK+U,UAAdU,CAAhB;AACA5P,cAAQ2C,OAAR3C,GAAkBkM,CAAlBlM,EACAA,EAAQsO,SAARtO,GAAoB;AAChBiM,mBAAOA,EAAIjM,EAAQS,MAAZwL,CAAPA;AAAmBxL,aAFvBT;AAEuBS,WAJ3BuO;AAI2BvO,SA9Bf;AAmChBoP,iBAnCgB,UAmCR5D,CAnCQ,EAmCHC,CAnCG,EAmCHA;AACT8C,YAAoB;AAChB,gBAAMhP,IAAU4P,EAAKE,MAALF,EAAhB;AACA5P,cAAQ2C,OAAR3C,GAAkBkM,CAAlBlM,EACAA,EAAQsO,SAARtO,GAAoB;AAChBiM,mBAAOA,EAAIjM,EAAQS,MAAZwL,CAAPA;AAAmBxL,aAFvBT;AAEuBS,WAJ3BuO;AAI2BvO,SAxCf;AA6ChBsM,eA7CgB,UA6CVrI,CA7CU,EA6CJuH,CA7CI,EA6CCC,CA7CD,EA6CCA;AAAQ;AACrB8C,YAAoB;AAChB,gBAAMhP,IAAU4P,EAAKG,GAALH;AACZH,mBAAKtV,EAAK+U,UADE;AAEZI,kBAAInV,EAAK8U,SAFG;AAGZe,wBAAU7V,EAAKiV,UAHH;AAIZM,yBAAWvV,EAAKgV;AAJJ,eAKTzK,CALS,EAAhB;AAOA1E,cAAQ2C,OAAR3C,GAAkBkM,CAAlBlM,EACAA,EAAQsO,SAARtO,GAAoBiM,CADpBjM;AACoBiM,WATxB+C;AASwB/C,SAvDZ;AA2DhBgE,gBA3DgB,UA2DTvL,CA3DS,EA2DHuH,CA3DG,EA2DEC,CA3DF,EA2DEA;AAAQ,cACduD,IAAkB/K,EAAlB+K,GADc;AAAA,cACNS,IADMvW,IACI+K,CADJ;AAEtBsK,YAAoB;AAChB,gBAAMhP,IAAU4P,EAAK1V,GAAL0V,CAASH,CAATG,CAAhB;AACA5P,cAAQ2C,OAAR3C,GAAkBkM,CAAlBlM,EACAA,EAAQsO,SAARtO,GAAoB;AAChB4P,gBAAKG,GAALH;AAAWH;AAAX,iBAAmBzP,EAAQS,MAA3B,GAAsCyP,CAAtC,IACAjE,KAAOA,EAAIjM,EAAQS,MAAZwL,CADP2D;AACmBnP,aAHvBT;AAGuBS,WAL3BuO;AAK2BvO,SAlEf;AAuEhBuM,gBAvEgB,UAuETf,CAvES,EAuEJC,CAvEI,EAuEI5K,CAvEJ,EAuEIA;AAAO;AACvB0N,YAAoB;AAChB,gBAAMhP,IAAU4P,EAAK5C,MAAL4C,CAAYtO,KAASnH,EAAK+U,UAA1BU,CAAhB;AACA5P,cAAQ2C,OAAR3C,GAAkBkM,CAAlBlM,EACAA,EAAQsO,SAARtO,GAAoBiM,CADpBjM;AACoBiM,WAHxB+C;AAGwB/C;AA3EZ,OAApBsB;AA2EgCtB,KArHrB;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;;AAAA,sBAACT,CAAD,EAACA;AAAsB,UAAdC,IAAcC,iEAAP,EAAO;AAAA,UAC5B6B,IAAK/B,EAAOgC,cADgB;AAAA,UAE5BC,IAAcL,CAFc;AAAA,UAG5B+C,IAAS5C,EAAGrT,GAAHqT,CAAO,QAAPA,CAHmB;AAMlCA,QAAGlB,GAAHkB,CAAOE,CAAPF,EAAoB;AAChB0B,mBAAW,SADK;AAEhBC,oBAAY,QAFI;AAGhBC,0BAAkB,EAHF;AAIhBC,qBAAY,CAJI;AAMhBC,eANgB,UAMVC,CANU,EAMVA;AACFC,eAAKN,SAALM,GAAiBD,CAAjBC;AAAiBD,SAPL;AAUhBE,gBAVgB,UAUTC,CAVS,EAUTA;AACHF,eAAKL,UAALK,GAAkBE,CAAlBF;AAAkBE,SAXN;AAchB7C,sBAdgB,UAcH8C,CAdG,EAcHA;AACTH,eAAKJ,gBAALI,GAAwBG,CAAxBH;AAAwBG,SAfZ;AAkBhB5C,uBAlBgB,UAkBFsC,CAlBE,EAkBFA;AACVG,eAAKH,UAALG,GAAKH,EAAeA,CAApBG;AAAoBH,SAnBR;AAsBhBO,cAtBgB,UAsBXzF,CAtBW,EAsBL+B,CAtBK,EAsBAC,CAtBA,EAsBAA;AACZ,cAAMkE,IAAUD,EAAOjW,GAAPiW,CAAW,SAAXA,CAAhB;AAAA,cACMV,IAAMW,EAAQC,QAARD,CAAiB,GAAjBA,IAAwBb,KAAKL,UAA7BkB,cAA8Cb,KAAKL,UAAnD,CADZ;AAEAiB,YAAOG,GAAPH,CAAW;AAAEC,qBAASA,IAAUX;AAArB,WAAXU,GACAA,EAAOR,IAAPQ,CAAYjG,CAAZiG,EAAkBlE,CAAlBkE,EAAuBjE,CAAvBiE,CADAA,EAEAA,EAAOG,GAAPH,CAAW;AAAEC;AAAF,WAAXD,CAFAA;AAEaC,SA3BD;AA8BhBP,iBA9BgB,UA8BR5D,CA9BQ,EA8BHC,CA9BG,EA8BHA;AACTiE,YAAOR,IAAPQ,CAAY,EAAZA,EAAgBlE,CAAhBkE,EAAqBjE,CAArBiE;AAAqBjE,SA/BT;AAkChBa,eAlCgB,UAkCVrI,CAlCU,EAkCJuH,CAlCI,EAkCCC,CAlCD,EAkCCA;AACb,cAAMqE,IAAWJ,EAAOjW,GAAPiW,CAAW,UAAXA,CAAjB;AAAA,cACMV,IAAMc,EAASF,QAATE,CAAkB,GAAlBA,IAAyBhB,KAAKL,UAA9BqB,cAA+ChB,KAAKL,UAApD,CADZ;AAEAzD,YAAK+E,UAAL/E,IAAmB0E,EAAOG,GAAPH,CAAW;AAAEI,sBAAUA,IAAWd;AAAvB,WAAXU,CAAnB1E,EACA0E,EAAOpD,KAAPoD;AACIV,iBAAKF,KAAKL,UADd;AAEII,gBAAIC,KAAKN,SAFb;AAGIe,sBAAUT,KAAKH,UAHnB;AAIIM,uBAAWH,KAAKJ;AAJpB,aAKOzK,CALP,GAMGuH,CANHkE,EAMQjE,CANRiE,CADA1E,EAQA0E,EAAOG,GAAPH,CAAW;AAAEI;AAAF,WAAXJ,CARA1E;AAQa8E,SA7CD;AAgDhBN,gBAhDgB,UAgDTvL,CAhDS,EAgDHuH,CAhDG,EAgDEC,CAhDF,EAgDEA;AACd,cAAMkE,IAAUD,EAAOjW,GAAPiW,CAAW,SAAXA,CAAhB;AAAA,cACMV,IAAQ/K,EAAR+K,GADN;AAEAA,cAAMW,EAAQC,QAARD,CAAiB,GAAjBA,IAAwBX,CAAxBW,cAAkCX,CAAlC,CAANA,EACAU,EAAOG,GAAPH,CAAW;AAAEC,qBAASA,IAAUX;AAArB,WAAXU,CADAV,EAEAU,EAAOR,IAAPQ,CAAY,EAAZA,EAAgB;AACZ,gBAAM/Q,IAAOqR,QAAKC,CAAL,GAAahM,CAAb,CAAb;AAAA,gBAEMiM,IAAYR,EAAOjW,GAAPiW,CAAW,UAAXA,CAFlB;AAGAV,gBAAMkB,EAAUN,QAAVM,CAAmB,GAAnBA,IAA0BlB,CAA1BkB,cAAoClB,CAApC,CAANA,EACAU,EAAOnQ,OAAPmQ,CAAeQ,IAAYlB,CAA3BU,EAAgC;AAAES,sBAHnB,MAGiB;AAAUxR;AAAV,aAAhC+Q,EAAkDlE,CAAlDkE,EAAuDjE,CAAvDiE,CADAV;AACuDvD,WAL3DiE,EAMGjE,CANHiE,CAFAV,EASAU,EAAOG,GAAPH,CAAW;AAAEC;AAAF,WAAXD,CATAV;AASaW,SA5DD;AA+DhBpD,gBA/DgB,UA+DTf,CA/DS,EA+DJC,CA/DI,EA+DI5K,CA/DJ,EA+DIA;AAChB,cAAMuP,IAAYV,EAAOjW,GAAPiW,CAAW,WAAXA,CAAlB;AAAA,cACIV,IAAMnO,KAASiO,KAAKL,UADxB;AAEAO,cAAMoB,EAAUR,QAAVQ,CAAmB,GAAnBA,IAA0BpB,CAA1BoB,cAAoCpB,CAApC,CAANA;AAEAU,YAAOnQ,OAAPmQ,CAAeU,IAAYpB,CAA3BU,EAAgC;AAAES,oBADnB;AACiB,WAAhCT,EAA4ClE,CAA5CkE,EAAiDjE,CAAjDiE;AAAiDjE;AApErC,OAApBqB;AAoEyDrB,KA1E9C;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;;AAAA,sBAACV,CAAD,EAACA;AAAsB,UAI9B8B,CAJ8B;AAAA,UAK9B3O,CAL8B;AAAA,UAM9BmS,CAN8B;AAAA,UAAdrF,IAAcC,iEAAP,EAAO;AAAA,UAC5B6B,IAAK/B,EAAOgC,cADgB;AAAA,UAE5BC,IAAcJ,CAFc;AAAA,UAO1B0D,IAAkCtF,EAAlCsF,MAP0B;AAAA,UAOlBC,IAA0BvF,EAA1BuF,UAPkB;AAAA,UAONC,IAAcxF,EAAdwF,SAPM;AAAA,UAQ5BC,IAAazF,EAAK0F,QARU;AAAA,UAW5BC,IAAS;AAAA,eAAMzS,CAAN;AAAMA,OAXa;AAAA,UAa5B0S,IAAqB,UAACpF,CAAD,EAACA;AACxB,YAAI6E,CAAJ,EAAgB,OAAO7E,EAAI6E,CAAJ7E,CAAP;AACXqF,iBAASC,IAATD,CAAcxV,MAAdwV,IAMDA,SAASE,GAATF,IAASE,CACTlE,IAAKgE,SAASG,SAATH,EADIE,EAENL,QAFMK,CAEGN,CAFHM,CANRF,KACDA,SAASI,aAATJ;AAAyBP,mBAAzB;AAAiCC,uBAAjC;AAA6CC;AAA7C,WAA2DxF,EAAKkG,cAAhE,IAAgEA,CAChErE,IAAKgE,SAASG,SAATH,EAD2DK,EAE7DR,QAF6DQ,CAEpDT,CAFoDS,CAD/DL;AAYDR,YAAaxD,EAAGwD,UAAHxD,CAAc7B,EAAKkC,eAAnBL,CAAbwD,EACA7E,EAAI6E,CAAJ7E,CADA6E;AACIA,OA5BsB;AAAA,UAwC5Bc,IAAc,UAAC3F,CAAD,EAACA;AACjBoF,UAAmB;AACf,cAAMQ,IAAKrG,EAAOkB,OAAPlB,CAAemB,iBAAfnB,EAAX;AACA7M,cAAMmT,EAAInT,GAAJmT,CAAQD,EAAG3C,UAAX4C,CAANnT,EACAsN,EAAItN,CAAJsN,CADAtN;AACIA,SAHR0S;AAGQ1S,OA5CsB;;AAgDlC4O,QAAGlB,GAAHkB,CAAOE,CAAPF,EAAoB;AAChB0B,mBAAW,SADK;AAEhBC,oBAAY,QAFI;AAGhBC,0BAAkB,EAHF;AAIhBC,qBAAY,CAJI;AAKhBgC,iBALgB;AAOhBW,kBAPgB,UAOPzC,CAPO,EAOPA;AACLC,eAAKL,UAALK,GAAkBD,CAAlBC;AAAkBD,SARN;AAWhBD,eAXgB,UAWVC,CAXU,EAWVA;AACFC,eAAKN,SAALM,GAAiBD,CAAjBC;AAAiBD,SAZL;AAehBE,gBAfgB,UAeTC,CAfS,EAeTA;AACHF,eAAKL,UAALK,GAAkBE,CAAlBF;AAAkBE,SAhBN;AAmBhB7C,sBAnBgB,UAmBH8C,CAnBG,EAmBHA;AACTH,eAAKJ,gBAALI,GAAwBG,CAAxBH;AAAwBG,SApBZ;AAuBhB5C,uBAvBgB,UAuBFsC,CAvBE,EAuBFA;AACVG,eAAKH,UAALG,GAAKH,EAAeA,CAApBG;AAAoBH,SAxBR;AA2BhBO,cA3BgB,UA2BXzF,CA3BW,EA2BL+B,CA3BK,EA2BA+F,CA3BA,EA2BAA;AACZJ,YAAY;AACRjT,cAAIzE,GAAJyE,GACKwF,IADLxF,CACU;AAAG,qBAAIA,EAAIsT,MAAJtT,IAAcsN,EAAItN,EAAI+F,IAAJ/F,EAAJsN,CAAlB;AAA0BvH,aADvC/F,EAEKwN,KAFLxN,CAEWqT,CAFXrT;AAEWqT,WAHfJ;AAGeI,SA/BH;AAmChBnC,iBAnCgB,UAmCR5D,CAnCQ,EAmCH+F,CAnCG,EAmCHA;AACTX,YAAmB;AACfS,cAAI5X,GAAJ4X,GACK3N,IADL2N,CACU;AACF,kBAAMpN,IAAO,EAAb;AACAwN,gBAAK3N,OAAL2N,CAAa;AAAG,uBAAIxN,EAAKvC,IAALuC,CAAU/F,EAAI+F,IAAJ/F,EAAV+F,CAAJ;AAAkBA,eAAlCwN,GACAjG,EAAIvH,CAAJuH,CADAiG;AACIxN,aAJZoN,EAMK3F,KANL2F,CAMWE,CANXF;AAMWE,WAPfX;AAOeW,SA3CH;AA+ChBjF,eA/CgB,UA+CVrI,CA/CU,EA+CJuH,CA/CI,EA+CC+F,CA/CD,EA+CCA;AAAU;AACvBX,YAAmB;AACfS,cAAInT,GAAJmT,CAAQpN,EAAK+K,GAAL/K,IAAYvK,EAAK+U,UAAzB4C,EAAqCxB,GAArCwB;AACIrC,mBAAKtV,EAAK+U,UADd;AAEII,kBAAInV,EAAK8U,SAFb;AAGIe,wBAAU7V,EAAKiV,UAHnB;AAIIM,yBAAWvV,EAAKgV;AAJpB,eAKOzK,CALP,GAOKP,IAPL2N,CAOU7F,CAPV6F,EAQK3F,KARL2F,CAQWE,CARXF;AAQWE,WATfX;AASeW,SAzDH;AA6DhB/B,gBA7DgB,UA6DTvL,CA7DS,EA6DHuH,CA7DG,EA6DE+F,CA7DF,EA6DEA;AAAU,cAChBvC,IAAkB/K,EAAlB+K,GADgB;AAAA,cACRS,IADQvW,IACE+K,CADF;AAExB2M,YAAmB;AACfS,cAAInT,GAAJmT,CAAQrC,CAARqC,EAAaxB,GAAbwB,CAAiB5B,CAAjB4B,EAAwB;AAAEK,sBAAO;AAAT,aAAxBL,EACK3N,IADL2N,CACU7F,CADV6F,EAEK3F,KAFL2F,CAEWE,CAFXF;AAEWE,WAHfX;AAGeW,SAlEH;AAsEhBhF,gBAtEgB,UAsETf,CAtES,EAsEJ+F,CAtEI,EAsEM1Q,CAtEN,EAsEMA;AACbA,cAOD+P,EAAmB;AACfS,cAAInT,GAAJmT,CAAQxQ,CAARwQ,EAAe9E,MAAf8E,GACK3N,IADL2N,CACU7F,CADV6F,EAEK3F,KAFL2F,CAEWE,CAFXF;AAEWE,WAHfX,CAPC/P,GACDsQ,EAAY;AACRjT,cAAIqO,MAAJrO,GACKwF,IADLxF,CACUsN,CADVtN,EAEKwN,KAFLxN,CAEWqT,CAFXrT;AAEWqT,WAHfJ,CADCtQ;AAIc0Q;AA3EP,OAApBzE;AA2E2ByE,KA3HhB;AAAA,QCEAI,cAAC5G,CAAD,EAACA;AAAsB,UAAdC,IAAcC,iEAAP,EAAO;AAElC2G,QAAU7G,CAAV6G,EAAkB5G,CAAlB4G,GAGAlC,EAAO3E,CAAP2E,EAAe1E,CAAf0E,CAHAkC,EAMAZ,EAAUjG,CAAViG,EAAkBhG,CAAlBgG,CANAY;AAMkB5G,KDVP;AAAA,Q,QAAA;AAAA,Q,UAAA;AAAA,Q,QAAA;AAAA,Q,UAAA;;;;;;;;;;;;;;;QEFM6G,I;AACjB,iBAAY9G,CAAZ,EAAYA;AAAmB,YAAXC,IAAWC,iEAAJ,EAAI;AAAA6G,sBAC3BhD,KAAK/D,MAAL+D,GAAc/D,CADa,EAE3B+D,KAAKiD,CAALjD,GAAS/D,EAAOgH,CAFW,EAG3BjD,KAAKkD,GAALlD,GAAW/D,EAAOkH,SAAPlH,CAAiB,aAAjBA,CAHgB,EAI3B+D,KAAKD,EAALC,GAAU/D,EAAOkB,OAAPlB,CAAekH,SAAflH,GAA2B8D,EAA3B9D,IAAiC,MAJhB,EAK3B+D,KAAK9D,IAAL8D,GAAY9D,CALe;;;;;eAQ/B;AAAc,cACFD,IAA8B+D,KAA9B/D,MADE;AAAA,cACMmH,IAAsBpD,KAAtBoD,WADN;AAAA,cACmBC,IAASrD,KAATqD,IADnB;AAAA,cAEJf,IAAKrG,EAAOkB,OAAPlB,CAAemB,iBAAfnB,EAFD;AAGVqG,YAAGrC,MAAHqC,CAAUc,CAAVd,GACAA,EAAG/E,aAAH+E,CAAG/E,CAAc,CAAjB+E,CADAA,EAEAtC,KAAKqD,IAALrD,IAAa/D,EAAOmE,IAAPnE,CAAY;AACrBA,cAAOqH,aAAPrH,CAAqBkF,EAAIoC,UAAJpC,GAAiBqC,KAAKC,KAALD,CAAWrC,EAAIoC,UAAfC,CAAjBrC,GAA8CA,EAAIuC,IAAvEzH,GACAA,EAAO0H,QAAP1H,CAAgBkF,EAAIyC,MAAJzC,GAAaqC,KAAKC,KAALD,CAAWrC,EAAIyC,MAAfJ,CAAbrC,GAAsCA,EAAI0C,GAA1D5H,CADAA,EAEAqG,EAAGxC,KAAHwC,CAASe,CAATf,CAFArG,EAGAqG,EAAGrC,MAAHqC,CAAUrG,EAAO6H,UAAP7H,CAAkB,YAAlBA,CAAVqG,CAHArG,EAIAqG,EAAGjF,YAAHiF,CAAgBnB,EAAIhB,SAAJgB,IAAiB,EAAjCmB,CAJArG,EAKAA,EAAO8H,KAAP9H,CAAa+H,KAAb/H,EALAA;AAKa+H,WANJ/H,CAFbqG;AAQiB0B;;;eAIrB;AAAgB,cACJ/H,IAAwB+D,KAAxB/D,MADI;AAAA,cACImH,IAAgBpD,KAAhBoD,WADJ;AAAA,cAENd,IAAKrG,EAAOkB,OAAPlB,CAAemB,iBAAfnB,EAFC;AAGZqG,YAAGrC,MAAHqC,CAAUc,CAAVd,GACAA,EAAG/E,aAAH+E,CAAG/E,CAAc,CAAjB+E,CADAA,EAEArG,EAAOmE,IAAPnE,CAAY;AACRA,cAAOqH,aAAPrH,CAAqBkF,EAAIoC,UAAJpC,GAAiBqC,KAAKC,KAALD,CAAWrC,EAAIoC,UAAfC,CAAjBrC,GAA8CA,EAAIuC,IAAvEzH,GACAA,EAAO0H,QAAP1H,CAAgBkF,EAAIyC,MAAJzC,GAAaqC,KAAKC,KAALD,CAAWrC,EAAIyC,MAAfJ,CAAbrC,GAAsCA,EAAI0C,GAA1D5H,CADAA,EAEAqG,EAAGjF,YAAHiF,CAAgBnB,EAAIhB,SAAJgB,IAAiB,EAAjCmB,CAFArG,EAGAA,EAAO8H,KAAP9H,CAAa+H,KAAb/H,EAHAA;AAGa+H,WAJjB/H,CAFAqG;AAMiB0B;;;eAIrB,UAAgB5N,CAAhB,EAAgBA;AAAG,cACP8M,IAAQlD,KAARkD,GADO;AAAA,cAET9W,IAASgK,EAAE6I,aAFF;AAGfe,eAAKoD,WAALpD,GAAmB5T,EAAO6X,OAAP7X,CAAe8T,GAAlCF,EACAA,KAAKiD,CAALjD,YAAWkD,CAAX,qBAAgCgB,IAAhClE,CAAqC,UAAClW,CAAD,EAAIqa,CAAJ,EAAIA;AACrCA,cAAIC,SAAJD,CAAcE,MAAdF,WAAwBjB,CAAxB;AAAA,WADJlD,CADAA,EAIA5T,EAAOkY,aAAPlY,CAAqBgY,SAArBhY,CAA+B0Q,GAA/B1Q,WAAsC8W,CAAtC,2BAJAlD;AAIA;;;eAGJ,UAAU5J,CAAV,EAAUA;AAAG,cACD6F,IAAW+D,KAAX/D,MADC;AAAA,cAEHqG,IAAKrG,EAAOkB,OAAPlB,CAAemB,iBAAfnB,EAFF;AAGTqG,YAAGrC,MAAHqC,CAAUlM,EAAE6I,aAAF7I,CAAgB6N,OAAhB7N,CAAwB8J,GAAlCoC,GACAA,EAAG/E,aAAH+E,CAAG/E,CAAc,CAAjB+E,CADAA,EAEArG,EAAOmE,IAAPnE,CAAY;AACRA,cAAOqH,aAAPrH,CAAqBkF,EAAIoC,UAAJpC,GAAiBqC,KAAKC,KAALD,CAAWrC,EAAIoC,UAAfC,CAAjBrC,GAA8CA,EAAIuC,IAAvEzH,GACAA,EAAO0H,QAAP1H,CAAgBkF,EAAIyC,MAAJzC,GAAaqC,KAAKC,KAALD,CAAWrC,EAAIyC,MAAfJ,CAAbrC,GAAsCA,EAAI0C,GAA1D5H,CADAA,EAEAqG,EAAGxC,KAAHwC,CAASnB,EAAIpB,EAAbuC,CAFArG,EAGAqG,EAAGjF,YAAHiF,CAAgBnB,EAAIhB,SAAJgB,IAAiB,EAAjCmB,CAHArG,EAIAA,EAAO8H,KAAP9H,CAAa+H,KAAb/H,EAJAA;AAIa+H,WALjB/H,CAFAqG;AAOiB0B;;;eAIrB,UAAU5N,CAAV,EAAUA;AACN,cAAMmO,IAAMvE,KAAKiD,CAALjD,CAAO5J,EAAE6I,aAAF7I,CAAgBkO,aAAvBtE,CAAZ;AAAA,cACMwE,IAAMD,EAAIpK,QAAJoK,GAAeE,KAAfF,EADZ;AAAA,cAEMG,IAAYH,EAAII,IAAJJ,YAAavE,KAAKkD,GAAlB,WAFlB;AAAA,cAGM0B,IAAQF,EAAUC,IAAVD,CAAe,OAAfA,CAHd;AAIuC,sBAAnCA,EAAU/Z,GAAV+Z,CAAc,CAAdA,EAAiBjO,KAAjBiO,CAAuBG,OAAY,IACnCL,EAAIM,IAAJN,CAASI,EAAMG,GAANH,EAATJ,GACAE,EAAUM,IAAVN,EADAF,EAEAxE,KAAK/D,MAAL+D,CAAY7C,OAAZ6C,CAAoB5C,iBAApB4C,GAAwCU,MAAxCV,CAA+C;AAC3CE,iBAAK9J,EAAE6I,aAAF7I,CAAgB6N,OAAhB7N,CAAwB8J,GADc;AAE3CH,gBAAI6E,EAAMG,GAANH,GAAYK,IAAZL;AAFuC,WAA/C5E,CAHmC,KAQnC4E,EAAMG,GAANH,CAAUJ,EAAIM,IAAJN,GAAWS,IAAXT,EAAVI,GACAJ,EAAIM,IAAJN,CAAS,KAATA,CADAI,EAEAF,EAAUQ,IAAVR,EAVmC;AAUzBQ;;;eAIlB,UAAY9O,CAAZ,EAAYA;AAAG,cACH6F,IAAiB+D,KAAjB/D,MADG;AAAA,cACKC,IAAS8D,KAAT9D,IADL;AAEXD,YAAOkB,OAAPlB,CAAemB,iBAAfnB,GACKwB,MADLxB,CACYC,EAAKwB,QADjBzB,EAC2BC,EAAKyB,aADhC1B,EAC+C7F,EAAE6I,aAAF7I,CAAgB6N,OAAhB7N,CAAwB8J,GADvEjE,GAEA7F,EAAE6I,aAAF7I,CAAgBkO,aAAhBlO,CACKkO,aADLlO,CACmBK,KADnBL,CACyByO,OADzBzO,GACmC,MAHnC6F;AAGmC;;;eAGvC,UAAQiE,CAAR,EAAaiF,CAAb,EAAaA;AACT,wCAAsBnF,KAAKkD,GAA3B,yCAA2DhD,CAA3D,kCACUiF,CADV;AAAA;;;eAKJ,UAAYC,CAAZ,EAAYA;AAAQ;AAAA,cACVnX,IAAU+R,KAAKiD,CAALjD,wBAAsBA,KAAKkD,GAA3B,kDACNkC,CADM,0BADA;AAMhB,iBAFAnX,EAAQ0W,IAAR1W,CAAa,kBAAbA,EAAiCoX,EAAjCpX,CAAoC,OAApCA,EAA6C;AAAC,mBAAIjD,EAAKsa,SAAL,CAAelP,CAAf,CAAJ;AAAmBA,WAAjEnI,GACAA,EAAQ0W,IAAR1W,CAAa,iBAAbA,EAAgCoX,EAAhCpX,CAAmC,OAAnCA,EAA4C;AAAC,mBAAIjD,EAAKua,WAAL,CAAiBnP,CAAjB,CAAJ;AAAqBA,WAAlEnI,CADAA,EAEOA,CAAP;AAAOA;;;eAGX,UAAOmX,CAAP,EAAOA;AAAQ;AAAA,cACHlC,IAAQlD,KAARkD,GADG;AAAA,cAELZ,IAAKtC,KAAK/D,MAAL+D,CAAY7C,OAAZ6C,CAAoB5C,iBAApB4C,EAFA;AAAA,cAGL/R,IAAU+R,KAAKwF,WAALxF,CAAiBoF,CAAjBpF,CAHL;;AAUX,iBANA/R,EAAQ0W,IAAR1W,YAAiBiV,CAAjB,qBACKhO,MADLjH,CACY,UAACnE,CAAD,EAAIqa,CAAJ,EAAIA;AAAJ,mBAAYA,EAAIlK,YAAJkK,CAAiB,UAAjBA,KAAgC7B,EAAG3C,UAA/C;AAA+CA,WAD3D1R,EAEKwX,QAFLxX,WAEiBiV,CAFjB,4BAGKyB,IAHL1W,CAGU,MAHVA,EAIK+W,IAJL/W,IAKAA,EAAQ0W,IAAR1W,YAAiB+R,KAAKkD,GAAtB,mBAAyCmC,EAAzCpX,CAA4C,OAA5CA,EAAqD;AAAC,mBAAIjD,EAAK0a,SAAL,CAAetP,CAAf,CAAJ;AAAmBA,WAAzEnI,CALAA,EAMOA,CAAP;AAAOA;;;eAGX,UAAWmX,CAAX,EAAWA;AAAQ;AAAA,cACPlC,IAAQlD,KAARkD,GADO;AAAA,cAETjV,IAAU+R,KAAKwF,WAALxF,CAAiBoF,CAAjBpF,CAFD;;AASf,iBANA/R,EAAQ0W,IAAR1W,YAAiBiV,CAAjB,qBACKhO,MADLjH,CACY,UAACnE,CAAD,EAAIqa,CAAJ,EAAIA;AAAJ,mBAAYA,EAAIlK,YAAJkK,CAAiB,UAAjBA,KAAgCnZ,EAAKoY,WAAjD;AAAiDA,WAD7DnV,EAEKwX,QAFLxX,WAEiBiV,CAFjB,4BAGKyB,IAHL1W,CAGU,MAHVA,EAIK+W,IAJL/W,IAKAA,EAAQ0W,IAAR1W,YAAiBiV,CAAjB,mBAAoCmC,EAApCpX,CAAuC,OAAvCA,EAAgD;AAAC,mBAAIjD,EAAK2a,eAAL,CAAqBvP,CAArB,CAAJ;AAAyBA,WAA1EnI,CALAA,EAMOA,CAAP;AAAOA;;;eAGX;AAAQ,cACIiV,IAAiBlD,KAAjBkD,GADJ;AAAA,cACSD,IAAYjD,KAAZiD,CADT;AAAA,cACY/G,IAAS8D,KAAT9D,IADZ;AAAA,cAEEjO,IAAUgV,EAAE,gBAAD2C,MAAC,CAAe1C,CAAf,EAAD,0CAAC,EAAD0C,MAAC,CACO1C,CADP,EAAD,oBAAC,EAAD0C,MAAC,CAC8B1J,EAAK2J,QAAL3J,CAAc4J,KAD5C,EAAD,6CAAC,EAADF,MAAC,CAEO1C,CAFP,EAAD,aAAC,EAAD0C,MAAC,CAEuB1J,EAAK2J,QAAL3J,CAAc6J,SAFrC,EAAD,+BAAC,CAAF9C,CAFZ;AAkBJ,iBAZAhV,EAAQ0W,IAAR1W,CAAa,QAAbA,EAAuBoX,EAAvBpX,CAA0B,OAA1BA,EAAmC;AAC/B,gBAAM7B,IAASgK,EAAE6I,aAAjB;AACAhR,cAAQ0W,IAAR1W,YAAiBiV,CAAjB,eAAgC8C,WAAhC/X,CAA4C,QAA5CA,GACAgV,EAAE7W,CAAF6W,EAAUwC,QAAVxC,CAAmB,QAAnBA,CADAhV,EAEuC,YAAnC7B,EAAOuN,SAAPvN,CAAiBe,WAAjBf,EAAmC,IACnC6W,EAAE,gBAAFA,EAAoB+B,IAApB/B,IACAA,EAAE,YAAFA,EAAgBiC,IAAhBjC,EAFmC,KAInCA,EAAE,gBAAFA,EAAoBiC,IAApBjC,IACAA,EAAE,YAAFA,EAAgB+B,IAAhB/B,EALmC,CAFvChV;AAOoB+W,WATxB/W,GAYOA,CAAP;AAAOA;;;eAGX;AACI,iBAAO,8EAAP;AAAO;;;eAGX;AACI,wCAAsB+R,KAAKkD,GAA3B,gCAAmDlD,KAAK9D,IAAL8D,CAAUiG,OAA7D;AAAA;;;eAGJ;AAAc;AAAA,cACFhD,IAA6BjD,KAA7BiD,CADE;AAAA,cACClD,IAA0BC,KAA1BD,EADD;AAAA,cACKmD,IAAsBlD,KAAtBkD,GADL;AAAA,cACUhH,IAAiB8D,KAAjB9D,IADV;AAAA,cACgBD,IAAW+D,KAAX/D,MADhB;AAAA,cAEJqG,IAAKrG,EAAOkB,OAAPlB,CAAemB,iBAAfnB,EAFD;AAAA,cAGJhO,IAAUgV,EAAE,gBAAD2C,MAAC,CAAe1C,CAAf,EAAD,sJAAC,EAAD0C,MAAC,CAEW1C,CAFX,EAAD,WAAC,EAAD0C,MAAC,CAE0B1C,CAF1B,EAAD,2DAAC,EAAD0C,MAAC,CAGA1J,EAAKgK,OAALhK,CAAaiK,WAHb,EAAD,6EAAC,CAAFlD,CAHN;AA8BV,iBAnBAhV,EAAQ0W,IAAR1W,CAAa,eAAbA,EAA8BoX,EAA9BpX,CAAiC,OAAjCA,EAA0C;AACtC,gBAAMkH,IAAO,EAAb;AACAA,cAAK,GAADyQ,MAAC,CAAG7F,CAAH,EAAD,MAAC,CAAL5K,IAAoB,EAApBA,EACAA,EAAK,GAADyQ,MAAC,CAAG7F,CAAH,EAAD,KAAC,CAAL5K,IAAmB,EADnBA,EAEAmN,EAAG9E,KAAH8E,C;;;;;;;;;;;AAAA,a,CAAA;AACIpC,mBAAKjE,EAAO6H,UAAP7H,CAAkB,YAAlBA,CADT;AAEI8D,kBAAI,OAFR;AAGIU,yBAAU,CAHd;AAIIN,yBAAW;AAJf,a,EAKOhL,C,CALPmN,CAFAnN,EASAmN,EAAGhC,OAAHgC,CAAW;AACH,kBAAMyD,IAAY9C,EAAE,QAAFA,EAAY0B,IAAZ1B,CAAiB,sBAAjBA,CAAlB;AACA8C,gBAAUpB,IAAVoB,YAAmB7C,CAAnB,uBAA0CmB,MAA1C0B,IACAA,EAAUK,MAAVL,CAAiB3P,EAAKsK,MAAL,CAAYS,EAAIjM,MAAJiM,CAAW;AAAC,uBAAIvW,EAAE6V,QAAN;AAAMA,eAAlBU,CAAZ,EAA8BV,CAAW,CAAzC,CAAjBsF,CADAA;AAC0D,aAHlEzD,EAKI;AAAG,qBAAI1Q,QAAQyE,GAARzE,CAAY,OAAZA,EAAqBiL,CAArBjL,CAAJ;AAAyBiL,aALhCyF,CATAnN;AAcgC0H,WAhBpC5O,GAmBOA,CAAP;AAAOA;;;eAGX;AAAS;AAAA,cACGiV,IAAiBlD,KAAjBkD,GADH;AAAA,cACQD,IAAYjD,KAAZiD,CADR;AAAA,cACW/G,IAAS8D,KAAT9D,IADX;AAAA,cAECmK,IAAOrG,KAAKsG,KAALtG,EAFR;AAAA,cAGC/R,IAAUgV,EAAE,6BAAD2C,MAAC,CAA0B1C,CAA1B,EAAD,YAAC,EAAD0C,MAAC,CAA0C1C,CAA1C,EAAD,SAAC,EAAD0C,MAAC,CAAuD1C,CAAvD,EAAD,yCAAC,EAAD0C,MAAC,CACA1C,CADA,EAAD,uDAAC,EAAD0C,MAAC,CAEA1C,CAFA,EAAD,kDAAC,EAAD0C,MAAC,CAGI1C,CAHJ,EAAD,kFAAC,EAAD0C,MAAC,CAIQ1C,CAJR,EAAD,YAAC,EAAD0C,MAAC,CAIwB1C,CAJxB,EAAD,eAAC,EAAD0C,MAAC,CAI0C1J,EAAKqK,IAJ/C,EAAD,6CAAC,EAADX,MAAC,CAKU1C,CALV,EAAD,kCAAC,EAAD0C,MAAC,CAK6C1J,EAAKsK,SALlD,EAAD,6CAAC,EAADZ,MAAC,CAMQ1C,CANR,EAAD,8LAAC,EAAD0C,MAAC,CAUe1C,CAVf,EAAD,WAAC,EAAD0C,MAAC,CAU8B1C,CAV9B,EAAD,gEAAC,EAAD0C,MAAC,CAWI1J,EAAKgK,OAALhK,CAAauK,IAXjB,EAAD,wIAAC,EAADb,MAAC,CAee1C,CAff,EAAD,WAAC,EAAD0C,MAAC,CAe8B1C,CAf9B,EAAD,8DAAC,EAAD0C,MAAC,CAgBI1J,EAAKgK,OAALhK,CAAa9Q,MAhBjB,EAAD,kMAAC,EAADwa,MAAC,CAqBW1C,CArBX,EAAD,WAAC,EAAD0C,MAAC,CAqB0B1C,CArB1B,EAAD,4DAAC,EAAD0C,MAAC,CAsBA1J,EAAKgK,OAALhK,CAAawK,GAtBb,EAAD,oMAAC,CAAFzD,CAHX;;AA0CL,iBAXAhV,EAAQ0W,IAAR1W,CAAa,gBAAbA,EAA+BoX,EAA/BpX,CAAkC,OAAlCA,EAA2C;AACvC,gBAAM0Y,IAAWN,EAAK1B,IAAL0B,YAAcnD,CAAd,cAAjB;AACAyD,cAASX,WAATW,CAAqB,QAArBA,GACA1D,EAAE0D,EAAShc,GAATgc,CAAa,CAAbA,CAAF1D,EAAmBwC,QAAnBxC,CAA4B,QAA5BA,CADA0D,EAEA1D,EAAE,gBAAFA,EAAoBiC,IAApBjC,EAFA0D,EAGA1D,EAAE,YAAFA,EAAgB+B,IAAhB/B,EAHA0D;AAGgB3B,WALpB/W,GAOAA,EAAQ0W,IAAR1W,CAAa,YAAbA,EAA2BoX,EAA3BpX,CAA8B,OAA9BA,EAAuC;AAAC,mBAAImI,EAAKiN,IAAL,GAAYjN,EAAE6I,aAAF7I,CAAgBrL,KAAhC;AAAgCA,WAAxEkD,CAPAA,EAQAA,EAAQ0W,IAAR1W,CAAa,cAAbA,EAA6BoX,EAA7BpX,CAAgC,OAAhCA,EAAyC;AAAA,mBAAMmI,EAAKwQ,WAAL,EAAN;AAAWA,WAApD3Y,CARAA,EASAA,EAAQ0W,IAAR1W,CAAa,gBAAbA,EAA+BoX,EAA/BpX,CAAkC,OAAlCA,EAA2C;AAAA,mBAAMmI,EAAKyQ,aAAL,EAAN;AAAWA,WAAtD5Y,CATAA,EAUAA,EAAQ0W,IAAR1W,YAAiBiV,CAAjB,qBAAsC4D,OAAtC7Y,CAA8CoY,CAA9CpY,CAVAA,EAWOA,CAAP;AAAOA;;;eAGX,UAAOkH,CAAP,EAAOA;AAAoB;AAAA,cAAd2Q,MAAc3J,+CAAd2J,KAAc3J;AAAA,cACnB4K,IAAe,EADI;AAAA,cAEf7D,IAAYlD,KAAZkD,GAFe;AAAA,cAEVnD,IAAOC,KAAPD,EAFU;AAIvB,iBAAK5K,EAAK5I,MAAL4I,IAELA,EAAKH,OAALG,CAAa;AACT,gBAAM6R,IAAU,mSAAHpB,MAAG,CAEoC7I,EAAG,GAAD6I,MAAC,CAAG7F,CAAH,EAAD,MAAC,CAAHhD,IAAkB,EAAlBA,GAAuB,kBAF3D,EAAH,2BAAG,EAAH6I,MAAG,CAGN7I,EAAG,GAAD6I,MAAC,CAAG7F,CAAH,EAAD,MAAC,CAAHhD,IAAkB,gBAAlBA,GAAqCA,EAAG,GAAD6I,MAAC,CAAG7F,CAAH,EAAD,KAAC,CAAHhD,CAArCA,GAAsD,UAHhD,EAAH,4FAAG,CAAhB;AAAA,gBAOIkK,IAAclK,EAAGoD,SAAHpD,0BAA8BmG,CAA9B,0FAC2BnG,EAAGoD,SAD9B,sBACiDpD,EAAGgD,EADpD,mCAEJiH,CATd;AAUAC,gBAAc,gBAAHrB,MAAG,CAAe1C,CAAf,EAAH,4BAAG,EAAH0C,MAAG,CAA6C7I,EAAGmD,GAAhD,EAAH,2BAAG,EAAH0F,MAAG,CACJqB,CADI,EAAH,4FAAG,EAAHrB,MAAG,CAIC7I,EAAGgD,EAJJ,EAAH,2CAAG,EAAH6F,MAAG,CAKQ1C,CALR,EAAH,uHAAG,EAAH0C,MAAG,CAMqD7I,EAAGmD,GANxD,EAAH,kEAAG,EAAH0F,MAAG,CAQM1C,CARN,EAAH,0DAAG,EAAH0C,MAAG,CAQgE7I,EAAGmD,GARnE,EAAH,0CAAG,EAAH0F,MAAG,CASM1C,CATN,EAAH,yDAAG,EAAH0C,MAAG,CAS+D7I,EAAGmD,GATlE,EAAH,iCAAG,CAAd+G,EAYAF,KAAgB/b,EAAKkc,OAAL,CAAanK,EAAGmD,GAAhB,EAAqB+G,CAArB,CAZhBA;AAYqCA,WAvBzC9R,GA0BO2Q,IAAQ9F,KAAKmH,MAALnH,CAAY+G,CAAZ/G,CAAR8F,GAAoC9F,KAAKoH,UAALpH,CAAgB+G,CAAhB/G,CA5BtC7K,IAAoB2Q,IAAQ9F,KAAKqH,OAALrH,EAAR8F,GAAyB9F,KAAKsH,WAALtH,EAAlD;AAAuDsH;;;QC7OhDC,cAACtL,CAAD,EAACA;AAAsB,UAAdC,IAAcC,iEAAP,EAAO;AAAA,UAC1B8G,IAAMhH,EAANgH,CAD0B;AAAA,UAE5BuE,IAAMvL,EAAO8H,KAFe;AAAA,UAG5B/F,IAAK/B,EAAOgC,cAHgB;AAAA,UAI5BiF,IAAMjH,EAAOkH,SAAPlH,CAAiB,aAAjBA,CAJsB;AAAA,UAK5BwL,IAAW,GAAH7B,MAAG,CAAG1C,CAAH,EAAH,gBAAG,CALiB;AAAA,UAM9BwE,IAAkB,IANY;AAQlCzL,QAAOI,QAAPJ,CAAgBa,GAAhBb,CAAoB,gBAApBA,EAAsC;AAClC0L,aADkC,UAC9B1L,CAD8B,EACtB2L,CADsB,EACtBA;AACR,cAAMC,IAAYxY,SAASyY,aAATzY,YAA2B6T,CAA3B,gBAAlB;AACA2E,YAAUzD,SAAVyD,CAAoB/K,GAApB+K,CAAwBJ,CAAxBI,GACAD,KAAUA,EAAO7G,GAAjB6G,IAAwBA,CAAxBA,IAAkCA,EAAO7G,GAAP6G,CAAW,QAAXA,CADlCC,EAC6C,CAC5CH,CAD4C,KACxBA,IAAkB,IAAI3E,CAAJ,CAAoB9G,CAApB,EAA4BC,CAA5B,CADM,CAD7C2L,EAGAL,EAAIO,QAAJP,CAAatL,EAAK8L,QAAlBR,CAHAK,EAIAL,EAAIS,UAAJT,CAAevE,EAAE,eAAFA,EAAmB1W,MAAnB0W,GAA4BA,EAAE,eAAFA,CAA5BA,GAAiDyE,EAAgBQ,MAAhBR,EAAhEF,CAJAK,EAKA7J,EAAGZ,iBAAHY,GAAuBsC,OAAvBtC,CAA+B;AACvB,gBAAI/P,IAAUgV,EAAE,QAAFA,CAAd;AACAhV,gBAAUA,EAAQ1B,MAAR0B,GAAiBA,CAAjBA,GAA2BgV,EAAEyE,EAAgBS,MAAhBT,EAAFzE,CAArChV,EACAuZ,EAAIS,UAAJT,CAAevZ,CAAfuZ,CADAvZ;AAEA,gBAAM6X,IAAQ7X,EAAQ0W,IAAR1W,CAAa,kBAAbA,CAAd;AAAA,gBACM8X,IAAY9X,EAAQ0W,IAAR1W,CAAa,sBAAbA,CADlB;AAEA6X,cAAMnB,IAANmB,YAAe5C,CAAf,uBAAsCmB,MAAtCyB,IACAC,EAAUpB,IAAVoB,YAAmB7C,CAAnB,uBAA0CmB,MAA1C0B,EADAD,EAEAA,EAAMM,MAANN,CAAa4B,EAAgBhH,MAAhBgH,CAAuBvG,EAAIjM,MAAJiM,CAAW;AAAC,sBAAKvW,EAAE6V,QAAP;AAAOA,aAAnBU,CAAvBuG,CAAb5B,CAFAA,EAGAC,EAAUK,MAAVL,CAAiB2B,EAAgBhH,MAAhBgH,CAAuBvG,EAAIjM,MAAJiM,CAAW;AAAC,qBAAIvW,EAAE6V,QAAN;AAAMA,aAAlBU,CAAvBuG,EAAyCjH,CAAW,CAApDiH,CAAjB3B,CAHAD;AAGqE,WAT7E9H,EAWI;AAAG,mBAAIpM,QAAQyE,GAARzE,CAAY,OAAZA,EAAqBiL,CAArBjL,CAAJ;AAAyBiL,WAXhCmB,CALA6J,EAiBAL,EAAIhW,IAAJgW,EAjBAK,EAkBAL,EAAIY,QAAJZ,GAAea,IAAfb,CAAoB,aAApBA,EAAmC;AAC/BK,cAAUzD,SAAVyD,CAAoBxD,MAApBwD,CAA2BJ,CAA3BI;AAA2BJ,WAD/BD,CAlBAK;AAmB+BJ;AAtBD,OAAtCxL;AAsBuCwL,K;;;;;;;;;;;;;;;;;;;;;;;;;;AC5B5B;;AAAAzc,6BAACiR,CAAD,EAACA;AAAsB,UAAdC,IAAcC,iEAAP,EAAO;AAAA,UAC5BhM,IAAUmY,QACT;AAGC3J,gBAAQ,KAHT;AAMCP,yBAAiB,WANlB;AASCmK,oBAAW,CATZ;AAYCtH,qBAAY,CAZb;AAeCrC,0BAAkB,CAfnB;AAkBClB,kBAlBD,UAkBUyD,CAlBV,EAkBUA;AACLvP,kBAAQyE,GAARzE,CAAY,UAAZA,EAAwBuP,CAAxBvP;AAAwBuP,SAnB7B;AAuBCxD,uBAvBD,UAuBed,CAvBf,EAuBeA;AACVjL,kBAAQyE,GAARzE,CAAYiL,CAAZjL;AAAYiL,SAxBjB;AA4BCS,2BA5BD,UA4BmBT,CA5BnB,EA4BmBA;AACdjL,kBAAQyE,GAARzE,CAAYiL,CAAZjL;AAAYiL,SA7BjB;AAiCC1E,iBAAS,GAjCV;AAoCC6P,kBAAU,kBApCX;AAuCC9B,iBAAS;AACLQ,eAAK,UADA;AAELD,gBAAM,eAFD;AAGLrb,kBAAQ,QAHH;AAIL+a,uBAAa;AAJR,SAvCV;AA+CCN,kBAAU;AACNC,iBAAO,OADD;AAENC,qBAAW;AAFL,SA/CX;AAqDCS,mBAAW,MArDZ;AAwDCD,cAAM,yFAxDP;AA2DCN,iBAAS,2FA3DV;AA8DCzE,gBAAQ,EA9DT;AAiECC,oBAAY,EAjEb;AAoECC,mBAAW,EApEZ;AAuEC8G,wBAAe,CAvEhB;AA0ECpG,wBAAgB,EA1EjB;AA6ECR,kBAAU;AAAE6G,kCAAuB;AAAzB;AA7EX,OADS,GAgFTvM,CAhFS,CADkB;;AAqFlCwM,QAASzM,CAATyM,EAAiBvY,CAAjBuY,GAGAC,EAAQ1M,CAAR0M,EAAgBxY,CAAhBwY,CAHAD,EAMAE,EAAM3M,CAAN2M,EAAczY,CAAdyY,CANAF,EASAzM,EAAOoJ,EAAPpJ,CAAU,MAAVA,EAAkB;AACd,YAAMqG,IAAKrG,EAAOkB,OAAPlB,CAAemB,iBAAfnB,EAAX;AACAqG,UAAGhC,OAAHgC,CAAW;AACP,cAAMuG,IAAY1H,EAAI,CAAJA,CAAlB;AACI0H,eAAa1Y,EAAQoY,SAArBM,IACAvG,EAAGxC,KAAHwC,CAASuG,EAAU9I,EAAnBuC,GACAA,EAAGrC,MAAHqC,CAAUuG,EAAU3I,GAApBoC,CADAA,EAEAA,EAAGjF,YAAHiF,CAAgBuG,EAAU1I,SAA1BmC,CAFAA,EAGAA,EAAG/E,aAAH+E,CAAiBuG,EAAUpI,QAA3B6B,CAHAA,EAIArG,EAAOmE,IAAPnE,EALA4M,IAOAvG,EAAGrC,MAAHqC,CAAUrG,EAAO6H,UAAP7H,CAAkB,YAAlBA,CAAVqG,CAPAuG;AAO4B,SATpCvG;AASoC,OAXxCrG,CATAyM;AAoBwC,KAzG7B;AAyG6B,G,EhBnG5C;AgBmG4C,ChB7G5C","names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","objectWithoutPropertiesLoose","source","excluded","target","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","propertyIsEnumerable","global","util","escape","string","replace","parseExtension","mimeType","url","extension","toLowerCase","WOFF","JPEG","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","svg","dataAsUrl","content","type","isDataUrl","search","canvasToBlob","canvas","toBlob","Promise","resolve","binaryString","atob","toDataURL","split","binaryArray","Uint8Array","charCodeAt","Blob","resolveUrl","baseUrl","doc","document","implementation","createHTMLDocument","base","createElement","head","appendChild","a","body","href","getAndEncode","TIMEOUT","domtoimage","impl","options","cacheBust","test","Date","getTime","placeholder","request","XMLHttpRequest","onreadystatechange","readyState","status","fail","encoder","FileReader","onloadend","result","readAsDataURL","response","ontimeout","responseType","timeout","open","send","imagePlaceholder","message","console","error","uid","index","Math","random","pow","toString","slice","delay","ms","arg","setTimeout","asArray","arrayLike","array","push","escapeXhtml","makeImage","uri","reject","image","Image","onload","onerror","src","width","node","leftBorder","px","rightBorder","scrollWidth","height","topBorder","bottomBorder","scrollHeight","match","exec","styleProperty","getComputedStyle","getPropertyValue","parseFloat","newUtil","inliner","URL_REGEX","inlineAll","shouldProcess","nothingToInline","then","readUrls","urls","done","forEach","inline","filter","data","dataUrl","RegExp","urlAsRegex","newInliner","fontFaces","resolveAll","readAll","webFonts","all","map","webFont","cssStrings","join","styleSheets","cssRules","sheet","e","log","rule","CSSRule","FONT_FACE_RULE","style","rules","newWebFont","webFontRule","parentStyleSheet","cssText","newFontFaces","images","Element","background","inlined","setProperty","getPropertyPriority","inlineBackground","HTMLImageElement","newImage","childNodes","child","element","newImages","defaultOptions","undefined","toSvg","toPng","draw","toJpeg","quality","toPixelData","getContext","getImageData","copyOptions","cloneNode","HTMLCanvasElement","clone","cloneChildren","original","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyProperties","className","styleElement","selector","formatCssText","formatCssProperties","createTextNode","formatPseudoElementStyle","clonePseudoElement","HTMLTextAreaElement","innerHTML","HTMLInputElement","setAttribute","SVGElement","SVGRectElement","attribute","getAttribute","processClone","children","cloneChildrenInOrder","parent","childClone","embedFonts","inlineImages","bgcolor","backgroundColor","keys","XMLSerializer","serializeToString","xhtml","foreignObject","makeSvgDataUri","domNode","ctx","fillStyle","fillRect","newCanvas","drawImage","styleNode","instance","Constructor","TypeError","_defineProperties","props","descriptor","protoProps","staticProps","sourceKeys","editor","opts","arguments","cm","Commands","uuidv4","crypto","getRandomValues","getJpeg","clb","clbErr","catch","err","add","el","getWrapper","getEl","getStyle","Storage","getCurrentStorage","setThumbnail","onScreenshotError","setIsTemplate","store","delete","onDelete","onDeleteError","storageIDB","storageRemote","storageFireStore","db","sm","StorageManager","storageName","objsName","objectStoreName","getDb","getAsyncDb","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","dbName","indexeddbVersion","onError","errorCode","onsuccess","onupgradeneeded","currentTarget","createObjectStore","keyPath","createIndex","unique","getObjectStore","transaction","objectStore","getAsyncObjectStore","currentId","currentIdx","currentThumbnail","isTemplate","setId","id","this","setIdx","idx","thumbnail","load","objs","loadAll","getAll","put","template","update","_data","remote","urlLoad","endsWith","set","urlStore","uuidInPath","y","res","urlUpdate","method","urlDelete","collection","apiKey","authDomain","projectId","dbSettings","settings","getDoc","getAsyncCollection","firebase","apps","app","firestore","initializeApp","firebaseConfig","getAsyncDoc","cs","cll","setDocId","clbError","exists","docs","merge","j","indexeddb","TemplateManager","T","$","pfx","getConfig","templateIdx","page","setComponents","components","JSON","parse","html","setStyle","styles","css","runCommand","Modal","close","dataset","each","elm","classList","remove","parentElement","$el","lbl","first","inputCont","find","input","display","text","val","hide","trim","show","thumb","thumbs","on","_editName","_deletePage","_thumbsCont","addClass","_openPage","_selectTemplate","concat","tabsText","pages","templates","removeClass","nopages","btnText","createBlank","append","tabs","_tabs","help","nameLabel","edit","new","tablinks","_createPage","_openTemplate","prepend","thumbnailsEl","dataSvg","thumbnailEl","_thumbs","_pages","_templates","noPages","noTemplates","D","mdl","mdlClass","templateManager","run","sender","mdlDialog","querySelector","setTitle","mdlTitle","setContent","loader","render","getModel","once","_","loadFirst","enableOffline","timestampsInSnapshots","commands","storage","modal","firstPage"],"sources":["webpack://grapesjs-template-manager/webpack/universalModuleDefinition","webpack://grapesjs-template-manager/webpack/bootstrap","webpack://grapesjs-template-manager/./node_modules/@babel/runtime/helpers/defineProperty/index.js","webpack://grapesjs-template-manager/./node_modules/@babel/runtime/helpers/objectWithoutProperties/index.js","webpack://grapesjs-template-manager/./node_modules/dom-to-image/src/dom-to-image.js","webpack://grapesjs-template-manager/./node_modules/@babel/runtime/helpers/classCallCheck/index.js","webpack://grapesjs-template-manager/./node_modules/@babel/runtime/helpers/createClass/index.js","webpack://grapesjs-template-manager/./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose/index.js","webpack://grapesjs-template-manager/./src/commands.js","webpack://grapesjs-template-manager/./src/consts.js","webpack://grapesjs-template-manager/./src/storage/indexeddb.js","webpack://grapesjs-template-manager/./src/storage/remote.js","webpack://grapesjs-template-manager/./src/storage/firestore.js","webpack://grapesjs-template-manager/./src/storage/index.js","webpack://grapesjs-template-manager/./src/modal/manager.js","webpack://grapesjs-template-manager/./src/modal/index.js","webpack://grapesjs-template-manager/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grapesjs-template-manager\"] = factory();\n\telse\n\t\troot[\"grapesjs-template-manager\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var objectWithoutPropertiesLoose = require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","(function (global) {\n    'use strict';\n\n    var util = newUtil();\n    var inliner = newInliner();\n    var fontFaces = newFontFaces();\n    var images = newImages();\n\n    // Default impl options\n    var defaultOptions = {\n        // Default is to fail on error, no placeholder\n        imagePlaceholder: undefined,\n        // Default cache bust is false, it will use the cache\n        cacheBust: false\n    };\n\n    var domtoimage = {\n        toSvg: toSvg,\n        toPng: toPng,\n        toJpeg: toJpeg,\n        toBlob: toBlob,\n        toPixelData: toPixelData,\n        impl: {\n            fontFaces: fontFaces,\n            images: images,\n            util: util,\n            inliner: inliner,\n            options: {}\n        }\n    };\n\n    if (typeof module !== 'undefined')\n        module.exports = domtoimage;\n    else\n        global.domtoimage = domtoimage;\n\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\n     *          (excluding node means excluding it's children as well). Not called on the root node.\n     * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n     * @param {Number} options.width - width to be applied to node before rendering.\n     * @param {Number} options.height - height to be applied to node before rendering.\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n                defaults to 1.0.\n     * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n     * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n     * */\n    function toSvg(node, options) {\n        options = options || {};\n        copyOptions(options);\n        return Promise.resolve(node)\n            .then(function (node) {\n                return cloneNode(node, options.filter, true);\n            })\n            .then(embedFonts)\n            .then(inlineImages)\n            .then(applyOptions)\n            .then(function (clone) {\n                return makeSvgDataUri(clone,\n                    options.width || util.width(node),\n                    options.height || util.height(node)\n                );\n            });\n\n        function applyOptions(clone) {\n            if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n\n            if (options.width) clone.style.width = options.width + 'px';\n            if (options.height) clone.style.height = options.height + 'px';\n\n            if (options.style)\n                Object.keys(options.style).forEach(function (property) {\n                    clone.style[property] = options.style[property];\n                });\n\n            return clone;\n        }\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n     * */\n    function toPixelData(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.getContext('2d').getImageData(\n                    0,\n                    0,\n                    util.width(node),\n                    util.height(node)\n                ).data;\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n     * */\n    function toPng(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.toDataURL();\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n     * */\n    function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options)\n            .then(function (canvas) {\n                return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image blob\n     * */\n    function toBlob(node, options) {\n        return draw(node, options || {})\n            .then(util.canvasToBlob);\n    }\n\n    function copyOptions(options) {\n        // Copy options to impl options for use in impl\n        if(typeof(options.imagePlaceholder) === 'undefined') {\n            domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n        } else {\n            domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n        }\n\n        if(typeof(options.cacheBust) === 'undefined') {\n            domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n        } else {\n            domtoimage.impl.options.cacheBust = options.cacheBust;\n        }\n    }\n\n    function draw(domNode, options) {\n        return toSvg(domNode, options)\n            .then(util.makeImage)\n            .then(util.delay(100))\n            .then(function (image) {\n                var canvas = newCanvas(domNode);\n                canvas.getContext('2d').drawImage(image, 0, 0);\n                return canvas;\n            });\n\n        function newCanvas(domNode) {\n            var canvas = document.createElement('canvas');\n            canvas.width = options.width || util.width(domNode);\n            canvas.height = options.height || util.height(domNode);\n\n            if (options.bgcolor) {\n                var ctx = canvas.getContext('2d');\n                ctx.fillStyle = options.bgcolor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n\n            return canvas;\n        }\n    }\n\n    function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n\n        return Promise.resolve(node)\n            .then(makeNodeCopy)\n            .then(function (clone) {\n                return cloneChildren(node, clone, filter);\n            })\n            .then(function (clone) {\n                return processClone(node, clone);\n            });\n\n        function makeNodeCopy(node) {\n            if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n            return node.cloneNode(false);\n        }\n\n        function cloneChildren(original, clone, filter) {\n            var children = original.childNodes;\n            if (children.length === 0) return Promise.resolve(clone);\n\n            return cloneChildrenInOrder(clone, util.asArray(children), filter)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneChildrenInOrder(parent, children, filter) {\n                var done = Promise.resolve();\n                children.forEach(function (child) {\n                    done = done\n                        .then(function () {\n                            return cloneNode(child, filter);\n                        })\n                        .then(function (childClone) {\n                            if (childClone) parent.appendChild(childClone);\n                        });\n                });\n                return done;\n            }\n        }\n\n        function processClone(original, clone) {\n            if (!(clone instanceof Element)) return clone;\n\n            return Promise.resolve()\n                .then(cloneStyle)\n                .then(clonePseudoElements)\n                .then(copyUserInput)\n                .then(fixSvg)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneStyle() {\n                copyStyle(window.getComputedStyle(original), clone.style);\n\n                function copyStyle(source, target) {\n                    if (source.cssText) target.cssText = source.cssText;\n                    else copyProperties(source, target);\n\n                    function copyProperties(source, target) {\n                        util.asArray(source).forEach(function (name) {\n                            target.setProperty(\n                                name,\n                                source.getPropertyValue(name),\n                                source.getPropertyPriority(name)\n                            );\n                        });\n                    }\n                }\n            }\n\n            function clonePseudoElements() {\n                [':before', ':after'].forEach(function (element) {\n                    clonePseudoElement(element);\n                });\n\n                function clonePseudoElement(element) {\n                    var style = window.getComputedStyle(original, element);\n                    var content = style.getPropertyValue('content');\n\n                    if (content === '' || content === 'none') return;\n\n                    var className = util.uid();\n                    clone.className = clone.className + ' ' + className;\n                    var styleElement = document.createElement('style');\n                    styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                    clone.appendChild(styleElement);\n\n                    function formatPseudoElementStyle(className, element, style) {\n                        var selector = '.' + className + ':' + element;\n                        var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                        return document.createTextNode(selector + '{' + cssText + '}');\n\n                        function formatCssText(style) {\n                            var content = style.getPropertyValue('content');\n                            return style.cssText + ' content: ' + content + ';';\n                        }\n\n                        function formatCssProperties(style) {\n\n                            return util.asArray(style)\n                                .map(formatProperty)\n                                .join('; ') + ';';\n\n                            function formatProperty(name) {\n                                return name + ': ' +\n                                    style.getPropertyValue(name) +\n                                    (style.getPropertyPriority(name) ? ' !important' : '');\n                            }\n                        }\n                    }\n                }\n            }\n\n            function copyUserInput() {\n                if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n                if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n            }\n\n            function fixSvg() {\n                if (!(clone instanceof SVGElement)) return;\n                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n                if (!(clone instanceof SVGRectElement)) return;\n                ['width', 'height'].forEach(function (attribute) {\n                    var value = clone.getAttribute(attribute);\n                    if (!value) return;\n\n                    clone.style.setProperty(attribute, value);\n                });\n            }\n        }\n    }\n\n    function embedFonts(node) {\n        return fontFaces.resolveAll()\n            .then(function (cssText) {\n                var styleNode = document.createElement('style');\n                node.appendChild(styleNode);\n                styleNode.appendChild(document.createTextNode(cssText));\n                return node;\n            });\n    }\n\n    function inlineImages(node) {\n        return images.inlineAll(node)\n            .then(function () {\n                return node;\n            });\n    }\n\n    function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node)\n            .then(function (node) {\n                node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n                return new XMLSerializer().serializeToString(node);\n            })\n            .then(util.escapeXhtml)\n            .then(function (xhtml) {\n                return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n            })\n            .then(function (foreignObject) {\n                return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' +\n                    foreignObject + '</svg>';\n            })\n            .then(function (svg) {\n                return 'data:image/svg+xml;charset=utf-8,' + svg;\n            });\n    }\n\n    function newUtil() {\n        return {\n            escape: escape,\n            parseExtension: parseExtension,\n            mimeType: mimeType,\n            dataAsUrl: dataAsUrl,\n            isDataUrl: isDataUrl,\n            canvasToBlob: canvasToBlob,\n            resolveUrl: resolveUrl,\n            getAndEncode: getAndEncode,\n            uid: uid(),\n            delay: delay,\n            asArray: asArray,\n            escapeXhtml: escapeXhtml,\n            makeImage: makeImage,\n            width: width,\n            height: height\n        };\n\n        function mimes() {\n            /*\n             * Only WOFF and EOT mime types for fonts are 'real'\n             * see http://www.iana.org/assignments/media-types/media-types.xhtml\n             */\n            var WOFF = 'application/font-woff';\n            var JPEG = 'image/jpeg';\n\n            return {\n                'woff': WOFF,\n                'woff2': WOFF,\n                'ttf': 'application/font-truetype',\n                'eot': 'application/vnd.ms-fontobject',\n                'png': 'image/png',\n                'jpg': JPEG,\n                'jpeg': JPEG,\n                'gif': 'image/gif',\n                'tiff': 'image/tiff',\n                'svg': 'image/svg+xml'\n            };\n        }\n\n        function parseExtension(url) {\n            var match = /\\.([^\\.\\/]*?)$/g.exec(url);\n            if (match) return match[1];\n            else return '';\n        }\n\n        function mimeType(url) {\n            var extension = parseExtension(url).toLowerCase();\n            return mimes()[extension] || '';\n        }\n\n        function isDataUrl(url) {\n            return url.search(/^(data:)/) !== -1;\n        }\n\n        function toBlob(canvas) {\n            return new Promise(function (resolve) {\n                var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n                var length = binaryString.length;\n                var binaryArray = new Uint8Array(length);\n\n                for (var i = 0; i < length; i++)\n                    binaryArray[i] = binaryString.charCodeAt(i);\n\n                resolve(new Blob([binaryArray], {\n                    type: 'image/png'\n                }));\n            });\n        }\n\n        function canvasToBlob(canvas) {\n            if (canvas.toBlob)\n                return new Promise(function (resolve) {\n                    canvas.toBlob(resolve);\n                });\n\n            return toBlob(canvas);\n        }\n\n        function resolveUrl(url, baseUrl) {\n            var doc = document.implementation.createHTMLDocument();\n            var base = doc.createElement('base');\n            doc.head.appendChild(base);\n            var a = doc.createElement('a');\n            doc.body.appendChild(a);\n            base.href = baseUrl;\n            a.href = url;\n            return a.href;\n        }\n\n        function uid() {\n            var index = 0;\n\n            return function () {\n                return 'u' + fourRandomChars() + index++;\n\n                function fourRandomChars() {\n                    /* see http://stackoverflow.com/a/6248722/2519373 */\n                    return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n                }\n            };\n        }\n\n        function makeImage(uri) {\n            return new Promise(function (resolve, reject) {\n                var image = new Image();\n                image.onload = function () {\n                    resolve(image);\n                };\n                image.onerror = reject;\n                image.src = uri;\n            });\n        }\n\n        function getAndEncode(url) {\n            var TIMEOUT = 30000;\n            if(domtoimage.impl.options.cacheBust) {\n                // Cache bypass so we dont have CORS issues with cached images\n                // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n                url += ((/\\?/).test(url) ? \"&\" : \"?\") + (new Date()).getTime();\n            }\n\n            return new Promise(function (resolve) {\n                var request = new XMLHttpRequest();\n\n                request.onreadystatechange = done;\n                request.ontimeout = timeout;\n                request.responseType = 'blob';\n                request.timeout = TIMEOUT;\n                request.open('GET', url, true);\n                request.send();\n\n                var placeholder;\n                if(domtoimage.impl.options.imagePlaceholder) {\n                    var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n                    if(split && split[1]) {\n                        placeholder = split[1];\n                    }\n                }\n\n                function done() {\n                    if (request.readyState !== 4) return;\n\n                    if (request.status !== 200) {\n                        if(placeholder) {\n                            resolve(placeholder);\n                        } else {\n                            fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                        }\n\n                        return;\n                    }\n\n                    var encoder = new FileReader();\n                    encoder.onloadend = function () {\n                        var content = encoder.result.split(/,/)[1];\n                        resolve(content);\n                    };\n                    encoder.readAsDataURL(request.response);\n                }\n\n                function timeout() {\n                    if(placeholder) {\n                        resolve(placeholder);\n                    } else {\n                        fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                    }\n                }\n\n                function fail(message) {\n                    console.error(message);\n                    resolve('');\n                }\n            });\n        }\n\n        function dataAsUrl(content, type) {\n            return 'data:' + type + ';base64,' + content;\n        }\n\n        function escape(string) {\n            return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n\n        function delay(ms) {\n            return function (arg) {\n                return new Promise(function (resolve) {\n                    setTimeout(function () {\n                        resolve(arg);\n                    }, ms);\n                });\n            };\n        }\n\n        function asArray(arrayLike) {\n            var array = [];\n            var length = arrayLike.length;\n            for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n            return array;\n        }\n\n        function escapeXhtml(string) {\n            return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n        }\n\n        function width(node) {\n            var leftBorder = px(node, 'border-left-width');\n            var rightBorder = px(node, 'border-right-width');\n            return node.scrollWidth + leftBorder + rightBorder;\n        }\n\n        function height(node) {\n            var topBorder = px(node, 'border-top-width');\n            var bottomBorder = px(node, 'border-bottom-width');\n            return node.scrollHeight + topBorder + bottomBorder;\n        }\n\n        function px(node, styleProperty) {\n            var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n            return parseFloat(value.replace('px', ''));\n        }\n    }\n\n    function newInliner() {\n        var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n        return {\n            inlineAll: inlineAll,\n            shouldProcess: shouldProcess,\n            impl: {\n                readUrls: readUrls,\n                inline: inline\n            }\n        };\n\n        function shouldProcess(string) {\n            return string.search(URL_REGEX) !== -1;\n        }\n\n        function readUrls(string) {\n            var result = [];\n            var match;\n            while ((match = URL_REGEX.exec(string)) !== null) {\n                result.push(match[1]);\n            }\n            return result.filter(function (url) {\n                return !util.isDataUrl(url);\n            });\n        }\n\n        function inline(string, url, baseUrl, get) {\n            return Promise.resolve(url)\n                .then(function (url) {\n                    return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n                })\n                .then(get || util.getAndEncode)\n                .then(function (data) {\n                    return util.dataAsUrl(data, util.mimeType(url));\n                })\n                .then(function (dataUrl) {\n                    return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n                });\n\n            function urlAsRegex(url) {\n                return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n            }\n        }\n\n        function inlineAll(string, baseUrl, get) {\n            if (nothingToInline()) return Promise.resolve(string);\n\n            return Promise.resolve(string)\n                .then(readUrls)\n                .then(function (urls) {\n                    var done = Promise.resolve(string);\n                    urls.forEach(function (url) {\n                        done = done.then(function (string) {\n                            return inline(string, url, baseUrl, get);\n                        });\n                    });\n                    return done;\n                });\n\n            function nothingToInline() {\n                return !shouldProcess(string);\n            }\n        }\n    }\n\n    function newFontFaces() {\n        return {\n            resolveAll: resolveAll,\n            impl: {\n                readAll: readAll\n            }\n        };\n\n        function resolveAll() {\n            return readAll(document)\n                .then(function (webFonts) {\n                    return Promise.all(\n                        webFonts.map(function (webFont) {\n                            return webFont.resolve();\n                        })\n                    );\n                })\n                .then(function (cssStrings) {\n                    return cssStrings.join('\\n');\n                });\n        }\n\n        function readAll() {\n            return Promise.resolve(util.asArray(document.styleSheets))\n                .then(getCssRules)\n                .then(selectWebFontRules)\n                .then(function (rules) {\n                    return rules.map(newWebFont);\n                });\n\n            function selectWebFontRules(cssRules) {\n                return cssRules\n                    .filter(function (rule) {\n                        return rule.type === CSSRule.FONT_FACE_RULE;\n                    })\n                    .filter(function (rule) {\n                        return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                    });\n            }\n\n            function getCssRules(styleSheets) {\n                var cssRules = [];\n                styleSheets.forEach(function (sheet) {\n                    try {\n                        util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                    } catch (e) {\n                        console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                    }\n                });\n                return cssRules;\n            }\n\n            function newWebFont(webFontRule) {\n                return {\n                    resolve: function resolve() {\n                        var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                        return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                    },\n                    src: function () {\n                        return webFontRule.style.getPropertyValue('src');\n                    }\n                };\n            }\n        }\n    }\n\n    function newImages() {\n        return {\n            inlineAll: inlineAll,\n            impl: {\n                newImage: newImage\n            }\n        };\n\n        function newImage(element) {\n            return {\n                inline: inline\n            };\n\n            function inline(get) {\n                if (util.isDataUrl(element.src)) return Promise.resolve();\n\n                return Promise.resolve(element.src)\n                    .then(get || util.getAndEncode)\n                    .then(function (data) {\n                        return util.dataAsUrl(data, util.mimeType(element.src));\n                    })\n                    .then(function (dataUrl) {\n                        return new Promise(function (resolve, reject) {\n                            element.onload = resolve;\n                            element.onerror = reject;\n                            element.src = dataUrl;\n                        });\n                    });\n            }\n        }\n\n        function inlineAll(node) {\n            if (!(node instanceof Element)) return Promise.resolve(node);\n\n            return inlineBackground(node)\n                .then(function () {\n                    if (node instanceof HTMLImageElement)\n                        return newImage(node).inline();\n                    else\n                        return Promise.all(\n                            util.asArray(node.childNodes).map(function (child) {\n                                return inlineAll(child);\n                            })\n                        );\n                });\n\n            function inlineBackground(node) {\n                var background = node.style.getPropertyValue('background');\n\n                if (!background) return Promise.resolve(node);\n\n                return inliner.inlineAll(background)\n                    .then(function (inlined) {\n                        node.style.setProperty(\n                            'background',\n                            inlined,\n                            node.style.getPropertyPriority('background')\n                        );\n                    })\n                    .then(function () {\n                        return node;\n                    });\n            }\n        }\n    }\n})(this);\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import domtoimage from 'dom-to-image';\r\n\r\nexport default (editor, opts = {}) => {\r\n    const cm = editor.Commands;\r\n\r\n    editor.domtoimage = domtoimage;\r\n\r\n    //some magic from gist.github.com/jed/982883\r\n    const uuidv4 = () => ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\r\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\r\n    );\r\n\r\n    const getJpeg = (node, opts = {}, clb, clbErr) => {\r\n        domtoimage.toJpeg(node, opts)\r\n            .then(dataUrl => clb && clb(dataUrl))\r\n            .catch(err => clbErr && clbErr(err))\r\n    };\r\n\r\n    cm.add('get-uuidv4', () => uuidv4());\r\n\r\n    cm.add('take-screenshot', editor => {\r\n        const el = editor.getWrapper().getEl();\r\n        const clb = dataUrl => editor.Storage.getCurrentStorage().setThumbnail(dataUrl);\r\n        getJpeg(el, {\r\n            quality: opts.quality,\r\n            height: 1000,\r\n            'cacheBust': true,\r\n            style: {\r\n                'background-color': 'white',\r\n                ...editor.getWrapper().getStyle()\r\n            },\r\n        }, clb, opts.onScreenshotError);\r\n    });\r\n\r\n    cm.add('save-as-template', editor => {\r\n        editor.Storage.getCurrentStorage()\r\n            .setIsTemplate(true);\r\n        editor.store();\r\n    });\r\n\r\n    cm.add('delete-template', editor => {\r\n        editor.Storage.getCurrentStorage()\r\n            .delete(opts.onDelete, opts.onDeleteError);\r\n    });\r\n}","export const storageIDB = 'indexeddb',\r\n    storageRemote = 'rest-api',\r\n    storageFireStore = 'firestore';","import { storageIDB } from '../consts';\r\n\r\nexport default (editor, opts = {}) => {\r\n    let db;\r\n    const sm = editor.StorageManager;\r\n    const storageName = storageIDB;\r\n    const objsName = opts.objectStoreName;\r\n\r\n    // Functions for DB retrieving\r\n    const getDb = () => db;\r\n    const getAsyncDb = (clb) => {\r\n        if (db) {\r\n            clb(db);\r\n        } else {\r\n            const indexedDB = window.indexedDB || window.mozIndexedDB ||\r\n                window.webkitIndexedDB || window.msIndexedDB;\r\n            const request = indexedDB.open(opts.dbName, opts.indexeddbVersion);\r\n            const onError = () => sm.onError(storageName, request.errorCode);\r\n            request.onerror = onError;\r\n            request.onsuccess = () => {\r\n                db = request.result;\r\n                db.onerror = onError;\r\n                clb(db);\r\n            };\r\n            request.onupgradeneeded = e => {\r\n                const objs = e.currentTarget.result.createObjectStore(objsName, { keyPath: 'idx' });\r\n                objs.createIndex('id', 'id', { unique: false });\r\n            };\r\n        }\r\n    };\r\n\r\n    // Functions for object store retrieving\r\n    const getObjectStore = () => {\r\n        return db.transaction([objsName], 'readwrite').objectStore(objsName);\r\n    };\r\n    const getAsyncObjectStore = clb => {\r\n        if (db) {\r\n            clb(getObjectStore());\r\n        } else {\r\n            getAsyncDb(db => clb(getObjectStore()))\r\n        }\r\n    };\r\n\r\n    // Add custom storage to the editor\r\n    sm.add(storageName, {\r\n        currentId: 'Default',\r\n        currentIdx: 'uuidv4',\r\n        currentThumbnail: '',\r\n        isTemplate: false,\r\n        getDb,\r\n\r\n        getObjectStore,\r\n\r\n        setId(id) {\r\n            this.currentId = id;\r\n        },\r\n\r\n        setIdx(idx) {\r\n            this.currentIdx = idx;\r\n        },\r\n\r\n        setThumbnail(thumbnail) {\r\n            this.currentThumbnail = thumbnail;\r\n        },\r\n\r\n        setIsTemplate(isTemplate) {\r\n            this.isTemplate = !!isTemplate;\r\n        },\r\n\r\n        load(keys, clb, clbErr) {\r\n            getAsyncObjectStore(objs => {\r\n                const request = objs.get(this.currentIdx);\r\n                request.onerror = clbErr;\r\n                request.onsuccess = () => {\r\n                    clb && clb(request.result);\r\n                };\r\n            });\r\n        },\r\n\r\n        loadAll(clb, clbErr) {\r\n            getAsyncObjectStore(objs => {\r\n                const request = objs.getAll();\r\n                request.onerror = clbErr;\r\n                request.onsuccess = () => {\r\n                    clb && clb(request.result);\r\n                };\r\n            });\r\n        },\r\n\r\n        store(data, clb, clbErr) {\r\n            getAsyncObjectStore(objs => {\r\n                const request = objs.put({\r\n                    idx: this.currentIdx,\r\n                    id: this.currentId,\r\n                    template: this.isTemplate,\r\n                    thumbnail: this.currentThumbnail,\r\n                    ...data\r\n                });\r\n                request.onerror = clbErr;\r\n                request.onsuccess = clb;\r\n            });\r\n        },\r\n\r\n        update(data, clb, clbErr) {\r\n            const { idx, ..._data } = data;\r\n            getAsyncObjectStore(objs => {\r\n                const request = objs.get(idx);\r\n                request.onerror = clbErr;\r\n                request.onsuccess = () => {\r\n                    objs.put({ idx, ...request.result, ..._data });\r\n                    clb && clb(request.result);\r\n                };\r\n            });\r\n        },\r\n\r\n        delete(clb, clbErr, index) {\r\n            getAsyncObjectStore(objs => {\r\n                const request = objs.delete(index || this.currentIdx);\r\n                request.onerror = clbErr;\r\n                request.onsuccess = clb;\r\n            });\r\n        }\r\n    });\r\n}","import { storageRemote } from '../consts';\r\n\r\nexport default (editor, opts = {}) => {\r\n    const sm = editor.StorageManager;\r\n    const storageName = storageRemote;\r\n    const remote = sm.get('remote');\r\n\r\n    // Add custom storage to the editor\r\n    sm.add(storageName, {\r\n        currentId: 'Default',\r\n        currentIdx: 'uuidv4',\r\n        currentThumbnail: '',\r\n        isTemplate: false,\r\n\r\n        setId(id) {\r\n            this.currentId = id;\r\n        },\r\n\r\n        setIdx(idx) {\r\n            this.currentIdx = idx;\r\n        },\r\n\r\n        setThumbnail(thumbnail) {\r\n            this.currentThumbnail = thumbnail;\r\n        },\r\n\r\n        setIsTemplate(isTemplate) {\r\n            this.isTemplate = !!isTemplate;\r\n        },\r\n\r\n        load(keys, clb, clbErr) {\r\n            const urlLoad = remote.get('urlLoad');\r\n            const idx = urlLoad.endsWith(\"/\") ? this.currentIdx : `/${this.currentIdx}`;\r\n            remote.set({ urlLoad: urlLoad + idx });\r\n            remote.load(keys, clb, clbErr);\r\n            remote.set({ urlLoad });\r\n        },\r\n\r\n        loadAll(clb, clbErr) {\r\n            remote.load({}, clb, clbErr);\r\n        },\r\n\r\n        store(data, clb, clbErr) {\r\n            const urlStore = remote.get('urlStore');\r\n            const idx = urlStore.endsWith(\"/\") ? this.currentIdx : `/${this.currentIdx}`;\r\n            opts.uuidInPath && remote.set({ urlStore: urlStore + idx });\r\n            remote.store({\r\n                idx: this.currentIdx,\r\n                id: this.currentId,\r\n                template: this.isTemplate,\r\n                thumbnail: this.currentThumbnail,\r\n                ...data\r\n            }, clb, clbErr);\r\n            remote.set({ urlStore });\r\n        },\r\n\r\n        update(data, clb, clbErr) {\r\n            const urlLoad = remote.get('urlLoad');\r\n            let { idx } = data;\r\n            idx = urlLoad.endsWith(\"/\") ? idx : `/${idx}`;\r\n            remote.set({ urlLoad: urlLoad + idx });\r\n            remote.load({}, res => {\r\n                const body = { ...res, ...data };\r\n                const method = 'post';\r\n                const urlUpdate = remote.get('urlStore');\r\n                idx = urlUpdate.endsWith(\"/\") ? idx : `/${idx}`;\r\n                remote.request(urlUpdate + idx, { method, body }, clb, clbErr);\r\n            }, clbErr);\r\n            remote.set({ urlLoad });\r\n        },\r\n\r\n        delete(clb, clbErr, index) {\r\n            const urlDelete = remote.get('urlDelete');\r\n            let idx = index || this.currentIdx;\r\n            idx = urlDelete.endsWith(\"/\") ? idx : `/${idx}`;\r\n            const method = 'delete';\r\n            remote.request(urlDelete + idx, { method }, clb, clbErr);\r\n        }\r\n    });\r\n}","import { storageFireStore } from '../consts';\r\n\r\nexport default (editor, opts = {}) => {\r\n    const sm = editor.StorageManager;\r\n    const storageName = storageFireStore;\r\n\r\n    let db;\r\n    let doc;\r\n    let collection;\r\n    const { apiKey, authDomain, projectId } = opts;\r\n    const dbSettings = opts.settings;\r\n    const onError = err => sm.onError(storageName, err.code || err);\r\n\r\n    const getDoc = () => doc;\r\n\r\n    const getAsyncCollection = (clb) => {\r\n        if (collection) return clb(collection);\r\n        if (!firebase.apps.length) {\r\n            firebase.initializeApp({ apiKey, authDomain, projectId, ...opts.firebaseConfig });\r\n            db = firebase.firestore();\r\n            db.settings(dbSettings);\r\n        }\r\n        else {\r\n            firebase.app();\r\n            db = firebase.firestore();\r\n            db.settings(dbSettings);\r\n        }\r\n\r\n        const callback = () => {\r\n            collection = db.collection(opts.objectStoreName);\r\n            clb(collection);\r\n        }\r\n\r\n        callback();\r\n\r\n        //if (opts.enableOffline) {\r\n        //    db.enablePersistence().then(callback).catch(onError);\r\n        //} else {\r\n        //    callback();\r\n        //}\r\n    };\r\n\r\n    const getAsyncDoc = (clb) => {\r\n        getAsyncCollection(cll => {\r\n            const cs = editor.Storage.getCurrentStorage();\r\n            doc = cll.doc(cs.currentIdx);\r\n            clb(doc);\r\n        });\r\n    };\r\n\r\n    sm.add(storageName, {\r\n        currentId: 'Default',\r\n        currentIdx: 'uuidv4',\r\n        currentThumbnail: '',\r\n        isTemplate: false,\r\n        getDoc,\r\n\r\n        setDocId(id) {\r\n            this.currentIdx = id;\r\n        },\r\n\r\n        setId(id) {\r\n            this.currentId = id;\r\n        },\r\n\r\n        setIdx(idx) {\r\n            this.currentIdx = idx;\r\n        },\r\n\r\n        setThumbnail(thumbnail) {\r\n            this.currentThumbnail = thumbnail;\r\n        },\r\n\r\n        setIsTemplate(isTemplate) {\r\n            this.isTemplate = !!isTemplate;\r\n        },\r\n\r\n        load(keys, clb, clbError) {\r\n            getAsyncDoc(doc => {\r\n                doc.get()\r\n                    .then(doc => doc.exists && clb(doc.data()))\r\n                    .catch(clbError);\r\n            });\r\n        },\r\n\r\n        loadAll(clb, clbError) {\r\n            getAsyncCollection(cll => {\r\n                cll.get()\r\n                    .then(docs => {\r\n                        const data = [];\r\n                        docs.forEach(doc => data.push(doc.data()));\r\n                        clb(data);\r\n                    })\r\n                    .catch(clbError);\r\n            });\r\n        },\r\n\r\n        store(data, clb, clbError) {\r\n            getAsyncCollection(cll => {\r\n                cll.doc(data.idx || this.currentIdx).set({\r\n                    idx: this.currentIdx,\r\n                    id: this.currentId,\r\n                    template: this.isTemplate,\r\n                    thumbnail: this.currentThumbnail,\r\n                    ...data\r\n                })\r\n                    .then(clb)\r\n                    .catch(clbError);\r\n            });\r\n        },\r\n\r\n        update(data, clb, clbError) {\r\n            const { idx, ..._data } = data;\r\n            getAsyncCollection(cll => {\r\n                cll.doc(idx).set(_data, { merge: true })\r\n                    .then(clb)\r\n                    .catch(clbError);\r\n            });\r\n        },\r\n\r\n        delete(clb, clbError, index) {\r\n            if (!index) {\r\n                getAsyncDoc(doc => {\r\n                    doc.delete()\r\n                        .then(clb)\r\n                        .catch(clbError);\r\n                });\r\n            } else {\r\n                getAsyncCollection(cll => {\r\n                    cll.doc(index).delete()\r\n                        .then(clb)\r\n                        .catch(clbError);\r\n                });\r\n            }\r\n        }\r\n    });\r\n}","import indexeddb from './indexeddb';\r\nimport remote from './remote';\r\nimport firestore from './firestore';\r\n\r\nexport default (editor, opts = {}) => {\r\n    // Load indexeddb storage\r\n    indexeddb(editor, opts);\r\n\r\n    // Load remote storage\r\n    remote(editor, opts);\r\n\r\n    // Load firestore storage\r\n    firestore(editor, opts);\r\n}","export default class TemplateManager {\r\n    constructor(editor, opts = {}) {\r\n        this.editor = editor;\r\n        this.$ = editor.$;\r\n        this.pfx = editor.getConfig('stylePrefix');\r\n        this.id = editor.Storage.getConfig().id || 'gjs-';\r\n        this.opts = opts;\r\n    }\r\n\r\n    _createPage() {\r\n        const { editor, templateIdx, page } = this;\r\n        const cs = editor.Storage.getCurrentStorage();\r\n        cs.setIdx(templateIdx);\r\n        cs.setIsTemplate(false);\r\n        this.page && editor.load(res => {\r\n            editor.setComponents(res.components ? JSON.parse(res.components) : res.html);\r\n            editor.setStyle(res.styles ? JSON.parse(res.styles) : res.css);\r\n            cs.setId(page);\r\n            cs.setIdx(editor.runCommand('get-uuidv4'));\r\n            cs.setThumbnail(res.thumbnail || '');\r\n            editor.Modal.close();\r\n        });\r\n    };\r\n\r\n    _openTemplate() {\r\n        const { editor, templateIdx } = this;\r\n        const cs = editor.Storage.getCurrentStorage();\r\n        cs.setIdx(templateIdx);\r\n        cs.setIsTemplate(true);\r\n        editor.load(res => {\r\n            editor.setComponents(res.components ? JSON.parse(res.components) : res.html);\r\n            editor.setStyle(res.styles ? JSON.parse(res.styles) : res.css);\r\n            cs.setThumbnail(res.thumbnail || '');\r\n            editor.Modal.close();\r\n        });\r\n    };\r\n\r\n    _selectTemplate(e) {\r\n        const { pfx } = this;\r\n        const target = e.currentTarget;\r\n        this.templateIdx = target.dataset.idx;\r\n        this.$(`.${pfx}templates-card`).each((i, elm) => {\r\n            elm.classList.remove(`${pfx}templates-card-active`)\r\n        });\r\n        target.parentElement.classList.add(`${pfx}templates-card-active`);\r\n    };\r\n\r\n    _openPage(e) {\r\n        const { editor } = this;\r\n        const cs = editor.Storage.getCurrentStorage();\r\n        cs.setIdx(e.currentTarget.dataset.idx);\r\n        cs.setIsTemplate(false);\r\n        editor.load(res => {\r\n            editor.setComponents(res.components ? JSON.parse(res.components) : res.html);\r\n            editor.setStyle(res.styles ? JSON.parse(res.styles) : res.css);\r\n            cs.setId(res.id);\r\n            cs.setThumbnail(res.thumbnail || '');\r\n            editor.Modal.close();\r\n        });\r\n    }\r\n\r\n    _editName(e) {\r\n        const $el = this.$(e.currentTarget.parentElement);\r\n        const lbl = $el.children().first();\r\n        const inputCont = $el.find(`.${this.pfx}field`);\r\n        const input = inputCont.find('input');\r\n        if (inputCont.get(0).style.display === 'block') {\r\n            lbl.text(input.val());\r\n            inputCont.hide();\r\n            this.editor.Storage.getCurrentStorage().update({\r\n                idx: e.currentTarget.dataset.idx,\r\n                id: input.val().trim()\r\n            });\r\n        } else {\r\n            input.val(lbl.text().trim());\r\n            lbl.text('...');\r\n            inputCont.show();\r\n        }\r\n    }\r\n\r\n    _deletePage(e) {\r\n        const { editor, opts } = this;\r\n        editor.Storage.getCurrentStorage()\r\n            .delete(opts.onDelete, opts.onDeleteError, e.currentTarget.dataset.idx);\r\n        e.currentTarget.parentElement\r\n            .parentElement.style.display = 'none';\r\n    }\r\n\r\n    _thumbs(idx, thumb) {\r\n        return `<div class=\"${this.pfx}templates-card\" data-idx=\"${idx}\">\r\n                ${thumb}\r\n            </div>`;\r\n    }\r\n\r\n    _thumbsCont(thumbs) {\r\n        const content = this.$(`<div class=\"${this.pfx}templates-card-2\">\r\n                ${thumbs}\r\n            </div>`);\r\n        content.find('i.fa.fa-i-cursor').on('click', e => this._editName(e));\r\n        content.find('i.fa.fa-trash-o').on('click', e => this._deletePage(e));\r\n        return content;\r\n    }\r\n\r\n    _pages(thumbs) {\r\n        const { pfx } = this;\r\n        const cs = this.editor.Storage.getCurrentStorage();\r\n        const content = this._thumbsCont(thumbs);\r\n        content.find(`.${pfx}templates-card`)\r\n            .filter((i, elm) => elm.getAttribute('data-idx') == cs.currentIdx)\r\n            .addClass(`${pfx}templates-card-active`)\r\n            .find('i.fa')\r\n            .hide();\r\n        content.find(`.${this.pfx}thumb-select`).on('click', e => this._openPage(e));\r\n        return content;\r\n    }\r\n\r\n    _templates(thumbs) {\r\n        const { pfx } = this;\r\n        const content = this._thumbsCont(thumbs);\r\n        content.find(`.${pfx}templates-card`)\r\n            .filter((i, elm) => elm.getAttribute('data-idx') == this.templateIdx)\r\n            .addClass(`${pfx}templates-card-active`)\r\n            .find('i.fa')\r\n            .hide();\r\n        content.find(`.${pfx}thumb-select`).on('click', e => this._selectTemplate(e));\r\n        return content;\r\n    }\r\n\r\n    _tabs() {\r\n        const { pfx, $, opts } = this;\r\n        const content = $(`<div class=\"${pfx}tab\">\r\n                <button class=\"${pfx}tablinks active\">${opts.tabsText.pages}</button>\r\n                <button class=\"${pfx}tablinks\">${opts.tabsText.templates}</button>\r\n            </div>`);\r\n        content.find('button').on('click', e => {\r\n            const target = e.currentTarget;\r\n            content.find(`.${pfx}tablinks`).removeClass('active');\r\n            $(target).addClass('active');\r\n            if (target.innerHTML.toLowerCase() === 'pages') {\r\n                $('.templates-tab').hide();\r\n                $('.pages-tab').show();\r\n            } else {\r\n                $('.templates-tab').show();\r\n                $('.pages-tab').hide();\r\n            }\r\n        });\r\n        return content;\r\n    }\r\n\r\n    loader() {\r\n        return '<div class=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>';\r\n    }\r\n\r\n    noPages() {\r\n        return `<div class=\"${this.pfx}templates-card-2\">${this.opts.nopages}</div>`;\r\n    }\r\n\r\n    noTemplates() {\r\n        const { $, id, pfx, opts, editor } = this;\r\n        const cs = editor.Storage.getCurrentStorage();\r\n        const content = $(`<div class=\"${pfx}templates-card-2\">\r\n                <div style=\"display:flex;align-items:center;padding:50px;margin:auto;\">\r\n                    <button class=\"${pfx}btn-prim ${pfx}btn-wide\" id=\"create-blank\">\r\n                        ${opts.btnText.createBlank}\r\n                    </button>\r\n                </div>\r\n            </div>`);\r\n\r\n        content.find('#create-blank').on('click', () => {\r\n            const data = {};\r\n            data[`${id}html`] = '';\r\n            data[`${id}css`] = '';\r\n            cs.store({\r\n                idx: editor.runCommand('get-uuidv4'),\r\n                id: 'Blank',\r\n                template: true,\r\n                thumbnail: '',\r\n                ...data\r\n            });\r\n            cs.loadAll(res => {\r\n                    const templates = $('#pages').find('#templates-container');\r\n                    templates.find(`.${pfx}templates-card-2`).remove();\r\n                    templates.append(this.update(res.filter(r => r.template), false));\r\n                },\r\n                err => console.log(\"Error\", err));\r\n        });\r\n\r\n        return content;\r\n    }\r\n\r\n    render() {\r\n        const { pfx, $, opts } = this;\r\n        const tabs = this._tabs();\r\n        const content = $(`<div id=\"pages\" class=\"${pfx}templates ${pfx}one-bg ${pfx}two-color\">\r\n            <div class=\"${pfx}templates-overlay\"></div>\r\n            <div class=\"${pfx}templates-cont\">\r\n                <div class=\"${pfx}fonts templates-tab\" style=\"display:none\">\r\n                    <div class=\"${pfx}tip-about ${pfx}four-color\">${opts.help}</div>\r\n                    <label class=\"${pfx}field-label\" for=\"page-name\">${opts.nameLabel}</label>\r\n                    <div class=\"${pfx}field\">\r\n                        <input type=\"text\" name=\"pageName\" id=\"page-name\">\r\n                    </div>\r\n                    <span>\r\n                        <button class=\"${pfx}btn-prim ${pfx}btn-wide\" id=\"template-edit\">\r\n                            ${opts.btnText.edit}\r\n                        </button>\r\n                    </span>\r\n                    <span>\r\n                        <button class=\"${pfx}btn-prim ${pfx}btn-wide\" id=\"page-create\">\r\n                            ${opts.btnText.create}\r\n                        </button>\r\n                    </span>\r\n                </div>\r\n                <div id=\"pages-container\" class=\"pages-tab\">\r\n                    <button class=\"${pfx}btn-prim ${pfx}btn-wide\" id=\"templates-tab\">\r\n                        ${opts.btnText.new}\r\n                    </button>\r\n                </div>\r\n                <div id=\"templates-container\" class=\"templates-tab\" style=\"display:none\"></div>\r\n            </div>\r\n        </div>`);\r\n        content.find('#templates-tab').on('click', () => {\r\n            const tablinks = tabs.find(`.${pfx}tablinks`);\r\n            tablinks.removeClass('active');\r\n            $(tablinks.get(1)).addClass('active');\r\n            $('.templates-tab').show();\r\n            $('.pages-tab').hide();\r\n        });\r\n        content.find('#page-name').on('keyup', e => this.page = e.currentTarget.value);\r\n        content.find('#page-create').on('click', () => this._createPage());\r\n        content.find('#template-edit').on('click', () => this._openTemplate());\r\n        content.find(`.${pfx}templates-cont`).prepend(tabs);\r\n        return content;\r\n    }\r\n\r\n    update(data, pages = true) {\r\n        let thumbnailsEl = '';\r\n        const { pfx, id } = this;\r\n\r\n        if (!data.length) return pages ? this.noPages() : this.noTemplates();\r\n\r\n        data.forEach(el => {\r\n            const dataSvg = `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"template-preview\" viewBox=\"0 0 1300 1100\" width=\"99%\" height=\"220\">\r\n                    <foreignObject width=\"100%\" height=\"100%\" style=\"pointer-events:none\">\r\n                    <div xmlns=\"http://www.w3.org/1999/xhtml\" ${el[`${id}html`] ? '' : 'padding-top:100%'}\">\r\n                    ${el[`${id}html`] + '<style scoped>' + el[`${id}css`] + '</style>'}\r\n                    </div>\r\n                    </foreignObject>\r\n                </svg>`;\r\n            let thumbnailEl = el.thumbnail ? `<div class=\"${pfx}thumbnail-cont\">\r\n                    <img class=\"template-preview\" src=\"${el.thumbnail}\" alt=\"${el.id}\">\r\n                </div>` : dataSvg;\r\n            thumbnailEl = `<div class=\"${pfx}thumb-select\" data-idx=\"${el.idx}\">\r\n                    ${thumbnailEl}\r\n                </div>\r\n                <div class=\"label\">\r\n                    <div>${el.id}</div>\r\n                    <div class=\"${pfx}field\" style=\"display:none;\" >\r\n                        <input type=\"text\" placeholder=\"page name\" data-idx=\"${el.idx}\">\r\n                    </div>\r\n                    <i class=\"${pfx}caret-icon fa fa-i-cursor\" title=\"rename\" data-idx=\"${el.idx}\"></i>\r\n                    <i class=\"${pfx}caret-icon fa fa-trash-o\" title=\"delete\" data-idx=\"${el.idx}\"></i>\r\n                </div>`;\r\n\r\n            thumbnailsEl += this._thumbs(el.idx, thumbnailEl);\r\n        });\r\n\r\n        return pages ? this._pages(thumbnailsEl) : this._templates(thumbnailsEl);\r\n    }\r\n}","import TemplateManager from './manager';\r\n\r\nexport default (editor, opts = {}) => {\r\n    const { $ } = editor;\r\n    const mdl = editor.Modal;\r\n    const sm = editor.StorageManager;\r\n    const pfx = editor.getConfig('stylePrefix');\r\n    const mdlClass = `${pfx}mdl-dialog-tml`;\r\n    let templateManager = null;\r\n\r\n    editor.Commands.add('open-templates', {\r\n        run(editor, sender) {\r\n            const mdlDialog = document.querySelector(`.${pfx}mdl-dialog`);\r\n            mdlDialog.classList.add(mdlClass);\r\n            sender && sender.set && sender && sender.set('active');\r\n            !templateManager && (templateManager = new TemplateManager(editor, opts))\r\n            mdl.setTitle(opts.mdlTitle);\r\n            mdl.setContent($('.lds-ellipsis').length ? $('.lds-ellipsis') : templateManager.loader());\r\n            sm.getCurrentStorage().loadAll(res => {\r\n                    let content = $('#pages');\r\n                    content = content.length ? content : $(templateManager.render());\r\n                    mdl.setContent(content);\r\n                    const pages = content.find('#pages-container');\r\n                    const templates = content.find('#templates-container');\r\n                    pages.find(`.${pfx}templates-card-2`).remove();\r\n                    templates.find(`.${pfx}templates-card-2`).remove();\r\n                    pages.append(templateManager.update(res.filter(r => !r.template)));\r\n                    templates.append(templateManager.update(res.filter(r => r.template), false));\r\n                },\r\n                err => console.log(\"Error\", err));\r\n            mdl.open();\r\n            mdl.getModel().once('change:open', () => {\r\n                mdlDialog.classList.remove(mdlClass);\r\n            });\r\n        }\r\n    });\r\n};","import commands from './commands';\nimport storage from './storage';\nimport modal from './modal';\n\nexport default (editor, opts = {}) => {\n    const options = {\n        ...{\n            // default options\n            // Database name\n            dbName: 'gjs',\n\n            // Collection name\n            objectStoreName: 'templates',\n\n            // Load first template in storage\n            loadFirst: true,\n\n            // Add uuid as path parameter to store path for rest-api\n            uuidInPath: true,\n\n            // Indexeddb version schema\n            indexeddbVersion: 4,\n\n            // When template or page is deleted\n            onDelete(res) {\n                console.log('Deleted:', res)\n            },\n\n            // When error onDelete\n            onDeleteError(err) {\n                console.log(err)\n            },\n\n            // On screenshot error\n            onScreenshotError(err) {\n                console.log(err)\n            },\n\n            // Quality of screenshot image from 0 to 1, more quality increases the image size\n            quality: .01,\n\n            // Content for templates modal title\n            mdlTitle: 'Template Manager',\n\n            // Content for button text\n            btnText: {\n                new: 'New Page',\n                edit: 'Edit Selected',\n                create: 'Create',\n                createBlank: 'Create Blank Template'\n            },\n\n            // Content for tabs\n            tabsText: {\n                pages: 'Pages',\n                templates: 'Templates'\n            },\n\n            // Content for label\n            nameLabel: 'Name',\n\n            // Content for help message\n            help: 'Select a template, enter page name, then click create. Use edit to modify the template.',\n\n            // Show when no pages yet pages\n            nopages: '<div style=\"display:flex;align-items:center;padding:50px;margin:auto;\">No Pages Yet</div>',\n\n            // Firebase API key\n            apiKey: '',\n\n            // Firebase Auth domain\n            authDomain: '',\n\n            // Cloud Firestore project ID\n            projectId: '',\n\n            // Enable support for offline data persistence\n            enableOffline: true,\n\n            // Firebase app config\n            firebaseConfig: {},\n\n            // Database settings (https://firebase.google.com/docs/reference/js/firebase.firestore.Settings)\n            settings: { timestampsInSnapshots: true },\n        },\n        ...opts\n    };\n\n    // Load commands\n    commands(editor, options);\n\n    // Load storages\n    storage(editor, options);\n\n    // Load page manager\n    modal(editor, options);\n\n    // Load page with index zero\n    editor.on('load', () => {\n        const cs = editor.Storage.getCurrentStorage();\n        cs.loadAll(res => {\n            const firstPage = res[0];\n            if (firstPage && options.loadFirst) {\n                cs.setId(firstPage.id);\n                cs.setIdx(firstPage.idx);\n                cs.setThumbnail(firstPage.thumbnail);\n                cs.setIsTemplate(firstPage.template);\n                editor.load();\n            } else {\n                cs.setIdx(editor.runCommand('get-uuidv4'));\n            }\n        });\n    });\n};"]},"metadata":{},"sourceType":"script"}